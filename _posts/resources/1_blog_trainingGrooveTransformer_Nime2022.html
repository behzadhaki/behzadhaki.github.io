
<html lang="en"><head><title>Transformer Architecture for Generating Short Drum Loops Given a Performed Monotonic Groove</title><meta charSet="utf-8"/><style type="text/css">/* Imports the equivalent of components/Editor/styles/base.scss,
but without the media query mixin, which breaks PagedJS-cli:
https://gitlab.pagedmedia.org/tools/pagedjs-cli/issues/11 */
@import url("https://use.typekit.net/kmi0tdo.css");
.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror pre {
  white-space: pre-wrap;
}

.ProseMirror li {
  position: relative;
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection {
  caret-color: transparent;
}

.ProseMirror-selectednode {
  outline: 2px solid #8cf;
}

/* Make sure li selections wrap around markers */
li.ProseMirror-selectednode {
  outline: none;
}

li.ProseMirror-selectednode:after {
  content: "";
  position: absolute;
  left: -32px;
  right: -2px;
  top: -2px;
  bottom: -2px;
  border: 2px solid #8cf;
  pointer-events: none;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}
.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.ProseMirror .tableWrapper {
  overflow-x: auto;
}

.ProseMirror table {
  border-collapse: collapse;
  table-layout: fixed;
  width: 100%;
  overflow: hidden;
}

.ProseMirror td, .ProseMirror th {
  vertical-align: top;
  box-sizing: border-box;
  position: relative;
}

.ProseMirror .column-resize-handle {
  position: absolute;
  right: -2px;
  top: 0;
  bottom: 0;
  width: 4px;
  z-index: 20;
  background-color: #adf;
  pointer-events: none;
}

.ProseMirror.resize-cursor {
  cursor: ew-resize;
  cursor: col-resize;
}

/* Give selected cells a blue overlay */
.ProseMirror .selectedCell:after {
  z-index: 2;
  position: absolute;
  content: "";
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  background: rgba(200, 200, 255, 0.4);
  pointer-events: none;
}

/*---------------------------------------------------------
 *  Author: Benjamin R. Bray
 *  License: MIT (see LICENSE in project root for details)
 *--------------------------------------------------------*/
/* == Math Nodes ======================================== */
.math-node {
  min-width: 1em;
  min-height: 1em;
  font-size: 0.95em;
  font-family: "Consolas", "Ubuntu Mono", monospace;
  cursor: auto;
}

.math-node.empty-math .math-render::before {
  content: "(empty)";
  color: red;
}

.math-node .math-render.parse-error::before {
  content: "(math error)";
  color: red;
  cursor: help;
}

.math-node.ProseMirror-selectednode {
  outline: none;
}

.math-node .math-src {
  display: none;
  color: rgb(132, 33, 162);
  tab-size: 4;
}

.math-node.ProseMirror-selectednode .math-src {
  display: inline;
}

.math-node.ProseMirror-selectednode .math-render {
  display: none;
}

/* -- Inline Math --------------------------------------- */
math-inline {
  display: inline;
  white-space: nowrap;
}

math-inline .math-render {
  display: inline-block;
  font-size: 0.85em;
  cursor: pointer;
}

math-inline .math-src .ProseMirror {
  display: inline;
  /* Necessary to fix FireFox bug with contenteditable, https://bugzilla.mozilla.org/show_bug.cgi?id=1252108 */
  border-right: 1px solid transparent;
  border-left: 1px solid transparent;
}

math-inline .math-src::after, math-inline .math-src::before {
  content: "$";
  color: #b0b0b0;
}

/* -- Block Math ---------------------------------------- */
math-display {
  display: block;
}

math-display .math-render {
  display: block;
}

math-display.ProseMirror-selectednode {
  background-color: #eee;
}

math-display .math-src .ProseMirror {
  width: 100%;
  display: block;
}

math-display .math-src::after, math-display .math-src::before {
  content: "$$";
  text-align: left;
  color: #b0b0b0;
}

math-display .katex-display {
  margin: 0;
}

/* -- Selection Plugin ---------------------------------- */
p::selection, p > *::selection {
  background-color: #c0c0c0;
}

.katex-html *::selection {
  background-color: none !important;
}

.math-node.math-select .math-render {
  background-color: silver;
}

math-inline.math-select .math-render {
  padding-top: 2px;
}

@font-face {
  font-family: KaTeX_AMS;
  font-style: normal;
  font-weight: 400;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_AMS-Regular.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_AMS-Regular.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_AMS-Regular.ttf) format("truetype");
}
@font-face {
  font-family: KaTeX_Caligraphic;
  font-style: normal;
  font-weight: 700;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Caligraphic-Bold.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Caligraphic-Bold.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Caligraphic-Bold.ttf) format("truetype");
}
@font-face {
  font-family: KaTeX_Caligraphic;
  font-style: normal;
  font-weight: 400;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Caligraphic-Regular.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Caligraphic-Regular.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Caligraphic-Regular.ttf) format("truetype");
}
@font-face {
  font-family: KaTeX_Fraktur;
  font-style: normal;
  font-weight: 700;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Fraktur-Bold.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Fraktur-Bold.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Fraktur-Bold.ttf) format("truetype");
}
@font-face {
  font-family: KaTeX_Fraktur;
  font-style: normal;
  font-weight: 400;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Fraktur-Regular.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Fraktur-Regular.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Fraktur-Regular.ttf) format("truetype");
}
@font-face {
  font-family: KaTeX_Main;
  font-style: normal;
  font-weight: 700;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Main-Bold.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Main-Bold.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Main-Bold.ttf) format("truetype");
}
@font-face {
  font-family: KaTeX_Main;
  font-style: italic;
  font-weight: 700;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Main-BoldItalic.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Main-BoldItalic.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Main-BoldItalic.ttf) format("truetype");
}
@font-face {
  font-family: KaTeX_Main;
  font-style: italic;
  font-weight: 400;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Main-Italic.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Main-Italic.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Main-Italic.ttf) format("truetype");
}
@font-face {
  font-family: KaTeX_Main;
  font-style: normal;
  font-weight: 400;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Main-Regular.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Main-Regular.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Main-Regular.ttf) format("truetype");
}
@font-face {
  font-family: KaTeX_Math;
  font-style: italic;
  font-weight: 700;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Math-BoldItalic.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Math-BoldItalic.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Math-BoldItalic.ttf) format("truetype");
}
@font-face {
  font-family: KaTeX_Math;
  font-style: italic;
  font-weight: 400;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Math-Italic.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Math-Italic.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Math-Italic.ttf) format("truetype");
}
@font-face {
  font-family: "KaTeX_SansSerif";
  font-style: normal;
  font-weight: 700;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_SansSerif-Bold.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_SansSerif-Bold.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_SansSerif-Bold.ttf) format("truetype");
}
@font-face {
  font-family: "KaTeX_SansSerif";
  font-style: italic;
  font-weight: 400;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_SansSerif-Italic.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_SansSerif-Italic.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_SansSerif-Italic.ttf) format("truetype");
}
@font-face {
  font-family: "KaTeX_SansSerif";
  font-style: normal;
  font-weight: 400;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_SansSerif-Regular.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_SansSerif-Regular.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_SansSerif-Regular.ttf) format("truetype");
}
@font-face {
  font-family: KaTeX_Script;
  font-style: normal;
  font-weight: 400;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Script-Regular.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Script-Regular.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Script-Regular.ttf) format("truetype");
}
@font-face {
  font-family: KaTeX_Size1;
  font-style: normal;
  font-weight: 400;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Size1-Regular.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Size1-Regular.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Size1-Regular.ttf) format("truetype");
}
@font-face {
  font-family: KaTeX_Size2;
  font-style: normal;
  font-weight: 400;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Size2-Regular.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Size2-Regular.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Size2-Regular.ttf) format("truetype");
}
@font-face {
  font-family: KaTeX_Size3;
  font-style: normal;
  font-weight: 400;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Size3-Regular.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Size3-Regular.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Size3-Regular.ttf) format("truetype");
}
@font-face {
  font-family: KaTeX_Size4;
  font-style: normal;
  font-weight: 400;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Size4-Regular.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Size4-Regular.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Size4-Regular.ttf) format("truetype");
}
@font-face {
  font-family: KaTeX_Typewriter;
  font-style: normal;
  font-weight: 400;
  src: url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Typewriter-Regular.woff2) format("woff2"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Typewriter-Regular.woff) format("woff"), url(https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.18/fonts/KaTeX_Typewriter-Regular.ttf) format("truetype");
}
.katex {
  text-rendering: auto;
  font: normal 1.21em KaTeX_Main, Times New Roman, serif;
  line-height: 1.2;
  text-indent: 0;
}

.katex * {
  -ms-high-contrast-adjust: none !important;
  border-color: currentColor;
}

.katex .katex-version:after {
  content: "0.13.18";
}

.katex .katex-mathml {
  clip: rect(1px, 1px, 1px, 1px);
  border: 0;
  height: 1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

.katex .katex-html > .newline {
  display: block;
}

.katex .base {
  position: relative;
  white-space: nowrap;
  width: -webkit-min-content;
  width: -moz-min-content;
  width: min-content;
}

.katex .base, .katex .strut {
  display: inline-block;
}

.katex .textbf {
  font-weight: 700;
}

.katex .textit {
  font-style: italic;
}

.katex .textrm {
  font-family: KaTeX_Main;
}

.katex .textsf {
  font-family: KaTeX_SansSerif;
}

.katex .texttt {
  font-family: KaTeX_Typewriter;
}

.katex .mathnormal {
  font-family: KaTeX_Math;
  font-style: italic;
}

.katex .mathit {
  font-family: KaTeX_Main;
  font-style: italic;
}

.katex .mathrm {
  font-style: normal;
}

.katex .mathbf {
  font-family: KaTeX_Main;
  font-weight: 700;
}

.katex .boldsymbol {
  font-family: KaTeX_Math;
  font-style: italic;
  font-weight: 700;
}

.katex .amsrm, .katex .mathbb, .katex .textbb {
  font-family: KaTeX_AMS;
}

.katex .mathcal {
  font-family: KaTeX_Caligraphic;
}

.katex .mathfrak, .katex .textfrak {
  font-family: KaTeX_Fraktur;
}

.katex .mathtt {
  font-family: KaTeX_Typewriter;
}

.katex .mathscr, .katex .textscr {
  font-family: KaTeX_Script;
}

.katex .mathsf, .katex .textsf {
  font-family: KaTeX_SansSerif;
}

.katex .mathboldsf, .katex .textboldsf {
  font-family: KaTeX_SansSerif;
  font-weight: 700;
}

.katex .mathitsf, .katex .textitsf {
  font-family: KaTeX_SansSerif;
  font-style: italic;
}

.katex .mainrm {
  font-family: KaTeX_Main;
  font-style: normal;
}

.katex .vlist-t {
  border-collapse: collapse;
  display: inline-table;
  table-layout: fixed;
}

.katex .vlist-r {
  display: table-row;
}

.katex .vlist {
  display: table-cell;
  position: relative;
  vertical-align: bottom;
}

.katex .vlist > span {
  display: block;
  height: 0;
  position: relative;
}

.katex .vlist > span > span {
  display: inline-block;
}

.katex .vlist > span > .pstrut {
  overflow: hidden;
  width: 0;
}

.katex .vlist-t2 {
  margin-right: -2px;
}

.katex .vlist-s {
  display: table-cell;
  font-size: 1px;
  min-width: 2px;
  vertical-align: bottom;
  width: 2px;
}

.katex .vbox {
  align-items: baseline;
  display: inline-flex;
  flex-direction: column;
}

.katex .hbox {
  width: 100%;
}

.katex .hbox, .katex .thinbox {
  display: inline-flex;
  flex-direction: row;
}

.katex .thinbox {
  max-width: 0;
  width: 0;
}

.katex .msupsub {
  text-align: left;
}

.katex .mfrac > span > span {
  text-align: center;
}

.katex .mfrac .frac-line {
  border-bottom-style: solid;
  display: inline-block;
  width: 100%;
}

.katex .hdashline, .katex .hline, .katex .mfrac .frac-line, .katex .overline .overline-line, .katex .rule, .katex .underline .underline-line {
  min-height: 1px;
}

.katex .mspace {
  display: inline-block;
}

.katex .clap, .katex .llap, .katex .rlap {
  position: relative;
  width: 0;
}

.katex .clap > .inner, .katex .llap > .inner, .katex .rlap > .inner {
  position: absolute;
}

.katex .clap > .fix, .katex .llap > .fix, .katex .rlap > .fix {
  display: inline-block;
}

.katex .llap > .inner {
  right: 0;
}

.katex .clap > .inner, .katex .rlap > .inner {
  left: 0;
}

.katex .clap > .inner > span {
  margin-left: -50%;
  margin-right: 50%;
}

.katex .rule {
  border: 0 solid;
  display: inline-block;
  position: relative;
}

.katex .hline, .katex .overline .overline-line, .katex .underline .underline-line {
  border-bottom-style: solid;
  display: inline-block;
  width: 100%;
}

.katex .hdashline {
  border-bottom-style: dashed;
  display: inline-block;
  width: 100%;
}

.katex .sqrt > .root {
  margin-left: 0.27777778em;
  margin-right: -0.55555556em;
}

.katex .fontsize-ensurer.reset-size1.size1, .katex .sizing.reset-size1.size1 {
  font-size: 1em;
}

.katex .fontsize-ensurer.reset-size1.size2, .katex .sizing.reset-size1.size2 {
  font-size: 1.2em;
}

.katex .fontsize-ensurer.reset-size1.size3, .katex .sizing.reset-size1.size3 {
  font-size: 1.4em;
}

.katex .fontsize-ensurer.reset-size1.size4, .katex .sizing.reset-size1.size4 {
  font-size: 1.6em;
}

.katex .fontsize-ensurer.reset-size1.size5, .katex .sizing.reset-size1.size5 {
  font-size: 1.8em;
}

.katex .fontsize-ensurer.reset-size1.size6, .katex .sizing.reset-size1.size6 {
  font-size: 2em;
}

.katex .fontsize-ensurer.reset-size1.size7, .katex .sizing.reset-size1.size7 {
  font-size: 2.4em;
}

.katex .fontsize-ensurer.reset-size1.size8, .katex .sizing.reset-size1.size8 {
  font-size: 2.88em;
}

.katex .fontsize-ensurer.reset-size1.size9, .katex .sizing.reset-size1.size9 {
  font-size: 3.456em;
}

.katex .fontsize-ensurer.reset-size1.size10, .katex .sizing.reset-size1.size10 {
  font-size: 4.148em;
}

.katex .fontsize-ensurer.reset-size1.size11, .katex .sizing.reset-size1.size11 {
  font-size: 4.976em;
}

.katex .fontsize-ensurer.reset-size2.size1, .katex .sizing.reset-size2.size1 {
  font-size: 0.83333333em;
}

.katex .fontsize-ensurer.reset-size2.size2, .katex .sizing.reset-size2.size2 {
  font-size: 1em;
}

.katex .fontsize-ensurer.reset-size2.size3, .katex .sizing.reset-size2.size3 {
  font-size: 1.16666667em;
}

.katex .fontsize-ensurer.reset-size2.size4, .katex .sizing.reset-size2.size4 {
  font-size: 1.33333333em;
}

.katex .fontsize-ensurer.reset-size2.size5, .katex .sizing.reset-size2.size5 {
  font-size: 1.5em;
}

.katex .fontsize-ensurer.reset-size2.size6, .katex .sizing.reset-size2.size6 {
  font-size: 1.66666667em;
}

.katex .fontsize-ensurer.reset-size2.size7, .katex .sizing.reset-size2.size7 {
  font-size: 2em;
}

.katex .fontsize-ensurer.reset-size2.size8, .katex .sizing.reset-size2.size8 {
  font-size: 2.4em;
}

.katex .fontsize-ensurer.reset-size2.size9, .katex .sizing.reset-size2.size9 {
  font-size: 2.88em;
}

.katex .fontsize-ensurer.reset-size2.size10, .katex .sizing.reset-size2.size10 {
  font-size: 3.45666667em;
}

.katex .fontsize-ensurer.reset-size2.size11, .katex .sizing.reset-size2.size11 {
  font-size: 4.14666667em;
}

.katex .fontsize-ensurer.reset-size3.size1, .katex .sizing.reset-size3.size1 {
  font-size: 0.71428571em;
}

.katex .fontsize-ensurer.reset-size3.size2, .katex .sizing.reset-size3.size2 {
  font-size: 0.85714286em;
}

.katex .fontsize-ensurer.reset-size3.size3, .katex .sizing.reset-size3.size3 {
  font-size: 1em;
}

.katex .fontsize-ensurer.reset-size3.size4, .katex .sizing.reset-size3.size4 {
  font-size: 1.14285714em;
}

.katex .fontsize-ensurer.reset-size3.size5, .katex .sizing.reset-size3.size5 {
  font-size: 1.28571429em;
}

.katex .fontsize-ensurer.reset-size3.size6, .katex .sizing.reset-size3.size6 {
  font-size: 1.42857143em;
}

.katex .fontsize-ensurer.reset-size3.size7, .katex .sizing.reset-size3.size7 {
  font-size: 1.71428571em;
}

.katex .fontsize-ensurer.reset-size3.size8, .katex .sizing.reset-size3.size8 {
  font-size: 2.05714286em;
}

.katex .fontsize-ensurer.reset-size3.size9, .katex .sizing.reset-size3.size9 {
  font-size: 2.46857143em;
}

.katex .fontsize-ensurer.reset-size3.size10, .katex .sizing.reset-size3.size10 {
  font-size: 2.96285714em;
}

.katex .fontsize-ensurer.reset-size3.size11, .katex .sizing.reset-size3.size11 {
  font-size: 3.55428571em;
}

.katex .fontsize-ensurer.reset-size4.size1, .katex .sizing.reset-size4.size1 {
  font-size: 0.625em;
}

.katex .fontsize-ensurer.reset-size4.size2, .katex .sizing.reset-size4.size2 {
  font-size: 0.75em;
}

.katex .fontsize-ensurer.reset-size4.size3, .katex .sizing.reset-size4.size3 {
  font-size: 0.875em;
}

.katex .fontsize-ensurer.reset-size4.size4, .katex .sizing.reset-size4.size4 {
  font-size: 1em;
}

.katex .fontsize-ensurer.reset-size4.size5, .katex .sizing.reset-size4.size5 {
  font-size: 1.125em;
}

.katex .fontsize-ensurer.reset-size4.size6, .katex .sizing.reset-size4.size6 {
  font-size: 1.25em;
}

.katex .fontsize-ensurer.reset-size4.size7, .katex .sizing.reset-size4.size7 {
  font-size: 1.5em;
}

.katex .fontsize-ensurer.reset-size4.size8, .katex .sizing.reset-size4.size8 {
  font-size: 1.8em;
}

.katex .fontsize-ensurer.reset-size4.size9, .katex .sizing.reset-size4.size9 {
  font-size: 2.16em;
}

.katex .fontsize-ensurer.reset-size4.size10, .katex .sizing.reset-size4.size10 {
  font-size: 2.5925em;
}

.katex .fontsize-ensurer.reset-size4.size11, .katex .sizing.reset-size4.size11 {
  font-size: 3.11em;
}

.katex .fontsize-ensurer.reset-size5.size1, .katex .sizing.reset-size5.size1 {
  font-size: 0.55555556em;
}

.katex .fontsize-ensurer.reset-size5.size2, .katex .sizing.reset-size5.size2 {
  font-size: 0.66666667em;
}

.katex .fontsize-ensurer.reset-size5.size3, .katex .sizing.reset-size5.size3 {
  font-size: 0.77777778em;
}

.katex .fontsize-ensurer.reset-size5.size4, .katex .sizing.reset-size5.size4 {
  font-size: 0.88888889em;
}

.katex .fontsize-ensurer.reset-size5.size5, .katex .sizing.reset-size5.size5 {
  font-size: 1em;
}

.katex .fontsize-ensurer.reset-size5.size6, .katex .sizing.reset-size5.size6 {
  font-size: 1.11111111em;
}

.katex .fontsize-ensurer.reset-size5.size7, .katex .sizing.reset-size5.size7 {
  font-size: 1.33333333em;
}

.katex .fontsize-ensurer.reset-size5.size8, .katex .sizing.reset-size5.size8 {
  font-size: 1.6em;
}

.katex .fontsize-ensurer.reset-size5.size9, .katex .sizing.reset-size5.size9 {
  font-size: 1.92em;
}

.katex .fontsize-ensurer.reset-size5.size10, .katex .sizing.reset-size5.size10 {
  font-size: 2.30444444em;
}

.katex .fontsize-ensurer.reset-size5.size11, .katex .sizing.reset-size5.size11 {
  font-size: 2.76444444em;
}

.katex .fontsize-ensurer.reset-size6.size1, .katex .sizing.reset-size6.size1 {
  font-size: 0.5em;
}

.katex .fontsize-ensurer.reset-size6.size2, .katex .sizing.reset-size6.size2 {
  font-size: 0.6em;
}

.katex .fontsize-ensurer.reset-size6.size3, .katex .sizing.reset-size6.size3 {
  font-size: 0.7em;
}

.katex .fontsize-ensurer.reset-size6.size4, .katex .sizing.reset-size6.size4 {
  font-size: 0.8em;
}

.katex .fontsize-ensurer.reset-size6.size5, .katex .sizing.reset-size6.size5 {
  font-size: 0.9em;
}

.katex .fontsize-ensurer.reset-size6.size6, .katex .sizing.reset-size6.size6 {
  font-size: 1em;
}

.katex .fontsize-ensurer.reset-size6.size7, .katex .sizing.reset-size6.size7 {
  font-size: 1.2em;
}

.katex .fontsize-ensurer.reset-size6.size8, .katex .sizing.reset-size6.size8 {
  font-size: 1.44em;
}

.katex .fontsize-ensurer.reset-size6.size9, .katex .sizing.reset-size6.size9 {
  font-size: 1.728em;
}

.katex .fontsize-ensurer.reset-size6.size10, .katex .sizing.reset-size6.size10 {
  font-size: 2.074em;
}

.katex .fontsize-ensurer.reset-size6.size11, .katex .sizing.reset-size6.size11 {
  font-size: 2.488em;
}

.katex .fontsize-ensurer.reset-size7.size1, .katex .sizing.reset-size7.size1 {
  font-size: 0.41666667em;
}

.katex .fontsize-ensurer.reset-size7.size2, .katex .sizing.reset-size7.size2 {
  font-size: 0.5em;
}

.katex .fontsize-ensurer.reset-size7.size3, .katex .sizing.reset-size7.size3 {
  font-size: 0.58333333em;
}

.katex .fontsize-ensurer.reset-size7.size4, .katex .sizing.reset-size7.size4 {
  font-size: 0.66666667em;
}

.katex .fontsize-ensurer.reset-size7.size5, .katex .sizing.reset-size7.size5 {
  font-size: 0.75em;
}

.katex .fontsize-ensurer.reset-size7.size6, .katex .sizing.reset-size7.size6 {
  font-size: 0.83333333em;
}

.katex .fontsize-ensurer.reset-size7.size7, .katex .sizing.reset-size7.size7 {
  font-size: 1em;
}

.katex .fontsize-ensurer.reset-size7.size8, .katex .sizing.reset-size7.size8 {
  font-size: 1.2em;
}

.katex .fontsize-ensurer.reset-size7.size9, .katex .sizing.reset-size7.size9 {
  font-size: 1.44em;
}

.katex .fontsize-ensurer.reset-size7.size10, .katex .sizing.reset-size7.size10 {
  font-size: 1.72833333em;
}

.katex .fontsize-ensurer.reset-size7.size11, .katex .sizing.reset-size7.size11 {
  font-size: 2.07333333em;
}

.katex .fontsize-ensurer.reset-size8.size1, .katex .sizing.reset-size8.size1 {
  font-size: 0.34722222em;
}

.katex .fontsize-ensurer.reset-size8.size2, .katex .sizing.reset-size8.size2 {
  font-size: 0.41666667em;
}

.katex .fontsize-ensurer.reset-size8.size3, .katex .sizing.reset-size8.size3 {
  font-size: 0.48611111em;
}

.katex .fontsize-ensurer.reset-size8.size4, .katex .sizing.reset-size8.size4 {
  font-size: 0.55555556em;
}

.katex .fontsize-ensurer.reset-size8.size5, .katex .sizing.reset-size8.size5 {
  font-size: 0.625em;
}

.katex .fontsize-ensurer.reset-size8.size6, .katex .sizing.reset-size8.size6 {
  font-size: 0.69444444em;
}

.katex .fontsize-ensurer.reset-size8.size7, .katex .sizing.reset-size8.size7 {
  font-size: 0.83333333em;
}

.katex .fontsize-ensurer.reset-size8.size8, .katex .sizing.reset-size8.size8 {
  font-size: 1em;
}

.katex .fontsize-ensurer.reset-size8.size9, .katex .sizing.reset-size8.size9 {
  font-size: 1.2em;
}

.katex .fontsize-ensurer.reset-size8.size10, .katex .sizing.reset-size8.size10 {
  font-size: 1.44027778em;
}

.katex .fontsize-ensurer.reset-size8.size11, .katex .sizing.reset-size8.size11 {
  font-size: 1.72777778em;
}

.katex .fontsize-ensurer.reset-size9.size1, .katex .sizing.reset-size9.size1 {
  font-size: 0.28935185em;
}

.katex .fontsize-ensurer.reset-size9.size2, .katex .sizing.reset-size9.size2 {
  font-size: 0.34722222em;
}

.katex .fontsize-ensurer.reset-size9.size3, .katex .sizing.reset-size9.size3 {
  font-size: 0.40509259em;
}

.katex .fontsize-ensurer.reset-size9.size4, .katex .sizing.reset-size9.size4 {
  font-size: 0.46296296em;
}

.katex .fontsize-ensurer.reset-size9.size5, .katex .sizing.reset-size9.size5 {
  font-size: 0.52083333em;
}

.katex .fontsize-ensurer.reset-size9.size6, .katex .sizing.reset-size9.size6 {
  font-size: 0.5787037em;
}

.katex .fontsize-ensurer.reset-size9.size7, .katex .sizing.reset-size9.size7 {
  font-size: 0.69444444em;
}

.katex .fontsize-ensurer.reset-size9.size8, .katex .sizing.reset-size9.size8 {
  font-size: 0.83333333em;
}

.katex .fontsize-ensurer.reset-size9.size9, .katex .sizing.reset-size9.size9 {
  font-size: 1em;
}

.katex .fontsize-ensurer.reset-size9.size10, .katex .sizing.reset-size9.size10 {
  font-size: 1.20023148em;
}

.katex .fontsize-ensurer.reset-size9.size11, .katex .sizing.reset-size9.size11 {
  font-size: 1.43981481em;
}

.katex .fontsize-ensurer.reset-size10.size1, .katex .sizing.reset-size10.size1 {
  font-size: 0.24108004em;
}

.katex .fontsize-ensurer.reset-size10.size2, .katex .sizing.reset-size10.size2 {
  font-size: 0.28929605em;
}

.katex .fontsize-ensurer.reset-size10.size3, .katex .sizing.reset-size10.size3 {
  font-size: 0.33751205em;
}

.katex .fontsize-ensurer.reset-size10.size4, .katex .sizing.reset-size10.size4 {
  font-size: 0.38572806em;
}

.katex .fontsize-ensurer.reset-size10.size5, .katex .sizing.reset-size10.size5 {
  font-size: 0.43394407em;
}

.katex .fontsize-ensurer.reset-size10.size6, .katex .sizing.reset-size10.size6 {
  font-size: 0.48216008em;
}

.katex .fontsize-ensurer.reset-size10.size7, .katex .sizing.reset-size10.size7 {
  font-size: 0.57859209em;
}

.katex .fontsize-ensurer.reset-size10.size8, .katex .sizing.reset-size10.size8 {
  font-size: 0.69431051em;
}

.katex .fontsize-ensurer.reset-size10.size9, .katex .sizing.reset-size10.size9 {
  font-size: 0.83317261em;
}

.katex .fontsize-ensurer.reset-size10.size10, .katex .sizing.reset-size10.size10 {
  font-size: 1em;
}

.katex .fontsize-ensurer.reset-size10.size11, .katex .sizing.reset-size10.size11 {
  font-size: 1.19961427em;
}

.katex .fontsize-ensurer.reset-size11.size1, .katex .sizing.reset-size11.size1 {
  font-size: 0.20096463em;
}

.katex .fontsize-ensurer.reset-size11.size2, .katex .sizing.reset-size11.size2 {
  font-size: 0.24115756em;
}

.katex .fontsize-ensurer.reset-size11.size3, .katex .sizing.reset-size11.size3 {
  font-size: 0.28135048em;
}

.katex .fontsize-ensurer.reset-size11.size4, .katex .sizing.reset-size11.size4 {
  font-size: 0.32154341em;
}

.katex .fontsize-ensurer.reset-size11.size5, .katex .sizing.reset-size11.size5 {
  font-size: 0.36173633em;
}

.katex .fontsize-ensurer.reset-size11.size6, .katex .sizing.reset-size11.size6 {
  font-size: 0.40192926em;
}

.katex .fontsize-ensurer.reset-size11.size7, .katex .sizing.reset-size11.size7 {
  font-size: 0.48231511em;
}

.katex .fontsize-ensurer.reset-size11.size8, .katex .sizing.reset-size11.size8 {
  font-size: 0.57877814em;
}

.katex .fontsize-ensurer.reset-size11.size9, .katex .sizing.reset-size11.size9 {
  font-size: 0.69453376em;
}

.katex .fontsize-ensurer.reset-size11.size10, .katex .sizing.reset-size11.size10 {
  font-size: 0.83360129em;
}

.katex .fontsize-ensurer.reset-size11.size11, .katex .sizing.reset-size11.size11 {
  font-size: 1em;
}

.katex .delimsizing.size1 {
  font-family: KaTeX_Size1;
}

.katex .delimsizing.size2 {
  font-family: KaTeX_Size2;
}

.katex .delimsizing.size3 {
  font-family: KaTeX_Size3;
}

.katex .delimsizing.size4 {
  font-family: KaTeX_Size4;
}

.katex .delimsizing.mult .delim-size1 > span {
  font-family: KaTeX_Size1;
}

.katex .delimsizing.mult .delim-size4 > span {
  font-family: KaTeX_Size4;
}

.katex .nulldelimiter {
  display: inline-block;
  width: 0.12em;
}

.katex .delimcenter, .katex .op-symbol {
  position: relative;
}

.katex .op-symbol.small-op {
  font-family: KaTeX_Size1;
}

.katex .op-symbol.large-op {
  font-family: KaTeX_Size2;
}

.katex .accent > .vlist-t, .katex .op-limits > .vlist-t {
  text-align: center;
}

.katex .accent .accent-body {
  position: relative;
}

.katex .accent .accent-body:not(.accent-full) {
  width: 0;
}

.katex .overlay {
  display: block;
}

.katex .mtable .vertical-separator {
  display: inline-block;
  min-width: 1px;
}

.katex .mtable .arraycolsep {
  display: inline-block;
}

.katex .mtable .col-align-c > .vlist-t {
  text-align: center;
}

.katex .mtable .col-align-l > .vlist-t {
  text-align: left;
}

.katex .mtable .col-align-r > .vlist-t {
  text-align: right;
}

.katex .svg-align {
  text-align: left;
}

.katex svg {
  fill: currentColor;
  stroke: currentColor;
  fill-rule: nonzero;
  fill-opacity: 1;
  stroke-width: 1;
  stroke-linecap: butt;
  stroke-linejoin: miter;
  stroke-miterlimit: 4;
  stroke-dasharray: none;
  stroke-dashoffset: 0;
  stroke-opacity: 1;
  display: block;
  height: inherit;
  position: absolute;
  width: 100%;
}

.katex svg path {
  stroke: none;
}

.katex img {
  border-style: none;
  max-height: none;
  max-width: none;
  min-height: 0;
  min-width: 0;
}

.katex .stretchy {
  display: block;
  overflow: hidden;
  position: relative;
  width: 100%;
}

.katex .stretchy:after, .katex .stretchy:before {
  content: "";
}

.katex .hide-tail {
  overflow: hidden;
  position: relative;
  width: 100%;
}

.katex .halfarrow-left {
  left: 0;
  overflow: hidden;
  position: absolute;
  width: 50.2%;
}

.katex .halfarrow-right {
  overflow: hidden;
  position: absolute;
  right: 0;
  width: 50.2%;
}

.katex .brace-left {
  left: 0;
  overflow: hidden;
  position: absolute;
  width: 25.1%;
}

.katex .brace-center {
  left: 25%;
  overflow: hidden;
  position: absolute;
  width: 50%;
}

.katex .brace-right {
  overflow: hidden;
  position: absolute;
  right: 0;
  width: 25.1%;
}

.katex .x-arrow-pad {
  padding: 0 0.5em;
}

.katex .cd-arrow-pad {
  padding: 0 0.55556em 0 0.27778em;
}

.katex .mover, .katex .munder, .katex .x-arrow {
  text-align: center;
}

.katex .boxpad {
  padding: 0 0.3em;
}

.katex .fbox, .katex .fcolorbox {
  border: 0.04em solid;
  box-sizing: border-box;
}

.katex .cancel-pad {
  padding: 0 0.2em;
}

.katex .cancel-lap {
  margin-left: -0.2em;
  margin-right: -0.2em;
}

.katex .sout {
  border-bottom-style: solid;
  border-bottom-width: 0.08em;
}

.katex .angl {
  border-right: 0.049em solid;
  border-top: 0.049em solid;
  box-sizing: border-box;
  margin-right: 0.03889em;
}

.katex .anglpad {
  padding: 0 0.03889em;
}

.katex .eqn-num:before {
  content: "(" counter(katexEqnNo) ")";
  counter-increment: katexEqnNo;
}

.katex .mml-eqn-num:before {
  content: "(" counter(mmlEqnNo) ")";
  counter-increment: mmlEqnNo;
}

.katex .mtr-glue {
  width: 50%;
}

.katex .cd-vert-arrow {
  display: inline-block;
  position: relative;
}

.katex .cd-label-left {
  display: inline-block;
  position: absolute;
  right: calc(50% + 0.3em);
  text-align: left;
}

.katex .cd-label-right {
  display: inline-block;
  left: calc(50% + 0.3em);
  position: absolute;
  text-align: right;
}

.katex-display {
  display: block;
  margin: 1em 0;
  text-align: center;
}

.katex-display > .katex {
  display: block;
  text-align: center;
  white-space: nowrap;
}

.katex-display > .katex > .katex-html {
  display: block;
  position: relative;
}

.katex-display > .katex > .katex-html > .tag {
  position: absolute;
  right: 0;
}

.katex-display.leqno > .katex > .katex-html > .tag {
  left: 0;
  right: auto;
}

.katex-display.fleqn > .katex {
  padding-left: 2em;
  text-align: left;
}

body {
  counter-reset: katexEqnNo mmlEqnNo;
}

[data-node-type=math-inline] {
  font-size: 0.9em;
  display: inline-block;
  vertical-align: middle;
  max-width: 100%;
}

[data-node-type=math-block] {
  font-size: 20px;
  text-align: center;
  max-width: 100%;
  position: relative;
  display: flex;
}
[data-node-type=math-block] > span {
  flex-grow: 1;
}
[data-node-type=math-block] > span:first-child {
  flex-shrink: 2;
}
[data-node-type=math-block] > span:nth-child(2) {
  flex-shrink: 0;
}
[data-node-type=math-block] > span:last-child {
  flex-shrink: 1;
  text-align: right;
}

.math-label {
  text-align: center;
  font-family: Georgia, Cambria, "Times New Roman", Times, "DejaVu Serif", source-han-serif-tc, source-han-serif-korean, source-han-serif-japanese, source-han-serif-sc, serif;
}

.equation-label {
  text-align: center;
  font-family: Georgia, Cambria, "Times New Roman", Times, "DejaVu Serif", source-han-serif-tc, source-han-serif-korean, source-han-serif-japanese, source-han-serif-sc, serif;
}

.editor {
  /*! fileicon.css v0.1.1 | MIT License | github.com/picturepan2/fileicon.css */
  /* fileicon.basic */
  /* fileicons */
  /* fileicon.types */
  /* This clunky table, tableWrapper thing is because */
  /* isReadOnly removes the wrapping div, so margins don't */
  /* collapse as expected in all situations. */
}
.editor:focus {
  outline: none !important;
}
.editor .prosemirror-placeholder {
  opacity: 0.5;
  white-space: nowrap;
  position: relative;
}
.editor .prosemirror-placeholder:after {
  position: absolute;
  top: 0;
  content: attr(data-content);
}
.editor .ProseMirror-selectednode {
  outline: 2px solid #bbbdc0;
}
.editor.read-only .ProseMirror-selectednode {
  outline: 0px solid #bbbdc0;
}
.editor h1 a,
.editor h2 a,
.editor h3 a,
.editor h4 a,
.editor h5 a,
.editor h6 a {
  text-decoration: none;
  color: inherit;
}
.editor .footnote {
  vertical-align: super;
  font-size: 0.85em;
  line-height: 1;
}
.editor span.citation {
  color: #808080;
  font-weight: bold;
}
.editor a.reference.missing {
  color: darkred;
}
.editor table {
  /* Prosemirror requires white-space: pre-wrap, but it's overriden by the quirks.css */
  /* built-in that Firefox provides, breaking the editor. */
  /* See https://github.com/ProseMirror/prosemirror/issues/651#issuecomment-313436150 */
  white-space: pre-wrap !important;
}
.editor sup,
.editor sub {
  position: static;
}
.editor sub {
  vertical-align: sub;
}
.editor sup {
  vertical-align: super;
}
.editor .collab-cursor {
  position: relative;
  font-family: -apple-system, "BlinkMacSystemFont", "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Open Sans", "Helvetica Neue", sans-serif;
  color: white;
  user-select: none;
  vertical-align: top;
}
.editor .collab-cursor .inner-bar {
  position: absolute;
  height: calc(1em + 5px);
  width: 2px;
  background-color: rgb(0, 25, 150);
  bottom: 0px;
  left: 0;
}
.editor .collab-cursor .inner-bar .inner-circle-small {
  position: absolute;
  height: 8px;
  width: 8px;
  border-radius: 8px;
  background-color: rgb(0, 25, 150);
  bottom: calc(100% + 0px);
  left: -3px;
}
.editor .collab-cursor .inner-bar .hover-wrapper {
  transform: scale(0.4);
  opacity: 0;
  transform-origin: bottom left;
  transition: 0.1s 0.3s linear transform, 0s 0.4s linear opacity;
  display: block;
  position: absolute;
  bottom: 100%;
  pointer-events: none;
  z-index: 1;
}
.editor .collab-cursor .inner-bar .hover-wrapper .inner-circle-big {
  position: absolute;
  height: 24px;
  width: 24px;
  border-radius: 24px;
  background-color: rgb(0, 25, 150);
  bottom: 0px;
  left: -11px;
}
.editor .collab-cursor .inner-bar .hover-wrapper .initials:after {
  display: block;
  position: absolute;
  width: 20px;
  height: 20px;
  bottom: 2px;
  left: -9px;
  font-size: 12px;
  font-weight: bold;
  line-height: 20px;
  text-align: center;
  z-index: 4;
  white-space: nowrap;
  user-select: none;
}
.editor .collab-cursor .inner-bar .hover-wrapper .name:after {
  position: absolute;
  display: block;
  padding: 2px 12px;
  border-radius: 2px;
  color: white;
  background-color: #777;
  font-size: 12px;
  line-height: 16px;
  font-weight: 400;
  bottom: 2px;
  left: 6px;
  white-space: nowrap;
  z-index: 3;
  user-select: none;
}
.editor .collab-cursor .inner-bar .hover-wrapper .image:after {
  position: absolute;
  bottom: 2px;
  left: -9px;
  z-index: 5;
  border-radius: 10px;
  width: 20px;
  height: 20px;
  background-size: cover;
  content: "";
  max-width: none;
  margin-top: 0px;
}
.editor .collab-cursor:hover .hover-wrapper {
  opacity: 1;
  transform: scale(1);
  transition: 0.1s linear transform, 0s 0s linear opacity;
}
.editor figure {
  display: block;
  text-align: center;
  margin: 0;
}
.editor figure > * {
  pointer-events: none;
  width: 100%;
}
.editor figure > a > img {
  width: 100%;
}
.editor figure.ProseMirror-selectednode {
  outline: 2px solid #bbbdc0;
}
.editor figure.ProseMirror-selectednode > * {
  pointer-events: auto;
}
.editor figure[data-align=left] {
  float: left;
  margin: 0.5em 1.5em 0.5em 0em;
}
.editor figure[data-align=right] {
  float: right;
  margin: 0.5em 0em 0.5em 1.5em;
}
.editor figure[data-align=center] {
  margin: 0 auto;
}
.editor figure[data-size="1"] {
  width: 1%;
}
.editor figure[data-size="2"] {
  width: 2%;
}
.editor figure[data-size="3"] {
  width: 3%;
}
.editor figure[data-size="4"] {
  width: 4%;
}
.editor figure[data-size="5"] {
  width: 5%;
}
.editor figure[data-size="6"] {
  width: 6%;
}
.editor figure[data-size="7"] {
  width: 7%;
}
.editor figure[data-size="8"] {
  width: 8%;
}
.editor figure[data-size="9"] {
  width: 9%;
}
.editor figure[data-size="10"] {
  width: 10%;
}
.editor figure[data-size="11"] {
  width: 11%;
}
.editor figure[data-size="12"] {
  width: 12%;
}
.editor figure[data-size="13"] {
  width: 13%;
}
.editor figure[data-size="14"] {
  width: 14%;
}
.editor figure[data-size="15"] {
  width: 15%;
}
.editor figure[data-size="16"] {
  width: 16%;
}
.editor figure[data-size="17"] {
  width: 17%;
}
.editor figure[data-size="18"] {
  width: 18%;
}
.editor figure[data-size="19"] {
  width: 19%;
}
.editor figure[data-size="20"] {
  width: 20%;
}
.editor figure[data-size="21"] {
  width: 21%;
}
.editor figure[data-size="22"] {
  width: 22%;
}
.editor figure[data-size="23"] {
  width: 23%;
}
.editor figure[data-size="24"] {
  width: 24%;
}
.editor figure[data-size="25"] {
  width: 25%;
}
.editor figure[data-size="26"] {
  width: 26%;
}
.editor figure[data-size="27"] {
  width: 27%;
}
.editor figure[data-size="28"] {
  width: 28%;
}
.editor figure[data-size="29"] {
  width: 29%;
}
.editor figure[data-size="30"] {
  width: 30%;
}
.editor figure[data-size="31"] {
  width: 31%;
}
.editor figure[data-size="32"] {
  width: 32%;
}
.editor figure[data-size="33"] {
  width: 33%;
}
.editor figure[data-size="34"] {
  width: 34%;
}
.editor figure[data-size="35"] {
  width: 35%;
}
.editor figure[data-size="36"] {
  width: 36%;
}
.editor figure[data-size="37"] {
  width: 37%;
}
.editor figure[data-size="38"] {
  width: 38%;
}
.editor figure[data-size="39"] {
  width: 39%;
}
.editor figure[data-size="40"] {
  width: 40%;
}
.editor figure[data-size="41"] {
  width: 41%;
}
.editor figure[data-size="42"] {
  width: 42%;
}
.editor figure[data-size="43"] {
  width: 43%;
}
.editor figure[data-size="44"] {
  width: 44%;
}
.editor figure[data-size="45"] {
  width: 45%;
}
.editor figure[data-size="46"] {
  width: 46%;
}
.editor figure[data-size="47"] {
  width: 47%;
}
.editor figure[data-size="48"] {
  width: 48%;
}
.editor figure[data-size="49"] {
  width: 49%;
}
.editor figure[data-size="50"] {
  width: 50%;
}
.editor figure[data-size="51"] {
  width: 51%;
}
.editor figure[data-size="52"] {
  width: 52%;
}
.editor figure[data-size="53"] {
  width: 53%;
}
.editor figure[data-size="54"] {
  width: 54%;
}
.editor figure[data-size="55"] {
  width: 55%;
}
.editor figure[data-size="56"] {
  width: 56%;
}
.editor figure[data-size="57"] {
  width: 57%;
}
.editor figure[data-size="58"] {
  width: 58%;
}
.editor figure[data-size="59"] {
  width: 59%;
}
.editor figure[data-size="60"] {
  width: 60%;
}
.editor figure[data-size="61"] {
  width: 61%;
}
.editor figure[data-size="62"] {
  width: 62%;
}
.editor figure[data-size="63"] {
  width: 63%;
}
.editor figure[data-size="64"] {
  width: 64%;
}
.editor figure[data-size="65"] {
  width: 65%;
}
.editor figure[data-size="66"] {
  width: 66%;
}
.editor figure[data-size="67"] {
  width: 67%;
}
.editor figure[data-size="68"] {
  width: 68%;
}
.editor figure[data-size="69"] {
  width: 69%;
}
.editor figure[data-size="70"] {
  width: 70%;
}
.editor figure[data-size="71"] {
  width: 71%;
}
.editor figure[data-size="72"] {
  width: 72%;
}
.editor figure[data-size="73"] {
  width: 73%;
}
.editor figure[data-size="74"] {
  width: 74%;
}
.editor figure[data-size="75"] {
  width: 75%;
}
.editor figure[data-size="76"] {
  width: 76%;
}
.editor figure[data-size="77"] {
  width: 77%;
}
.editor figure[data-size="78"] {
  width: 78%;
}
.editor figure[data-size="79"] {
  width: 79%;
}
.editor figure[data-size="80"] {
  width: 80%;
}
.editor figure[data-size="81"] {
  width: 81%;
}
.editor figure[data-size="82"] {
  width: 82%;
}
.editor figure[data-size="83"] {
  width: 83%;
}
.editor figure[data-size="84"] {
  width: 84%;
}
.editor figure[data-size="85"] {
  width: 85%;
}
.editor figure[data-size="86"] {
  width: 86%;
}
.editor figure[data-size="87"] {
  width: 87%;
}
.editor figure[data-size="88"] {
  width: 88%;
}
.editor figure[data-size="89"] {
  width: 89%;
}
.editor figure[data-size="90"] {
  width: 90%;
}
.editor figure[data-size="91"] {
  width: 91%;
}
.editor figure[data-size="92"] {
  width: 92%;
}
.editor figure[data-size="93"] {
  width: 93%;
}
.editor figure[data-size="94"] {
  width: 94%;
}
.editor figure[data-size="95"] {
  width: 95%;
}
.editor figure[data-size="96"] {
  width: 96%;
}
.editor figure[data-size="97"] {
  width: 97%;
}
.editor figure[data-size="98"] {
  width: 98%;
}
.editor figure[data-size="99"] {
  width: 99%;
}
.editor figure[data-size="100"] {
  width: 100%;
}
.editor figure[data-align=full] {
  width: 100%;
}
.editor figure figcaption {
  opacity: 0.75;
  margin: 1em auto;
  margin-top: 5px;
}
.editor.ProseMirror.read-only figure > * {
  pointer-events: auto;
}
.editor.ProseMirror.read-only figure.ProseMirror-selectednode {
  outline: none;
}
.editor .file-icon {
  font-family: Arial, Tahoma, sans-serif;
  font-weight: 300;
  display: inline-block;
  width: 24px;
  height: 32px;
  background: #018fef;
  flex-shrink: 0;
  position: relative;
  border-radius: 2px;
  text-align: left;
  -webkit-font-smoothing: antialiased;
}
.editor .file-icon::before {
  display: block;
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  width: 0;
  height: 0;
  border-bottom-left-radius: 2px;
  border-width: 5px;
  border-style: solid;
  border-color: #fff #fff rgba(255, 255, 255, 0.35) rgba(255, 255, 255, 0.35);
}
.editor .file-icon::after {
  display: block;
  content: attr(data-type);
  position: absolute;
  bottom: 0;
  left: 0;
  font-size: 10px;
  color: #fff;
  text-transform: lowercase;
  width: 100%;
  padding: 2px;
  white-space: nowrap;
  overflow: hidden;
}
.editor .file-icon-xs {
  width: 12px;
  height: 16px;
  border-radius: 2px;
}
.editor .file-icon-xs::before {
  border-bottom-left-radius: 1px;
  border-width: 3px;
}
.editor .file-icon-xs::after {
  content: "";
  border-bottom: 2px solid rgba(255, 255, 255, 0.45);
  width: auto;
  left: 2px;
  right: 2px;
  bottom: 3px;
}
.editor .file-icon-sm {
  width: 18px;
  height: 24px;
  border-radius: 2px;
}
.editor .file-icon-sm::before {
  border-bottom-left-radius: 2px;
  border-width: 4px;
}
.editor .file-icon-sm::after {
  font-size: 7px;
  padding: 2px;
}
.editor .file-icon-lg {
  width: 48px;
  height: 64px;
  border-radius: 3px;
}
.editor .file-icon-lg::before {
  border-bottom-left-radius: 2px;
  border-width: 8px;
}
.editor .file-icon-lg::after {
  font-size: 16px;
  padding: 4px 6px;
}
.editor .file-icon-xl {
  width: 96px;
  height: 128px;
  border-radius: 4px;
}
.editor .file-icon-xl::before {
  border-bottom-left-radius: 4px;
  border-width: 16px;
}
.editor .file-icon-xl::after {
  font-size: 24px;
  padding: 4px 10px;
}
.editor .file-icon[data-type=zip],
.editor .file-icon[data-type=rar] {
  background: #acacac;
}
.editor .file-icon[data-type^=doc] {
  background: #307cf1;
}
.editor .file-icon[data-type^=xls] {
  background: #0f9d58;
}
.editor .file-icon[data-type^=ppt] {
  background: #d24726;
}
.editor .file-icon[data-type=pdf] {
  background: #e13d34;
}
.editor .file-icon[data-type=txt] {
  background: #5eb533;
}
.editor .file-icon[data-type=mp3],
.editor .file-icon[data-type=wma],
.editor .file-icon[data-type=m4a],
.editor .file-icon[data-type=flac] {
  background: #8e44ad;
}
.editor .file-icon[data-type=mp4],
.editor .file-icon[data-type=wmv],
.editor .file-icon[data-type=mov],
.editor .file-icon[data-type=avi],
.editor .file-icon[data-type=mkv] {
  background: #7a3ce7;
}
.editor .file-icon[data-type=bmp],
.editor .file-icon[data-type=jpg],
.editor .file-icon[data-type=jpeg],
.editor .file-icon[data-type=gif],
.editor .file-icon[data-type=png] {
  background: #f48c00;
}
.editor [data-node-type=file] {
  width: 65%;
}
.editor [data-node-type=file] .details {
  display: flex;
  align-items: center;
  text-align: left;
}
.editor [data-node-type=file] .details .extension {
  text-transform: uppercase;
  font-family: "Courier", monospace;
  font-weight: 600;
  font-size: 1.5em;
}
.editor [data-node-type=file] .details .file-name {
  flex-grow: 1;
  flex-shrink: 1;
  margin: 0em 1em;
  word-wrap: break-word;
}
.editor [data-node-type=file] .details .file-name a {
  color: inherit;
}
.editor [data-node-type=file] .details .file-name a:hover {
  cursor: pointer;
  text-decoration: underline !important;
}
.editor [data-node-type=file] .details .file-size {
  margin: 0em 1em;
}
.editor .tableWrapper {
  margin: 1em 0;
}
.editor .tableWrapper table {
  margin: 0em;
}
.editor th {
  font-weight: bold;
  text-align: left;
  background-color: #f0f0f4;
}
.editor th,
.editor td,
.editor table caption {
  min-width: 1em;
  border: 1px solid #ddd;
  padding: 3px 5px;
  /* Two :last-of-type as a selector specificity hack */
  /* :last-child does not work here because the table plugin inserts nodes when resizing */
}
.editor th > p:last-of-type:last-of-type,
.editor td > p:last-of-type:last-of-type,
.editor table caption > p:last-of-type:last-of-type {
  margin-bottom: 0;
}
.editor table {
  margin: 1em 0;
  max-width: 100%;
}
.editor table caption {
  text-align: left;
  border-bottom: none;
  padding: 3px 5px;
}
.editor > [data-text-align=center] {
  text-align: center;
}
.editor > [data-text-align=right] {
  text-align: right;
}
.editor td > [data-text-align=center],
.editor th > [data-text-align=center] {
  text-align: center;
}
.editor td > [data-text-align=right],
.editor th > [data-text-align=right] {
  text-align: right;
}
.editor > blockquote > [data-text-align=center] {
  text-align: center;
}
.editor > blockquote > [data-text-align=right] {
  text-align: right;
}
.editor [data-rtl=true] {
  direction: rtl;
}

/* Import some global variables and styles, including fonts */
.pub-body-component .editor.ProseMirror h1#abstract:first-child,
.pub-body-styles h1#abstract:first-child {
  color: var(--community-accent-dark);
  text-transform: uppercase;
  font-size: 1em;
  font-weight: 500;
  padding-top: 1em;
}
.pub-body-component .editor.ProseMirror h1#abstract:first-child + p,
.pub-body-styles h1#abstract:first-child + p {
  border-bottom: 1px solid #ccc;
  padding-bottom: 1em;
}
.pub-body-component .editor.ProseMirror h1,
.pub-body-component .editor.ProseMirror h2,
.pub-body-component .editor.ProseMirror h3,
.pub-body-component .editor.ProseMirror h4,
.pub-body-component .editor.ProseMirror h5,
.pub-body-component .editor.ProseMirror h6,
.pub-body-styles h1,
.pub-body-styles h2,
.pub-body-styles h3,
.pub-body-styles h4,
.pub-body-styles h5,
.pub-body-styles h6 {
  margin-bottom: 0.5em;
  line-height: 1em;
  font-weight: 500;
  font-family: multi-display, -apple-system, "BlinkMacSystemFont", "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Open Sans", "Helvetica Neue", sans-serif, source-han-sans-cjk-tc, source-han-sans-cjk-ko, source-han-sans-cjk-ja, source-han-sans-cjk-sc;
  letter-spacing: 1px;
}
.pub-body-component .editor.ProseMirror h1 a,
.pub-body-component .editor.ProseMirror h2 a,
.pub-body-component .editor.ProseMirror h3 a,
.pub-body-component .editor.ProseMirror h4 a,
.pub-body-component .editor.ProseMirror h5 a,
.pub-body-component .editor.ProseMirror h6 a,
.pub-body-styles h1 a,
.pub-body-styles h2 a,
.pub-body-styles h3 a,
.pub-body-styles h4 a,
.pub-body-styles h5 a,
.pub-body-styles h6 a {
  text-decoration: underline;
}
.pub-body-component .editor.ProseMirror h1,
.pub-body-styles h1 {
  font-size: 1.4em;
  font-weight: 600;
  line-height: 1.3em;
  letter-spacing: 0px;
}
.pub-body-component .editor.ProseMirror h2,
.pub-body-styles h2 {
  font-size: 1.3em;
  line-height: 1.3em;
  font-weight: 500;
  letter-spacing: 0px;
}
.pub-body-component .editor.ProseMirror h3,
.pub-body-styles h3 {
  font-size: 1.2em;
  line-height: 1.3em;
  font-weight: 400;
  letter-spacing: 0.5px;
}
.pub-body-component .editor.ProseMirror h4,
.pub-body-styles h4 {
  font-size: 1em;
  line-height: 1.3em;
  font-weight: 500;
  letter-spacing: 0.5px;
}
.pub-body-component .editor.ProseMirror h5,
.pub-body-styles h5 {
  font-size: 1em;
  line-height: 1.3em;
  font-weight: 400;
  letter-spacing: 0.5px;
}
.pub-body-component .editor.ProseMirror h6,
.pub-body-styles h6 {
  font-size: 1em;
  line-height: 1.3em;
  font-weight: 300;
  letter-spacing: 0.5px;
}
.pub-body-component .editor.ProseMirror * + h1,
.pub-body-component .editor.ProseMirror * + h2,
.pub-body-component .editor.ProseMirror * + h3,
.pub-body-component .editor.ProseMirror * + h4,
.pub-body-component .editor.ProseMirror * + h5,
.pub-body-component .editor.ProseMirror * + h6,
.pub-body-styles * + h1,
.pub-body-styles * + h2,
.pub-body-styles * + h3,
.pub-body-styles * + h4,
.pub-body-styles * + h5,
.pub-body-styles * + h6 {
  margin-top: 1.4em;
}
.pub-body-component .editor.ProseMirror p,
.pub-body-component .editor.ProseMirror li,
.pub-body-styles p,
.pub-body-styles li {
  font-family: Georgia, Cambria, "Times New Roman", Times, "DejaVu Serif", source-han-serif-tc, source-han-serif-korean, source-han-serif-japanese, source-han-serif-sc, serif;
  letter-spacing: 0.01rem;
  font-weight: 400;
  font-style: normal;
  line-height: 1.7;
  letter-spacing: -0.003em;
  word-break: break-word;
}
.pub-body-component .editor.ProseMirror li,
.pub-body-styles li {
  margin: 0;
}
.pub-body-component .editor.ProseMirror li > p,
.pub-body-styles li > p {
  margin: 0;
}
.pub-body-component .editor.ProseMirror p,
.pub-body-styles p {
  margin: 0em 0em 1em;
}
.pub-body-component .editor.ProseMirror ul > li::marker,
.pub-body-styles ul > li::marker {
  font-size: 0.8em;
}
.pub-body-component .editor.ProseMirror ul,
.pub-body-component .editor.ProseMirror ol,
.pub-body-styles ul,
.pub-body-styles ol {
  padding-left: 1em;
  margin: 0em 0em 1em;
}
.pub-body-component .editor.ProseMirror ul ul,
.pub-body-component .editor.ProseMirror ul ol,
.pub-body-component .editor.ProseMirror ol ul,
.pub-body-component .editor.ProseMirror ol ol,
.pub-body-styles ul ul,
.pub-body-styles ul ol,
.pub-body-styles ol ul,
.pub-body-styles ol ol {
  margin-bottom: 0em;
}
.pub-body-component .editor.ProseMirror td ol,
.pub-body-styles td ol {
  padding-left: 0;
  list-style-position: inside;
}
.pub-body-component .editor.ProseMirror td ol li p,
.pub-body-styles td ol li p {
  word-break: break-word;
}
.pub-body-component .editor.ProseMirror td ol li p:first-child,
.pub-body-styles td ol li p:first-child {
  display: inline;
}
.pub-body-component .editor.ProseMirror hr,
.pub-body-styles hr {
  margin: 1em 0em;
}
.pub-body-component .editor.ProseMirror pre,
.pub-body-styles pre {
  background: rgba(0, 0, 0, 0.05);
  padding: 20px;
  box-shadow: none;
  white-space: pre;
  overflow: hidden;
  overflow-x: auto;
}
.pub-body-component .editor.ProseMirror pre code,
.pub-body-styles pre code {
  white-space: pre;
  background-color: transparent;
  padding: 0em;
}
.pub-body-component .editor.ProseMirror code,
.pub-body-styles code {
  background-color: rgba(27, 31, 35, 0.06);
  border-radius: 2px;
  font-size: 0.8em;
  margin: 0;
  padding: 0.2em 0.4em;
}
.pub-body-component .editor.ProseMirror blockquote,
.pub-body-styles blockquote {
  line-height: inherit;
  font-size: 1em;
  margin: 0 0 1em;
  border-left: solid 4px rgba(181, 181, 181, 0.5);
  padding: 0 1em;
}
.pub-body-component .editor.ProseMirror .file,
.pub-body-styles .file {
  font-size: 0.75em;
}
.pub-body-component .editor.ProseMirror figcaption,
.pub-body-styles figcaption {
  font-size: 15px;
}
.pub-body-component .editor.ProseMirror figcaption p,
.pub-body-styles figcaption p {
  margin-bottom: 0em;
  line-height: 1.2em;
  font-family: -apple-system, "BlinkMacSystemFont", "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Open Sans", "Helvetica Neue", sans-serif;
}
.pub-body-component .editor.ProseMirror iframe,
.pub-body-styles iframe {
  border: 0px solid transparent;
}
.pub-body-component .editor.ProseMirror *:first-child:not(.discussion-thread),
.pub-body-styles *:first-child:not(.discussion-thread) {
  margin-top: 0em;
}

.pub-body-component {
  position: relative;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -moz-font-feature-settings: "liga" on;
  font-feature-settings: "liga" on;
  font-size: 14px;
  min-height: 300px;
  margin-top: 25px;
}
.pub-body-component .editor.ProseMirror {
  min-height: 150px;
}
.pub-body-component .bp3-callout.working-draft {
  display: flex;
  align-items: center;
}
.pub-body-component .bp3-callout.working-draft span {
  flex-grow: 1;
  flex-shrink: 1;
}
.pub-body-component .permanent {
  background-color: #ffc940;
}

.pub-body-alert .error-time {
  font-weight: bold;
}

body {
  font-family: -apple-system, "BlinkMacSystemFont", "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Open Sans", "Helvetica Neue", sans-serif;
}

/* Paged-specific overrides */
.csl-bib-body,
.csl-entry {
  display: inline;
}

.pub-body-component .editor.ProseMirror .pub-notes ol > li {
  list-style-position: inside;
  margin: inherit;
}
.pub-body-component .editor.ProseMirror .pub-notes ol > li:target {
  background: cornsilk;
}
.pub-body-component .editor.ProseMirror .pub-notes ol > li p:last-child {
  display: inline;
}
.pub-body-component .editor.ProseMirror .pub-notes ol > li p:last-child:before {
  display: inline;
  content: " ";
}
.pub-body-component .editor.ProseMirror .pub-notes ol > li .return-link {
  font-size: 0.75em;
}
.pub-body-component .editor.ProseMirror figure > * {
  pointer-events: auto;
}

section.cover {
  font-family: multi-display, -apple-system, "BlinkMacSystemFont", "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Open Sans", "Helvetica Neue", sans-serif, source-han-sans-cjk-tc, source-han-sans-cjk-ko, source-han-sans-cjk-ja, source-han-sans-cjk-sc;
}
section.cover .title {
  margin-top: 0;
  font-size: 3em;
}
section.cover .byline h3 {
  margin: 0;
}
section.cover .byline h3 span.name {
  white-space: nowrap;
  display: inline-block;
  margin-right: 0.2em;
}
section.cover .byline h5 {
  margin: 0;
  margin-top: 0.5em;
}
section.cover .byline h5 span.affiliation {
  white-space: break-word;
  display: inline-block;
  margin-right: 0.2em;
}
section.cover .details > *:not(:last-child) {
  margin-bottom: 7px;
}
section.cover .title,
section.cover .byline,
section.cover .details {
  margin-bottom: 30px !important;
}

@media screen {
  body > * {
    max-width: 700px;
    margin: 0 auto;
  }
  body > *.pub-body-component {
    font-size: 20px !important;
  }
}
@media print {
  /* Baseline page styles */
  @page {
    size: Letter;
    @top-left {
      color: #666;
      font-size: 10px;
      font-family: multi-display, -apple-system, "BlinkMacSystemFont", "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Open Sans", "Helvetica Neue", sans-serif, source-han-sans-cjk-tc, source-han-sans-cjk-ko, source-han-sans-cjk-ja, source-han-sans-cjk-sc;
      content: string(top-heading-items);
    }
    @top-right {
      color: #666;
      font-size: 10px;
      font-family: multi-display, -apple-system, "BlinkMacSystemFont", "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Open Sans", "Helvetica Neue", sans-serif, source-han-sans-cjk-tc, source-han-sans-cjk-ko, source-han-sans-cjk-ja, source-han-sans-cjk-sc;
      content: string(title);
    }
    @bottom-center {
      color: #666;
      font-size: 10px;
      font-family: multi-display, -apple-system, "BlinkMacSystemFont", "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Open Sans", "Helvetica Neue", sans-serif, source-han-sans-cjk-tc, source-han-sans-cjk-ko, source-han-sans-cjk-ja, source-han-sans-cjk-sc;
      content: counter(page);
    }
  }
  /* Avoid being the last element on the page */
  h1,
h2,
h3,
h4,
h5,
h6 {
    break-after: avoid;
  }
  tr,
th {
    break-inside: avoid;
    max-height: 90vh;
    overflow-y: hidden;
  }
  .editor figure {
    break-inside: avoid;
    display: flex;
    flex-direction: column;
    max-height: 800px;
  }
  .editor figure img,
.editor figure video {
    break-inside: avoid;
    width: 100%;
    min-height: 0;
    max-height: 100%;
    flex-shrink: 1;
    object-fit: contain;
  }
  figcaption {
    font-size: 10px;
    color: #555;
    flex-shrink: 0;
  }
  table {
    font-size: 12px;
    border-collapse: collapse;
    table-layout: fixed;
    width: 100%;
    overflow: hidden;
  }
  table caption {
    text-align: left;
  }
  table,
tr,
th,
td {
    border: 1px #ccc solid;
    padding: 5px;
  }
  th {
    font-weight: bold;
    text-align: left;
    background-color: #f0f0f4;
  }
  td,
a {
    word-break: break-word;
  }
  a.footnote {
    vertical-align: super;
    font-size: 10px;
  }
  [data-node-type=math-block] {
    font-size: unset;
    break-inside: avoid;
  }
  section.cover {
    page: cover;
  }
  @page cover {
    @top-left {
      content: "";
    }
    @top-right {
      content: "";
    }
    @bottom-center {
      content: "";
    }
  }
  .top-heading-items {
    string-set: top-heading-items content();
  }
  .title {
    string-set: title content();
  }
}</style><script>
(function(d) {
  var config = {
	kitId: 'seb8nix',
	scriptTimeout: 3000,
	async: true
  },
  h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/wf-loading/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
})(document);
</script></head><body><section class="cover"><h3 class="top-heading-items">Originally Submitted to International Conference on New Interfaces for Musical Expression  NIME 2022</h3><h1 class="title" style="color:#2D2E2F">Transformer Architecture for Generating Short Drum Loops Given a Performed Monotonic Groove</h1><div class="details"><div><strong>URL: </strong><a href="https://nime.pubpub.org/pub/fvl5su34">https://nime.pubpub.org/pub/fvl5su34</a></div><div><strong>License:</strong><a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License (CC-BY 4.0)</a></div></div></section><div class="pub-body-component"><div class="editor Prosemirror"><h1 id="abstract">Abstract</h1><p id="nya9s72o8zu">In the last few years, variations of transformer neural networks have proved quite effective in many symbolic music generation tasks. This paper investigates and demonstrates the effectiveness of  transformer architectures paired with direct representation of musical events (i.e. representation without tokenization) for generating drum performance loops given a performed monotonic groove (containing velocity and timing dynamics). We demonstrate that early investigations into this topic provide promising results. Moreover, we provide a detailed explanation of the training process involved, while also discussing a number of shortcomings to be addressed in the future iterations of this work. Lastly, we provide a discussion on the possibilities and the limitations of the proposed model for real-time use cases. </p><h2 id="author-keywords">Author Keywords</h2><p id="n2o37o6kxfz">Transformer Neural Networks, Music Generation, Drum Generation, Groove, Rhythm</p><h2 id="ccs-concepts">CCS Concepts</h2><p id="nd7hkdqri6j"><strong>Applied computing  Sound and music computing;</strong> Performing arts; <strong>Computing Methodologies</strong>  <em>Machine Learning</em>; <strong>Computing Methodologies</strong>  <em>Artificial Intelligence</em>;</p><h1 id="introduction">Introduction  </h1><p id="n75wvl2pv83">There has been a significant surge in employing deep learning for music generation tasks. These models commonly require to be trained on a large corpus of data so as to generalize musical characteristics of the available samples in the dataset. In other words, the aim of these models is to (1) learn the outlying patterns in the data, and (2) use the learned patterns to generate new content. While not creative on their own, these models can be used in many creative contexts. For instance, to name a few, they can be used to assist non-specialized composers and producers, be used to generate or speed up the generation of creative ideas or be used to complete partial ideas. </p><p id="nvs93z6hvf5">Since 2017 <a href="#citation-qLZoDdBbWb-bottom" id="citation-qLZoDdBbWb-inline" data-node-type="citation" data-value="@inproceedings{vaswani2017attention,
  title={Attention is all you need},
  author={Vaswani, Ashish and Shazeer, Noam and Parmar, Niki and Uszkoreit, Jakob and Jones, Llion and Gomez, Aidan N and Kaiser, {\L}ukasz and Polosukhin, Illia},
  booktitle={Advances in neural information processing systems},
  pages={5998--6008},
  year={2017}
}" data-unstructured-value="" data-custom-label="" class="citation">[1]</a>, variations of transformer architectures have shown to be very promising in modeling and generating sequential data. The success of these models has been most prominent in the Natural Language Processing (NLP) domain <a href="#citation-n/QdEvcmJY-bottom" id="citation-n/QdEvcmJY-inline" data-node-type="citation" data-value="@article{devlin2018bert,
  title={Bert: Pre-training of deep bidirectional transformers for language understanding},
  author={Devlin, Jacob and Chang, Ming-Wei and Lee, Kenton and Toutanova, Kristina},
  journal={arXiv preprint arXiv:1810.04805},
  year={2018}
}" data-unstructured-value="" data-custom-label="" class="citation">[2]</a><a href="#citation-0tWEuZccYj-bottom" id="citation-0tWEuZccYj-inline" data-node-type="citation" data-value="@article{radford2019language,
  title={Language models are unsupervised multitask learners},
  author={Radford, Alec and Wu, Jeffrey and Child, Rewon and Luan, David and Amodei, Dario and Sutskever, Ilya and others},
  journal={OpenAI blog},
  volume={1},
  number={8},
  pages={9},
  year={2019}
}" data-unstructured-value="" data-custom-label="" class="citation">[3]</a><a href="#citation-4GsXDOkdqV-bottom" id="citation-4GsXDOkdqV-inline" data-node-type="citation" data-value="@article{brown2020language,
  title={Language models are few-shot learners},
  author={Brown, Tom B and Mann, Benjamin and Ryder, Nick and Subbiah, Melanie and Kaplan, Jared and Dhariwal, Prafulla and Neelakantan, Arvind and Shyam, Pranav and Sastry, Girish and Askell, Amanda and others},
  journal={arXiv preprint arXiv:2005.14165},
  year={2020}
}" data-unstructured-value="" data-custom-label="" class="citation">[4]</a>, and their application in music generation has been strongly inspired and adapted from language generation tasks.</p><p id="n184eihthyt">In language generation, the learning process leads to an embedding space that is organized in a semantically meaningful manner. In most NLP tasks, these models are however extremely costly to train, and their success depends on timely training on massive datasets containing a large set of vocabularies (tokens). These tokens are then associated with high dimensional embedding vectors, the contents of which are learned during the training process. Music generation tasks, which typically adopt these NLP architectures, do also require a temporal sequence of tokenized events where each token represents a discreet musical event <a href="#citation-lQHnw1IhQx-bottom" id="citation-lQHnw1IhQx-inline" data-node-type="citation" data-value="@article{huang2018music,
  title={Music transformer},
  author={Huang, Cheng-Zhi Anna and Vaswani, Ashish and Uszkoreit, Jakob and Shazeer, Noam and Simon, Ian and Hawthorne, Curtis and Dai, Andrew M and Hoffman, Matthew D and Dinculescu, Monica and Eck, Douglas},
  journal={arXiv preprint arXiv:1809.04281},
  year={2018}
}" data-unstructured-value="" data-custom-label="" class="citation">[5]</a><a href="#citation-2WV7LUqKci-bottom" id="citation-2WV7LUqKci-inline" data-node-type="citation" data-value="@article{payne2019musenet,
  title={MuseNet},
  author={Payne, Christine},
  journal={OpenAI Blog},
  volume={3},
  year={2019}
}" data-unstructured-value="" data-custom-label="" class="citation">[6]</a><a href="#citation-bV9UuLrN/H-bottom" id="citation-bV9UuLrN/H-inline" data-node-type="citation" data-value="@article{donahue2019lakhnes,
  title={LakhNES: Improving multi-instrumental music generation with cross-domain pre-training},
  author={Donahue, Chris and Mao, Huanru Henry and Li, Yiting Ethan and Cottrell, Garrison W and McAuley, Julian},
  journal={arXiv preprint arXiv:1907.04868},
  year={2019}
}" data-unstructured-value="" data-custom-label="" class="citation">[7]</a><a href="#citation-ehRRkO1lwP-bottom" id="citation-ehRRkO1lwP-inline" data-node-type="citation" data-value="@inproceedings{choi2020encoding,
  title={Encoding musical style with transformer autoencoders},
  author={Choi, Kristy and Hawthorne, Curtis and Simon, Ian and Dinculescu, Monica and Engel, Jesse},
  booktitle={International Conference on Machine Learning},
  pages={1899--1908},
  year={2020},
  organization={PMLR}
}" data-unstructured-value="" data-custom-label="" class="citation">[8]</a><a href="#citation-Iq5u6VfNaW-bottom" id="citation-Iq5u6VfNaW-inline" data-node-type="citation" data-value="@inproceedings{huang2020pop,
  title={Pop Music Transformer: Beat-based modeling and generation of expressive Pop piano compositions},
  author={Huang, Yu-Siang and Yang, Yi-Hsuan},
  booktitle={Proceedings of the 28th ACM International Conference on Multimedia},
  pages={1180--1188},
  year={2020}
}" data-unstructured-value="" data-custom-label="" class="citation">[9]</a><a href="#citation-m0Ed9yGsw2-bottom" id="citation-m0Ed9yGsw2-inline" data-node-type="citation" data-value="@article{hsiao2021compound,
  title={Compound Word Transformer: Learning to Compose Full-Song Music over Dynamic Directed Hypergraphs},
  author={Hsiao, Wen-Yi and Liu, Jen-Yu and Yeh, Yin-Cheng and Yang, Yi-Hsuan},
  journal={arXiv preprint arXiv:2101.02402},
  year={2021}
}" data-unstructured-value="" data-custom-label="" class="citation">[10]</a><a href="#citation-4JApWPgObn-bottom" id="citation-4JApWPgObn-inline" data-node-type="citation" data-value="@inproceedings{jiang2020transformer,
  title={Transformer vae: A hierarchical model for structure-aware and interpretable music representation learning},
  author={Jiang, Junyan and Xia, Gus G and Carlton, Dave B and Anderson, Chris N and Miyakawa, Ryan H},
  booktitle={ICASSP 2020-2020 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP)},
  pages={516--520},
  year={2020},
  organization={IEEE}
}" data-unstructured-value="" data-custom-label="" class="citation">[11]</a>. However, unlike NLP tasks, which typically deal with tens of thousands of vocabularies (e.g. 50,257 tokens in GPT-2 <a href="#citation-0tWEuZccYj-bottom" id="citation-0tWEuZccYj-inline" data-node-type="citation" data-value="@article{radford2019language,
  title={Language models are unsupervised multitask learners},
  author={Radford, Alec and Wu, Jeffrey and Child, Rewon and Luan, David and Amodei, Dario and Sutskever, Ilya and others},
  journal={OpenAI blog},
  volume={1},
  number={8},
  pages={9},
  year={2019}
}" data-unstructured-value="" data-custom-label="" class="citation">[3]</a>), symbolic music generation tasks deal with much smaller vocabularies (typically hundreds of tokens  <a href="#citation-m0Ed9yGsw2-bottom" id="citation-m0Ed9yGsw2-inline" data-node-type="citation" data-value="@article{hsiao2021compound,
  title={Compound Word Transformer: Learning to Compose Full-Song Music over Dynamic Directed Hypergraphs},
  author={Hsiao, Wen-Yi and Liu, Jen-Yu and Yeh, Yin-Cheng and Yang, Yi-Hsuan},
  journal={arXiv preprint arXiv:2101.02402},
  year={2021}
}" data-unstructured-value="" data-custom-label="" class="citation">[10]</a>). Moreover, whereas in language, words generally serve limited semantic functions, the semantic function of musical events is highly dependent on the context in which these events are used. We hence speculated that perhaps tokenization of events is not strictly necessary and can be avoided for certain music generation tasks. </p><p id="ntlui0kevnh">Many works conducted on using transformers for symbolic music generation, so far, focus on creating stylistically consistent <a href="#citation-bV9UuLrN/H-bottom" id="citation-bV9UuLrN/H-inline" data-node-type="citation" data-value="@article{donahue2019lakhnes,
  title={LakhNES: Improving multi-instrumental music generation with cross-domain pre-training},
  author={Donahue, Chris and Mao, Huanru Henry and Li, Yiting Ethan and Cottrell, Garrison W and McAuley, Julian},
  journal={arXiv preprint arXiv:1907.04868},
  year={2019}
}" data-unstructured-value="" data-custom-label="" class="citation">[7]</a><a href="#citation-ehRRkO1lwP-bottom" id="citation-ehRRkO1lwP-inline" data-node-type="citation" data-value="@inproceedings{choi2020encoding,
  title={Encoding musical style with transformer autoencoders},
  author={Choi, Kristy and Hawthorne, Curtis and Simon, Ian and Dinculescu, Monica and Engel, Jesse},
  booktitle={International Conference on Machine Learning},
  pages={1899--1908},
  year={2020},
  organization={PMLR}
}" data-unstructured-value="" data-custom-label="" class="citation">[8]</a><a href="#citation-m0Ed9yGsw2-bottom" id="citation-m0Ed9yGsw2-inline" data-node-type="citation" data-value="@article{hsiao2021compound,
  title={Compound Word Transformer: Learning to Compose Full-Song Music over Dynamic Directed Hypergraphs},
  author={Hsiao, Wen-Yi and Liu, Jen-Yu and Yeh, Yin-Cheng and Yang, Yi-Hsuan},
  journal={arXiv preprint arXiv:2101.02402},
  year={2021}
}" data-unstructured-value="" data-custom-label="" class="citation">[10]</a> and/or real (or rather expert)  <a href="#citation-lQHnw1IhQx-bottom" id="citation-lQHnw1IhQx-inline" data-node-type="citation" data-value="@article{huang2018music,
  title={Music transformer},
  author={Huang, Cheng-Zhi Anna and Vaswani, Ashish and Uszkoreit, Jakob and Shazeer, Noam and Simon, Ian and Hawthorne, Curtis and Dai, Andrew M and Hoffman, Matthew D and Dinculescu, Monica and Eck, Douglas},
  journal={arXiv preprint arXiv:1809.04281},
  year={2018}
}" data-unstructured-value="" data-custom-label="" class="citation">[5]</a><a href="#citation-2WV7LUqKci-bottom" id="citation-2WV7LUqKci-inline" data-node-type="citation" data-value="@article{payne2019musenet,
  title={MuseNet},
  author={Payne, Christine},
  journal={OpenAI Blog},
  volume={3},
  year={2019}
}" data-unstructured-value="" data-custom-label="" class="citation">[6]</a><a href="#citation-Iq5u6VfNaW-bottom" id="citation-Iq5u6VfNaW-inline" data-node-type="citation" data-value="@inproceedings{huang2020pop,
  title={Pop Music Transformer: Beat-based modeling and generation of expressive Pop piano compositions},
  author={Huang, Yu-Siang and Yang, Yi-Hsuan},
  booktitle={Proceedings of the 28th ACM International Conference on Multimedia},
  pages={1180--1188},
  year={2020}
}" data-unstructured-value="" data-custom-label="" class="citation">[9]</a> sounding content. As of today, most of these works still focus on offline, non-real-time content generation, which clearly limits the scope of their use. Although a number of works have indeed addressed drum generation in real-time, they use other generative techniques and there is still a lack of literature on real-time drum generation using transformers. To name a few, in <a href="#citation-YH6T5TLTUw-bottom" id="citation-YH6T5TLTUw-inline" data-node-type="citation" data-value="@article{gomez2020drum,
  title={Drum rhythm spaces: From polyphonic similarity to generative maps},
  author={G{\&#x27;o}mez-Mar{\&#x27;\i}n, Daniel and Jord{\`a}, Sergi and Herrera, Perfecto},
  journal={Journal of New Music Research},
  volume={49},
  number={5},
  pages={438--456},
  year={2020},
  publisher={Taylor \&amp; Francis}
}" data-unstructured-value="" data-custom-label="" class="citation">[12]</a>, Gmez-Marn et. al. present a system that generates drum patterns by navigating a similarity space constructed by incorporating multiple rhythm similarity measures.  Similarly, in <a href="#citation-2nh/QZbdnD-bottom" id="citation-2nh/QZbdnD-inline" data-node-type="citation" data-value="@inproceedings{vogl2019automatic,
  title={An automatic drum machine with touch UI based on a generative neural network},
  author={Vogl, Richard and Eghbal-Zadeh, Hamid and Knees, Peter},
  booktitle={Proceedings of the 24th International Conference on Intelligent User Interfaces: Companion},
  pages={91--92},
  year={2019}
}" data-unstructured-value="" data-custom-label="" class="citation">[13]</a>, Vogl et. al. demonstrate a generative drum machine with a GAN-based generation engine, the generations of which are user-controllable by a number of parameters such as genre, complexity, and loudness. Finally, McCormack et. al. presented a TCN-based <a href="#citation-2RWoO7KUmJ-bottom" id="citation-2RWoO7KUmJ-inline" data-node-type="citation" data-value="@inproceedings{lea2017temporal,
  title={Temporal convolutional networks for action segmentation and detection},
  author={Lea, Colin and Flynn, Michael D and Vidal, Rene and Reiter, Austin and Hager, Gregory D},
  booktitle={proceedings of the IEEE Conference on Computer Vision and Pattern Recognition},
  pages={156--165},
  year={2017}
}" data-unstructured-value="" data-custom-label="" class="citation">[14]</a> AI drummer that, in real-time, responds to a human instrumentalist improvisation <a href="#citation-h3eMEAMTE/-bottom" id="citation-h3eMEAMTE/-inline" data-node-type="citation" data-value="@inproceedings{mccormack2019silent,
  title={In a silent way: Communication between ai and improvising musicians beyond sound},
  author={McCormack, Jon and Gifford, Toby and Hutchings, Patrick and Llano Rodriguez, Maria Teresa and Yee-King, Matthew and d&#x27;Inverno, Mark},
  booktitle={Proceedings of the 2019 CHI Conference on Human Factors in Computing Systems},
  pages={1--11},
  year={2019}
}" data-unstructured-value="" data-custom-label="" class="citation">[15]</a>.  </p><p id="nvtg7k4nd9t">Given our interests in drum generation and inspired by the success of transformers in many symbolic music generation tasks, we have started on a new line of research focused on drum generation using transformers. Our ultimate goal is to develop a set of transformer-based drum generation systems that are deployable in real-time settings. The current work presented here is an initial attempt at this topic. More specifically, in this work, we investigate (1) the effectiveness of transformer models in generating short drum loops given a performed monotonic groove (i.e. a single voice groove that contains velocity and timing information, see <a id="njd0ts0jx3i" href="#n7dfvia8odk" class="reference" data-node-type="reference" data-target-id="n7dfvia8odk">Image 1</a>), and (2) whether discretization of events (i.e. tokenization) can be replaced by a more direct method of representing the drum events. </p><figure id="n7dfvia8odk" data-node-type="image" data-size="50" data-align="full" data-url="https://assets.pubpub.org/8c11ntl2/41643182927152.png" data-caption="&lt;p id=&quot;n0gctoofkta&quot;&gt;Monotonic groove performance (left piano roll) to full drum beat (right piano roll) conversion&lt;/p&gt;" data-alt-text=""><img srcSet="https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6IjhjMTFudGwyLzQxNjQzMTgyOTI3MTUyLnBuZyIsImVkaXRzIjp7InJlc2l6ZSI6eyJ3aWR0aCI6ODAwLCJmaXQiOiJpbnNpZGUiLCJ3aXRob3V0RW5sYXJnZW1lbnQiOnRydWV9fX0= 1x,https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6IjhjMTFudGwyLzQxNjQzMTgyOTI3MTUyLnBuZyIsImVkaXRzIjp7InJlc2l6ZSI6eyJ3aWR0aCI6MTYwMCwiZml0IjoiaW5zaWRlIiwid2l0aG91dEVubGFyZ2VtZW50Ijp0cnVlfX19 2x,https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6IjhjMTFudGwyLzQxNjQzMTgyOTI3MTUyLnBuZyIsImVkaXRzIjp7InJlc2l6ZSI6eyJ3aWR0aCI6MjQwMCwiZml0IjoiaW5zaWRlIiwid2l0aG91dEVubGFyZ2VtZW50Ijp0cnVlfX19 3x" src="https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6IjhjMTFudGwyLzQxNjQzMTgyOTI3MTUyLnBuZyIsImVkaXRzIjp7InJlc2l6ZSI6eyJ3aWR0aCI6ODAwLCJmaXQiOiJpbnNpZGUiLCJ3aXRob3V0RW5sYXJnZW1lbnQiOnRydWV9fX0=" alt="" aria-labelledby="n7dfvia8odk-figure-caption"/><figcaption id="n7dfvia8odk-figure-caption"><div><strong spellcheck="false">Image 1</strong><div><p id="n0gctoofkta">Monotonic groove performance (left piano roll) to full drum beat (right piano roll) conversion</p></div></div></figcaption></figure><h1 id="related-works">Related Works</h1><p id="neaqiw8593k">In this section, we briefly discuss some of the most important related works studied for this work.</p><h2 id="drum-generation-using-transformers">Drum Generation using Transformers</h2><p id="nwcppxuekkk">In 2019, Huang et. al. introduced the Music Transformer <a href="#citation-lQHnw1IhQx-bottom" id="citation-lQHnw1IhQx-inline" data-node-type="citation" data-value="@article{huang2018music,
  title={Music transformer},
  author={Huang, Cheng-Zhi Anna and Vaswani, Ashish and Uszkoreit, Jakob and Shazeer, Noam and Simon, Ian and Hawthorne, Curtis and Dai, Andrew M and Hoffman, Matthew D and Dinculescu, Monica and Eck, Douglas},
  journal={arXiv preprint arXiv:1809.04281},
  year={2018}
}" data-unstructured-value="" data-custom-label="" class="citation">[5]</a>, a transformer model similar to the vanilla transformer <a href="#citation-qLZoDdBbWb-bottom" id="citation-qLZoDdBbWb-inline" data-node-type="citation" data-value="@inproceedings{vaswani2017attention,
  title={Attention is all you need},
  author={Vaswani, Ashish and Shazeer, Noam and Parmar, Niki and Uszkoreit, Jakob and Jones, Llion and Gomez, Aidan N and Kaiser, {\L}ukasz and Polosukhin, Illia},
  booktitle={Advances in neural information processing systems},
  pages={5998--6008},
  year={2017}
}" data-unstructured-value="" data-custom-label="" class="citation">[1]</a>, however, with a modified attention mechanism, capable of generating long-term structured piano performances. Following this work, Choi et. al. presented a more controllable variation of the Music Transformer in which the piano generations can be controlled via a given performance specifying the style of the desired generations <a href="#citation-ehRRkO1lwP-bottom" id="citation-ehRRkO1lwP-inline" data-node-type="citation" data-value="@inproceedings{choi2020encoding,
  title={Encoding musical style with transformer autoencoders},
  author={Choi, Kristy and Hawthorne, Curtis and Simon, Ian and Dinculescu, Monica and Engel, Jesse},
  booktitle={International Conference on Machine Learning},
  pages={1899--1908},
  year={2020},
  organization={PMLR}
}" data-unstructured-value="" data-custom-label="" class="citation">[8]</a>. In these models, the input/output sequences are represented as a sequence of chronological events (such as note-on/off, discretized time shifts, and velocity levels). A number of more recent works on single instrument score/performance generation (<a href="#citation-Iq5u6VfNaW-bottom" id="citation-Iq5u6VfNaW-inline" data-node-type="citation" data-value="@inproceedings{huang2020pop,
  title={Pop Music Transformer: Beat-based modeling and generation of expressive Pop piano compositions},
  author={Huang, Yu-Siang and Yang, Yi-Hsuan},
  booktitle={Proceedings of the 28th ACM International Conference on Multimedia},
  pages={1180--1188},
  year={2020}
}" data-unstructured-value="" data-custom-label="" class="citation">[9]</a><a href="#citation-73iHrUlarI-bottom" id="citation-73iHrUlarI-inline" data-node-type="citation" data-value="@article{chen2020automatic,
  title={Automatic composition of guitar tabs by transformers and groove modeling},
  author={Chen, Yu-Hua and Huang, Yu-Hsiang and Hsiao, Wen-Yi and Yang, Yi-Hsuan},
  journal={arXiv preprint arXiv:2008.01431},
  year={2020}
}" data-unstructured-value="" data-custom-label="" class="citation">[16]</a><a href="#citation-Ntp8vFXDi2-bottom" id="citation-Ntp8vFXDi2-inline" data-node-type="citation" data-value="@article{wu2020jazz,
  title={The jazz transformer on the front line: Exploring the shortcomings of ai-composed music through quantitative measures},
  author={Wu, Shih-Lun and Yang, Yi-Hsuan},
  journal={arXiv preprint arXiv:2008.01307},
  year={2020}
}" data-unstructured-value="" data-custom-label="" class="citation">[17]</a><a href="#citation-NWrRe8BNn4-bottom" id="citation-NWrRe8BNn4-inline" data-node-type="citation" data-value="@article{wu2020transformer,
  title={Transformer-XL Based Music Generation with Multiple Sequences of Time-valued Notes},
  author={Wu, Xianchao and Wang, Chengyuan and Lei, Qinying},
  journal={arXiv preprint arXiv:2007.07244},
  year={2020}
}" data-unstructured-value="" data-custom-label="" class="citation">[18]</a><a href="#citation-m0Ed9yGsw2-bottom" id="citation-m0Ed9yGsw2-inline" data-node-type="citation" data-value="@article{hsiao2021compound,
  title={Compound Word Transformer: Learning to Compose Full-Song Music over Dynamic Directed Hypergraphs},
  author={Hsiao, Wen-Yi and Liu, Jen-Yu and Yeh, Yin-Cheng and Yang, Yi-Hsuan},
  journal={arXiv preprint arXiv:2101.02402},
  year={2021}
}" data-unstructured-value="" data-custom-label="" class="citation">[10]</a>) have also experimented with alternative methods of tokenizing events as well as other transformer variations such as BERT <a href="#citation-HBgbtECiSg-bottom" id="citation-HBgbtECiSg-inline" data-node-type="citation" data-value="@article{devlin2018bert,
  title={Bert: Pre-training of deep bidirectional transformers for language understanding},
  author={Devlin, Jacob and Chang, Ming-Wei and Lee, Kenton and Toutanova, Kristina},
  journal={arXiv preprint arXiv:1810.04805},
  year={2018}
}
" data-unstructured-value="" data-custom-label="" class="citation">[19]</a>,  GPT-2 <a href="#citation-0tWEuZccYj-bottom" id="citation-0tWEuZccYj-inline" data-node-type="citation" data-value="@article{radford2019language,
  title={Language models are unsupervised multitask learners},
  author={Radford, Alec and Wu, Jeffrey and Child, Rewon and Luan, David and Amodei, Dario and Sutskever, Ilya and others},
  journal={OpenAI blog},
  volume={1},
  number={8},
  pages={9},
  year={2019}
}" data-unstructured-value="" data-custom-label="" class="citation">[3]</a> and Transformer-XL <a href="#citation-Qx+yGuomFZ-bottom" id="citation-Qx+yGuomFZ-inline" data-node-type="citation" data-value="@article{dai2019transformer,
  title={Transformer-xl: Attentive language models beyond a fixed-length context},
  author={Dai, Zihang and Yang, Zhilin and Yang, Yiming and Carbonell, Jaime and Le, Quoc V and Salakhutdinov, Ruslan},
  journal={arXiv preprint arXiv:1901.02860},
  year={2019}
}" data-unstructured-value="" data-custom-label="" class="citation">[20]</a>.</p><p id="nzfwbn1akv2">Another series of works have been focused on multi-instrument score/performance generations. While these models are not designed explicitly for drum generation, they are capable of generating drum/percussion scores accompanying other instruments. The earliest of these works is MuseNet <a href="#citation-ZPo7iX+Cgy-bottom" id="citation-ZPo7iX+Cgy-inline" data-node-type="citation" data-value="" data-unstructured-value="&lt;p id=&quot;nlw1sqd07iy&quot;&gt;Payne, Christine. &quot;MuseNet.&quot; OpenAI, 25 Apr. 2019, openai.com/blog/musenet&lt;/p&gt;" data-custom-label="" class="citation">[21]</a>, in which a GPT-2 <a href="#citation-0tWEuZccYj-bottom" id="citation-0tWEuZccYj-inline" data-node-type="citation" data-value="@article{radford2019language,
  title={Language models are unsupervised multitask learners},
  author={Radford, Alec and Wu, Jeffrey and Child, Rewon and Luan, David and Amodei, Dario and Sutskever, Ilya and others},
  journal={OpenAI blog},
  volume={1},
  number={8},
  pages={9},
  year={2019}
}" data-unstructured-value="" data-custom-label="" class="citation">[3]</a> transformer has been trained on multi-track scores from various artists and styles. Following this work, Donahue et. al. presented the LakhNES model in <a href="#citation-bV9UuLrN/H-bottom" id="citation-bV9UuLrN/H-inline" data-node-type="citation" data-value="@article{donahue2019lakhnes,
  title={LakhNES: Improving multi-instrumental music generation with cross-domain pre-training},
  author={Donahue, Chris and Mao, Huanru Henry and Li, Yiting Ethan and Cottrell, Garrison W and McAuley, Julian},
  journal={arXiv preprint arXiv:1907.04868},
  year={2019}
}" data-unstructured-value="" data-custom-label="" class="citation">[7]</a>. LakhNES is a Transformer-XL model pre-trained on the <a href="https://colinraffel.com/projects/lmd/">Lakh MIDI Dataset</a><a href="#fn-0-bottom" id="fn-0-inline" data-node-type="footnote" data-value="&lt;p id=&quot;nj1pd0dq85p&quot;&gt;https://colinraffel.com/projects/lmd/&lt;/p&gt;" date-structured-value="" class="footnote">1</a> <a href="#citation-ptDFlFnSTF-bottom" id="citation-ptDFlFnSTF-inline" data-node-type="citation" data-value="" data-unstructured-value="&lt;p id=&quot;nfk4pkv4xoy&quot;&gt;Colin Raffel. &quot;Learning-Based Methods for Comparing Sequences, with Applications to Audio-to-MIDI Alignment and Matching&quot;. PhD Thesis, 2016.&lt;/p&gt;" data-custom-label="" class="citation">[22]</a> and then trained on the NES-MDB dataset <a href="#citation-aBgoLm/UU7-bottom" id="citation-aBgoLm/UU7-inline" data-node-type="citation" data-value="@inproceedings{donahue2018nesmdb,
  title={The NES Music Database: A multi-instrumental dataset with expressive performance attributes},
  author={Donahue, Chris and Mao, Huanru Henry and McAuley, Julian},
  booktitle={ISMIR},
  year={2018}
}" data-unstructured-value="" data-custom-label="" class="citation">[23]</a>. In this work, the authors show that by using the proposed pre-training regime, the model is capable of generating a multi-instrument score from scratch or in a guided context. Finally, in <a href="#citation-BqTTWMd/J6-bottom" id="citation-BqTTWMd/J6-inline" data-node-type="citation" data-value="@article{ens2020mmm,
  title={Mmm: Exploring conditional multi-track music generation with the transformer},
  author={Ens, Jeff and Pasquier, Philippe},
  journal={arXiv preprint arXiv:2008.06048},
  year={2020}
}" data-unstructured-value="" data-custom-label="" class="citation">[24]</a>, Ens and Pasquier explore the effect of various sequence representations on controllability of multi-track generations using their proposed model: Multi-track Music Machine (MMM), an architecture based on GPT-2 <a href="#citation-0tWEuZccYj-bottom" id="citation-0tWEuZccYj-inline" data-node-type="citation" data-value="@article{radford2019language,
  title={Language models are unsupervised multitask learners},
  author={Radford, Alec and Wu, Jeffrey and Child, Rewon and Luan, David and Amodei, Dario and Sutskever, Ilya and others},
  journal={OpenAI blog},
  volume={1},
  number={8},
  pages={9},
  year={2019}
}" data-unstructured-value="" data-custom-label="" class="citation">[3]</a>.</p><p id="nrz61n5aih6">Finally, to the best of our knowledge, <a href="#citation-LeqNzKQwe0-bottom" id="citation-LeqNzKQwe0-inline" data-node-type="citation" data-value="@article{nuttall2021transformer,
  title={Transformer Neural Networks for Automated Rhythm Generation},
  author={Nuttall, Thomas and Haki, Behzad and Jorda, Sergi},
  year={2021},
  publisher={PubPub}
}
" data-unstructured-value="" data-custom-label="" class="citation">[25]</a> is the only work so far focused explicitly on generating drum patterns using Transformers. In this work, Nuttall et. al. propose that a Transformer-XL architecture using a small vocabulary of tokens (composed of 36 pitch-velocity pair tokens and 5 time-difference tokens) is capable of generating long consistent drum performances either from scratch or given a priming pattern. </p><h2 id="groove-to-drum-performance">Groove to Drum Performance</h2><p id="ndrao7m1rza">In <a href="#citation-PuL1Fh1bUl-bottom" id="citation-PuL1Fh1bUl-inline" data-node-type="citation" data-value="@inproceedings{gillick2019learning,
  title={Learning to groove with inverse sequence transformations},
  author={Gillick, Jon and Roberts, Adam and Engel, Jesse and Eck, Douglas and Bamman, David},
  booktitle={International Conference on Machine Learning},
  pages={2269--2279},
  year={2019},
  organization={PMLR}
}" data-unstructured-value="" data-custom-label="" class="citation">[26]</a>, Gillick et. al propose the GrooVAE Tap2Drum model, a sequence to sequence variational auto-encoder network that converts a tapped sequence into a multi-voice human-like performance on a drum kit <a href="#citation-PuL1Fh1bUl-bottom" id="citation-PuL1Fh1bUl-inline" data-node-type="citation" data-value="@inproceedings{gillick2019learning,
  title={Learning to groove with inverse sequence transformations},
  author={Gillick, Jon and Roberts, Adam and Engel, Jesse and Eck, Douglas and Bamman, David},
  booktitle={International Conference on Machine Learning},
  pages={2269--2279},
  year={2019},
  organization={PMLR}
}" data-unstructured-value="" data-custom-label="" class="citation">[26]</a>. This system not only generates a score but also generates velocity levels and unquantized timing of events. In this system, however, the input sequence is a tapped pattern that does not contain any velocity levels. Lacking tapped patterns associated with the performances available in the training set<a href="#fn-1-bottom" id="fn-1-inline" data-node-type="footnote" data-value="&lt;p id=&quot;n1w5nro6zl5&quot;&gt;The authors of GrooVAE collected and released hours of drum performances (Groove MIDI Dataset) from improvisations in different styles.&lt;/p&gt;" date-structured-value="" class="footnote">2</a>, the authors propose a method to extract  pseudo-tapped sequences by squeezing all drum events into a single voice while ignoring velocity levels. Consequently, the proposed model is trained on the pair of tapped and performance sequences. Many of the methodologies used in our work have been inspired by the GrooVAE model.</p><h1 id="methodology">Methodology</h1><p id="nipk44iuf53">In this section, we provide a detailed explanation of the methodology used for carrying out the objectives of this work. </p><h2 id="dataset">Dataset</h2><p id="nsjjvy5teyo">The model is trained using Magentas Groove MIDI Dataset (GMD)<a href="#citation-PuL1Fh1bUl-bottom" id="citation-PuL1Fh1bUl-inline" data-node-type="citation" data-value="@inproceedings{gillick2019learning,
  title={Learning to groove with inverse sequence transformations},
  author={Gillick, Jon and Roberts, Adam and Engel, Jesse and Eck, Douglas and Bamman, David},
  booktitle={International Conference on Machine Learning},
  pages={2269--2279},
  year={2019},
  organization={PMLR}
}" data-unstructured-value="" data-custom-label="" class="citation">[26]</a>, a dataset containing roughly 13.6 hours of drum performances in the format of beats and fills, classified by genre and mostly in 4/4 time signature. Our experiments were focused on 2-bar beat loops performed in a 4/4 time signature resulting in the distribution shown in <a id="noi3sm2328i" href="#n76aepxaiwq" class="reference" data-node-type="reference" data-target-id="n76aepxaiwq">Image 2</a>.</p><figure id="n76aepxaiwq" data-node-type="image" data-size="76" data-align="center" data-url="https://assets.pubpub.org/f67l9ngf/21642506281264.png" data-caption="&lt;p id=&quot;n3ezg119r1q&quot;&gt;Genre distribution of the GMD dataset selected for this work (beats in 4/4)&lt;/p&gt;" data-alt-text=""><img srcSet="" src="https://assets.pubpub.org/f67l9ngf/21642506281264.png" alt="" aria-labelledby="n76aepxaiwq-figure-caption"/><figcaption id="n76aepxaiwq-figure-caption"><div><strong spellcheck="false">Image 2</strong><div><p id="n3ezg119r1q">Genre distribution of the GMD dataset selected for this work (beats in 4/4)</p></div></div></figcaption></figure><p id="n0cuh2pu568">For this work, the experiments are conducted using the same partitions as provided in GMD (see <a id="noclq2aepfk" href="#n8l1hvydakp" class="reference" data-node-type="reference" data-target-id="n8l1hvydakp">Table 1</a>).</p><p id="ne9ofxfirxg"><strong>Number of 2-Beat Loops in 4/4 within the Selected Subset of GMD Dataset</strong></p><table id="n8l1hvydakp"><caption>Table 1</caption><tbody><tr><th><p id="nr6fm46cndg">Split</p></th><th><p id="nkhwc5nh9o2">2-measure beats in 4/4</p></th></tr><tr><td><p id="n1b1pe8v7fc">Train  (80%)</p></td><td><p id="n94or352s9h">16195</p></td></tr><tr><td><p id="n5r2b158263">Test (10%)</p></td><td><p id="no46x9iidgl">2054</p></td></tr><tr><td><p id="nrdi7hp86df">Validation (10%)</p></td><td><p id="n1ecbrb141i">2021</p></td></tr><tr><td><p id="ngwayzion07">Total</p></td><td><p id="n1a22gwg5b5">20270</p></td></tr></tbody></table><p id="nxmckmmea6i">The drum performances are recorded in MIDI format on a Roland TD-11 electronic drum kit containing 22 dierent MIDI pitches (Table 3.2). This is a large vocabulary and with strong imbalances in terms of instrument hit occurrence, which is common among drum datasets <a href="#citation-BAnhZEb5uM-bottom" id="citation-BAnhZEb5uM-inline" data-node-type="citation" data-value="@inproceedings{cartwright2018increasing,
  title={Increasing drum transcription vocabulary using data synthesis},
  author={Cartwright, Mark and Bello, Juan Pablo},
  booktitle={Proc. International Conference on Digital Audio Effects (DAFx)},
  pages={72--79},
  year={2018}
}" data-unstructured-value="" data-custom-label="" class="citation">[27]</a>, since some instruments, due to their role in the drum kit, are played more often than others (e.g., snares vs. crash). The authors of the dataset propose to reduce the performances to a 9-voice vocabulary using the mapping shown in <a id="nkojfm5voau" href="#nrswaqw1vtm" class="reference" data-node-type="reference" data-target-id="nrswaqw1vtm">Table 2</a> <a href="#citation-PuL1Fh1bUl-bottom" id="citation-PuL1Fh1bUl-inline" data-node-type="citation" data-value="@inproceedings{gillick2019learning,
  title={Learning to groove with inverse sequence transformations},
  author={Gillick, Jon and Roberts, Adam and Engel, Jesse and Eck, Douglas and Bamman, David},
  booktitle={International Conference on Machine Learning},
  pages={2269--2279},
  year={2019},
  organization={PMLR}
}" data-unstructured-value="" data-custom-label="" class="citation">[26]</a>. For this work, we used the same mapping as below for reducing the number of voices. </p><p id="n7gryp6gg5s"><strong>Voice Mapping and Corresponding Percentage of Hits for Each Instrument. (Mapping and data extracted from </strong><a href="#citation-PuL1Fh1bUl-bottom" id="citation-PuL1Fh1bUl-inline" data-node-type="citation" data-value="@inproceedings{gillick2019learning,
  title={Learning to groove with inverse sequence transformations},
  author={Gillick, Jon and Roberts, Adam and Engel, Jesse and Eck, Douglas and Bamman, David},
  booktitle={International Conference on Machine Learning},
  pages={2269--2279},
  year={2019},
  organization={PMLR}
}" data-unstructured-value="" data-custom-label="" class="citation">[26]</a>)</p><table id="nrswaqw1vtm"><caption>Table 2</caption><tbody><tr><th data-colwidth="121"><p id="n89hv2rai0o" data-text-align="center">Midi Pitch</p></th><th data-colwidth="235"><p id="nthikn6d3kp" data-text-align="center">Roland TD-11 Vocabulary</p></th><th data-colwidth="228"><p id="n7coigw9kbv" data-text-align="center">Mapped 9-Voice Vocabulary |(MIDI Pitch)</p></th><th data-colwidth="109"><p id="nnj9bdlgvs3" data-text-align="center">Hit %</p></th></tr><tr><td data-colwidth="121"><p id="nnd6bez87in" data-text-align="center">36</p></td><td data-colwidth="235"><p id="nvym3m3bd0j" data-text-align="center">Kick</p></td><td data-colwidth="228"><p id="nk5wnzf695g" data-text-align="center">Kick (36)</p></td><td data-colwidth="109"><p id="n2hgxekm7jl" data-text-align="center">19.6 %</p></td></tr><tr><td data-colwidth="121"><p id="n3x06hyj9d2" data-text-align="center">38, 40, 37</p></td><td data-colwidth="235"><p id="nvff2qp6wex" data-text-align="center">Snare Head, Rim, X-Stick</p></td><td data-colwidth="228"><p id="n9za1734ssx" data-text-align="center">Snare (38)</p></td><td data-colwidth="109"><p id="n29zo7tnik2" data-text-align="center">30 %</p></td></tr><tr><td data-colwidth="121"><p id="n9mo543bm9j" data-text-align="center">45, 43, 58</p></td><td data-colwidth="235"><p id="ndeeup73g5i" data-text-align="center">Tom 2, Tom 3 Head &amp; Rim</p></td><td data-colwidth="228"><p id="nvxit9tpalf" data-text-align="center">Low Tom (45)</p></td><td data-colwidth="109"><p id="n0dvkhr7k1s" data-text-align="center">3.6 %</p></td></tr><tr><td data-colwidth="121"><p id="nbk1piflqmb" data-text-align="center">48, 47</p></td><td data-colwidth="235"><p id="npteu4sbili" data-text-align="center">Tom 1, Tom 2 Rim</p></td><td data-colwidth="228"><p id="nrry5tjn45b" data-text-align="center">Mid Tom (48)</p></td><td data-colwidth="109"><p id="ndl9cplsouo" data-text-align="center">3.2 %</p></td></tr><tr><td data-colwidth="121"><p id="nzxwjv5m2no" data-text-align="center">50</p></td><td data-colwidth="235"><p id="n6d3yqzyvkv" data-text-align="center">Tom 1 Rim</p></td><td data-colwidth="228"><p id="nl4tb68p6bg" data-text-align="center">High Tom (50)</p></td><td data-colwidth="109"><p id="ni6d1r1zfbu" data-text-align="center">0.3 %</p></td></tr><tr><td data-colwidth="121"><p id="ny1hujclmh8" data-text-align="center">46, 26</p></td><td data-colwidth="235"><p id="nsnzwikowxi" data-text-align="center">OH (Bow, Edge)</p></td><td data-colwidth="228"><p id="nmmayzc9hcn" data-text-align="center">Open Hi-Hat (46)</p></td><td data-colwidth="109"><p id="njq2ay813kg" data-text-align="center">3.2 %</p></td></tr><tr><td data-colwidth="121"><p id="n3m3k8bipjc" data-text-align="center">42, 22, 44</p></td><td data-colwidth="235"><p id="n93e7d6evp3" data-text-align="center">CH (Bow, Edge,  Pedal)</p></td><td data-colwidth="228"><p id="nemztwja0yx" data-text-align="center">Closed Hi-Hat (42)</p></td><td data-colwidth="109"><p id="niv7rbfvon5" data-text-align="center">26.5 %</p></td></tr><tr><td data-colwidth="121"><p id="n69g4hjf9no" data-text-align="center">49, 55, 57, 52</p></td><td data-colwidth="235"><p id="nhzg22krmky" data-text-align="center">Crash 1 and 2 (Bow, Edge)</p></td><td data-colwidth="228"><p id="nhmbxspjoyz" data-text-align="center">Crash (49)</p></td><td data-colwidth="109"><p id="n1c30e6mejc" data-text-align="center">2.0 %</p></td></tr><tr><td data-colwidth="121"><p id="n473tn94g85" data-text-align="center">51, 59, 53</p></td><td data-colwidth="235"><p id="n6h4ztoflly" data-text-align="center">Ride (Bow, Edge, Bell)</p></td><td data-colwidth="228"><p id="nsm4cb521oy" data-text-align="center">Ride (51)</p></td><td data-colwidth="109"><p id="n1p9r1s13o2" data-text-align="center">11.5 %</p></td></tr><tr><th colSpan="3" data-colwidth="121,235,228"><p id="nwu25f9xwyl" data-text-align="center">Total Number of Hits</p></th><th data-colwidth="109"><p id="nbla6dq7syh" data-text-align="center"><strong>448783</strong></p></th></tr></tbody></table><h2 id="data-representation">Data Representation</h2><p id="nd285o0uiz0">When dealing with transformer architectures, commonly the input/output space of possibilities is quantized, and then tokenized so as to learn a meaningful representation space in which each of the input/output tokens is embedded. However, for this work, we purposefully decided to replace the tokenized representation of events with that of a direct representation. To this end, we used the same representation as proposed by Gillick et. al. <a href="#citation-PuL1Fh1bUl-bottom" id="citation-PuL1Fh1bUl-inline" data-node-type="citation" data-value="@inproceedings{gillick2019learning,
  title={Learning to groove with inverse sequence transformations},
  author={Gillick, Jon and Roberts, Adam and Engel, Jesse and Eck, Douglas and Bamman, David},
  booktitle={International Conference on Machine Learning},
  pages={2269--2279},
  year={2019},
  organization={PMLR}
}" data-unstructured-value="" data-custom-label="" class="citation">[26]</a>. In this representation (from now on, called HVO, denoting hits, velocities, and offsets), the input and output sequences are directly represented by three stacked T  M matrices, where T corresponds to the number of time-steps, in this case, 32 (2 bars with 16 sub-divisions each), and M corresponds to the number of instruments, in this case, 9. The three matrices are dened as follows:</p><ul id="nk5kfjy2hjo"><li><p id="nqt8hl9hxj2"><strong>Hits</strong>: Binary-valued matrix that indicates the presence (1) or absence (0) of a drum hit. </p></li><li><p id="netlytdrli4"><strong>Velocity</strong>: Continuous-valued matrix of velocity levels in the range [0, 1] </p></li><li><p id="nrll3931oh2"><strong>Osets</strong>: Continuous-valued matrix of oset deviations from the nearest 16th note grid line, in the range [0.5, 0.5] where 0.5 implies mid-way between a grid line and the following/preceding gridline</p></li></ul><p id="n9u6np1qhne">This results in an HVO matrix of dimension 32  27. An example of an HVO representation (with 4 voices and 4 timesteps) is shown in <a id="nr6zqd612tf" href="#nraqniwzatq" class="reference" data-node-type="reference" data-target-id="nraqniwzatq">Image 3</a>.</p><figure id="nraqniwzatq" data-node-type="image" data-size="100" data-align="center" data-url="https://assets.pubpub.org/0suupfy3/31643617978705.jpeg" data-caption="&lt;p id=&quot;nr9qgz5fpce&quot;&gt;An example of HVO derivation from the piano rolls&lt;/p&gt;" data-alt-text=""><img srcSet="" src="https://assets.pubpub.org/0suupfy3/31643617978705.jpeg" alt="" aria-labelledby="nraqniwzatq-figure-caption"/><figcaption id="nraqniwzatq-figure-caption"><div><strong spellcheck="false">Image 3</strong><div><p id="nr9qgz5fpce">An example of HVO derivation from the piano rolls</p></div></div></figcaption></figure><p id="n2cuwae08j1">For the input to our system, we extract a monotonic groove from the GMD performances by squeezing all events at any given time step to a single voice. This approach is similar to GrooVAE with the exception that, in our work, the velocity information is not disregarded (see <a id="nyqo89vrq2t" href="#nq7jzsh70ip" class="reference" data-node-type="reference" data-target-id="nq7jzsh70ip">Image 4</a>).</p><figure id="nq7jzsh70ip" data-node-type="image" data-size="62" data-align="center" data-url="https://assets.pubpub.org/m97i3l0u/51643203463628.png" data-caption="&lt;p id=&quot;n3t5swjtdty&quot;&gt;Extracting a monotonic groove sequence from a drum performance&lt;/p&gt;" data-alt-text=""><img srcSet="https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6Im05N2kzbDB1LzUxNjQzMjAzNDYzNjI4LnBuZyIsImVkaXRzIjp7InJlc2l6ZSI6eyJ3aWR0aCI6ODAwLCJmaXQiOiJpbnNpZGUiLCJ3aXRob3V0RW5sYXJnZW1lbnQiOnRydWV9fX0= 1x,https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6Im05N2kzbDB1LzUxNjQzMjAzNDYzNjI4LnBuZyIsImVkaXRzIjp7InJlc2l6ZSI6eyJ3aWR0aCI6MTYwMCwiZml0IjoiaW5zaWRlIiwid2l0aG91dEVubGFyZ2VtZW50Ijp0cnVlfX19 2x,https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6Im05N2kzbDB1LzUxNjQzMjAzNDYzNjI4LnBuZyIsImVkaXRzIjp7InJlc2l6ZSI6eyJ3aWR0aCI6MjQwMCwiZml0IjoiaW5zaWRlIiwid2l0aG91dEVubGFyZ2VtZW50Ijp0cnVlfX19 3x" src="https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6Im05N2kzbDB1LzUxNjQzMjAzNDYzNjI4LnBuZyIsImVkaXRzIjp7InJlc2l6ZSI6eyJ3aWR0aCI6ODAwLCJmaXQiOiJpbnNpZGUiLCJ3aXRob3V0RW5sYXJnZW1lbnQiOnRydWV9fX0=" alt="" aria-labelledby="nq7jzsh70ip-figure-caption"/><figcaption id="nq7jzsh70ip-figure-caption"><div><strong spellcheck="false">Image 4</strong><div><p id="n3t5swjtdty">Extracting a monotonic groove sequence from a drum performance</p></div></div></figcaption></figure><h2 id="architecture">Architecture</h2><p id="nba93cxdby2">An overview of the Transformer architecture used in this work is shown in <a id="nowe8lliz7z" href="#nnd4hnp3557" class="reference" data-node-type="reference" data-target-id="nnd4hnp3557">Image 5</a>. </p><figure id="nnd4hnp3557" data-node-type="image" data-size="100" data-align="center" data-url="https://assets.pubpub.org/7k0d2czt/31643551796448.jpeg" data-caption="&lt;p id=&quot;n5cwcgznwbi&quot;&gt;Overview of model architecture&lt;/p&gt;" data-alt-text=""><img srcSet="" src="https://assets.pubpub.org/7k0d2czt/31643551796448.jpeg" alt="" aria-labelledby="nnd4hnp3557-figure-caption"/><figcaption id="nnd4hnp3557-figure-caption"><div><strong spellcheck="false">Image 5</strong><div><p id="n5cwcgznwbi">Overview of model architecture</p></div></div></figcaption></figure><p id="nupc5lus6ve"></p><p id="nrgpubvzoy0">As shown in <a id="net0nigs6i0" href="#nnd4hnp3557" class="reference" data-node-type="reference" data-target-id="nnd4hnp3557">Image 5</a>, a monotonic groove with velocity and timing information (extracted from the target drum performance) is used as the input to the system. After passing through a linear layer, we apply positional encoding similar to the vanilla transformer<a href="#citation-qLZoDdBbWb-bottom" id="citation-qLZoDdBbWb-inline" data-node-type="citation" data-value="@inproceedings{vaswani2017attention,
  title={Attention is all you need},
  author={Vaswani, Ashish and Shazeer, Noam and Parmar, Niki and Uszkoreit, Jakob and Jones, Llion and Gomez, Aidan N and Kaiser, {\L}ukasz and Polosukhin, Illia},
  booktitle={Advances in neural information processing systems},
  pages={5998--6008},
  year={2017}
}" data-unstructured-value="" data-custom-label="" class="citation">[1]</a>.  Afterward, the data passes through a Transformer encoder, which comprises several layers, each of them composed of a multi-head attention module and a feedforward layer. </p><p id="ngy2d7osauu">The multi-head attention module uses several parallel attention mechanisms (n_heads), in each of which, the attention values are computed in parallel for each head and the resulting values are then concatenated. </p><p id="nkmlgjug53d">Finally, following <math-inline className="math-node"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></math-inline> attention layers, the linear layer maps the final attended tensor of shape 32 x d_model into the same shape as the input tensor (32 x 27). The resulting tensor is then split into three tensors of shape Batch Size x 32 x 9. As shown in <a id="nenht3t1vzm" href="#nnd4hnp3557" class="reference" data-node-type="reference" data-target-id="nnd4hnp3557">Image 5</a>, either sigmoid or hyperbolic tangent (tanh) activations are used to predict the hits, velocities, or micro-timings (offsets). Similar to <a href="#citation-PuL1Fh1bUl-bottom" id="citation-PuL1Fh1bUl-inline" data-node-type="citation" data-value="@inproceedings{gillick2019learning,
  title={Learning to groove with inverse sequence transformations},
  author={Gillick, Jon and Roberts, Adam and Engel, Jesse and Eck, Douglas and Bamman, David},
  booktitle={International Conference on Machine Learning},
  pages={2269--2279},
  year={2019},
  organization={PMLR}
}" data-unstructured-value="" data-custom-label="" class="citation">[26]</a>, a binary cross-entropy loss (BCE) is used for the hits, and Mean Square Error losses (MSE) are used for velocities and micro-timings. </p><p id="ntlkw4ojapr">In the ground truth drum scores, most entries in the HVO matrix are zero (as there are no corresponding events). In order to help the model give more importance to activated voices (i.e. where the expected hits are 1), we applied a penalty or multiplying factor (in the range of 0 to 1) to the hit, velocity, and offset loss values where the expected hits are 0 (see next section for justification of this modification to the loss calculation).</p><p id="n97lmu7j28k">The loss calculations are detailed in <a id="nqaev0150zt" href="#nfucm39r33l" class="reference missing" data-node-type="reference" data-target-id="nfucm39r33l">(ref?)</a> to <a id="n8cqncceqf6" href="#noz8oy211od" class="reference missing" data-node-type="reference" data-target-id="noz8oy211od">(ref?)</a>.</p><div class="math-node" id="n7o7zgl9zgg"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mstyle mathsize="0.5em"><mi>t</mi><mi>o</mi><mi>t</mi><mi>a</mi><mi>l</mi><mspace width="0.24533333333333335em"/><mspace width="0.24533333333333335em"/><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo>=</mo><mi>h</mi><mi>i</mi><mi>t</mi><mspace width="0.24533333333333335em"/><mspace width="0.24533333333333335em"/><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mspace width="0.24533333333333335em"/><mspace width="0.24533333333333335em"/><mo>+</mo><mi>v</mi><mi>e</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>i</mi><mi>t</mi><mi>y</mi><mspace width="0.24533333333333335em"/><mspace width="0.24533333333333335em"/><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mspace width="0.24533333333333335em"/><mspace width="0.24533333333333335em"/><mo>+</mo><mi>o</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi><mspace width="0.24533333333333335em"/><mspace width="0.24533333333333335em"/><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mstyle></mtd><mtd width="50%"></mtd><mtd><mtext>(1)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\tiny total\,\,loss = hit\,\,loss \,\,+  velocity\,\,loss \,\,+  offset\,\,loss 
 \tag{1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.34722em;vertical-align:0em;"></span><span class="mord mathnormal sizing reset-size6 size1">t</span><span class="mord mathnormal sizing reset-size6 size1">o</span><span class="mord mathnormal sizing reset-size6 size1">t</span><span class="mord mathnormal sizing reset-size6 size1">a</span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.01968em;">l</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.01968em;">l</span><span class="mord mathnormal sizing reset-size6 size1">oss</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span><span class="mrel sizing reset-size6 size1">=</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span></span><span class="base"><span class="strut" style="height:0.388885em;vertical-align:-0.041665em;"></span><span class="mord mathnormal sizing reset-size6 size1">hi</span><span class="mord mathnormal sizing reset-size6 size1">t</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.01968em;">l</span><span class="mord mathnormal sizing reset-size6 size1">oss</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace" style="margin-right:0.32711111111111113em;"></span><span class="mbin sizing reset-size6 size1">+</span><span class="mspace" style="margin-right:0.32711111111111113em;"></span></span><span class="base"><span class="strut" style="height:0.44443999999999995em;vertical-align:-0.09722em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.03588em;">v</span><span class="mord mathnormal sizing reset-size6 size1">e</span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.01968em;">l</span><span class="mord mathnormal sizing reset-size6 size1">oc</span><span class="mord mathnormal sizing reset-size6 size1">i</span><span class="mord mathnormal sizing reset-size6 size1">t</span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.03588em;">y</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.01968em;">l</span><span class="mord mathnormal sizing reset-size6 size1">oss</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace" style="margin-right:0.32711111111111113em;"></span><span class="mbin sizing reset-size6 size1">+</span><span class="mspace" style="margin-right:0.32711111111111113em;"></span></span><span class="base"><span class="strut" style="height:0.44443999999999995em;vertical-align:-0.09722em;"></span><span class="mord mathnormal sizing reset-size6 size1">o</span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal sizing reset-size6 size1">se</span><span class="mord mathnormal sizing reset-size6 size1">t</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.01968em;">l</span><span class="mord mathnormal sizing reset-size6 size1">oss</span></span><span class="tag"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">1</span></span><span class="mord">)</span></span></span></span></span></span></div><p id="nuvfzs9huaw">where the losses are defined as:</p><div class="math-node" id="n8xbgpupcr6"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mstyle mathsize="0.5em"><mi>h</mi><mi>i</mi><mi>t</mi><mspace width="0.24533333333333335em"/><mspace width="0.24533333333333335em"/><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mspace width="0.24533333333333335em"/><mspace width="0.24533333333333335em"/><mo>=</mo><munder><mo></mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></munder><mrow><mi>P</mi><mo></mo><mi>B</mi><mi>C</mi><mi>E</mi><mo stretchy="false">(</mo><msub><mi>H</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>c</mi><mi>t</mi><mi>e</mi><mi>d</mi></mrow></msub><mo separator="true">,</mo><msub><mi>H</mi><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>e</mi><mi>d</mi></mrow></msub><msub><mo stretchy="false">)</mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></msub></mrow></mstyle></mtd><mtd width="50%"></mtd><mtd><mtext>(2)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\tiny hit\,\,loss \,\, = \sum_{i,j}{P \odot BCE(H_{predicted}, H_{expected})_{i,j}} \tag{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.34722em;vertical-align:0em;"></span><span class="mord mathnormal sizing reset-size6 size1">hi</span><span class="mord mathnormal sizing reset-size6 size1">t</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.01968em;">l</span><span class="mord mathnormal sizing reset-size6 size1">oss</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace" style="margin-right:0.4088888888888889em;"></span><span class="mrel sizing reset-size6 size1">=</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span></span><span class="base"><span class="strut" style="height:1.381485em;vertical-align:-0.8564825em;"></span><span class="mop op-limits sizing reset-size6 size1"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.6744749999999997em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op"></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.712965em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.24533333333333335em;"></span><span class="mord sizing reset-size6 size1"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.32711111111111113em;"></span><span class="mbin"></span><span class="mspace" style="margin-right:0.32711111111111113em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">BCE</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.08125em;margin-right:0.1em;"><span class="pstrut" style="height:2.69444em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">re</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5440799999999999em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.24533333333333335em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.08125em;margin-right:0.1em;"><span class="pstrut" style="height:2.69444em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ec</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5440799999999999em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:0em;margin-right:0.1em;"><span class="pstrut" style="height:2.65952em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5091600000000001em;"><span></span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:1.6064825em;vertical-align:-0.8564825em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">2</span></span><span class="mord">)</span></span></span></span></span></span></div><div class="math-node" id="nobdhhl0hcl"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mstyle mathsize="0.5em"><mi>v</mi><mi>e</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>i</mi><mi>t</mi><mi>y</mi><mspace width="0.24533333333333335em"/><mspace width="0.24533333333333335em"/><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mspace width="0.24533333333333335em"/><mspace width="0.24533333333333335em"/><mo>=</mo><munder><mo></mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></munder><mrow><mi>P</mi><mo></mo><mi>M</mi><mi>S</mi><mi>E</mi><mo stretchy="false">(</mo><msub><mi>V</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>c</mi><mi>t</mi><mi>e</mi><mi>d</mi></mrow></msub><mo separator="true">,</mo><msub><mi>V</mi><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>e</mi><mi>d</mi></mrow></msub><msub><mo stretchy="false">)</mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></msub></mrow></mstyle></mtd><mtd width="50%"></mtd><mtd><mtext>(3)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\tiny velocity\,\,loss \,\, = \sum_{i,j}{P \odot MSE(V_{predicted}, V_{expected})_{i,j}} \tag{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.44443999999999995em;vertical-align:-0.09722em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.03588em;">v</span><span class="mord mathnormal sizing reset-size6 size1">e</span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.01968em;">l</span><span class="mord mathnormal sizing reset-size6 size1">oc</span><span class="mord mathnormal sizing reset-size6 size1">i</span><span class="mord mathnormal sizing reset-size6 size1">t</span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.03588em;">y</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.01968em;">l</span><span class="mord mathnormal sizing reset-size6 size1">oss</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace" style="margin-right:0.4088888888888889em;"></span><span class="mrel sizing reset-size6 size1">=</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span></span><span class="base"><span class="strut" style="height:1.381485em;vertical-align:-0.8564825em;"></span><span class="mop op-limits sizing reset-size6 size1"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.6744749999999997em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op"></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.712965em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.24533333333333335em;"></span><span class="mord sizing reset-size6 size1"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.32711111111111113em;"></span><span class="mbin"></span><span class="mspace" style="margin-right:0.32711111111111113em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">MSE</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.22222em;margin-right:0.1em;"><span class="pstrut" style="height:2.69444em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">re</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5440799999999999em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.24533333333333335em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.22222em;margin-right:0.1em;"><span class="pstrut" style="height:2.69444em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ec</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5440799999999999em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:0em;margin-right:0.1em;"><span class="pstrut" style="height:2.65952em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5091600000000001em;"><span></span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:1.6064825em;vertical-align:-0.8564825em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">3</span></span><span class="mord">)</span></span></span></span></span></span></div><div class="math-node" id="nqk0l6kjlgq"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mstyle mathsize="0.5em"><mi>o</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi><mspace width="0.24533333333333335em"/><mspace width="0.24533333333333335em"/><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mspace width="0.24533333333333335em"/><mspace width="0.24533333333333335em"/><mo>=</mo><munder><mo></mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></munder><mrow><mi>P</mi><mo></mo><mi>M</mi><mi>S</mi><mi>E</mi><mo stretchy="false">(</mo><msub><mi>O</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>c</mi><mi>t</mi><mi>e</mi><mi>d</mi></mrow></msub><mo separator="true">,</mo><msub><mi>O</mi><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>e</mi><mi>d</mi></mrow></msub><msub><mo stretchy="false">)</mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></msub></mrow></mstyle></mtd><mtd width="50%"></mtd><mtd><mtext>(4)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\tiny offset\,\,loss \,\, = \sum_{i,j}{P \odot MSE(O_{predicted}, O_{expected})_{i,j}} \tag{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.44443999999999995em;vertical-align:-0.09722em;"></span><span class="mord mathnormal sizing reset-size6 size1">o</span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal sizing reset-size6 size1">se</span><span class="mord mathnormal sizing reset-size6 size1">t</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.01968em;">l</span><span class="mord mathnormal sizing reset-size6 size1">oss</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace" style="margin-right:0.4088888888888889em;"></span><span class="mrel sizing reset-size6 size1">=</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span></span><span class="base"><span class="strut" style="height:1.381485em;vertical-align:-0.8564825em;"></span><span class="mop op-limits sizing reset-size6 size1"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.6744749999999997em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op"></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.712965em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.24533333333333335em;"></span><span class="mord sizing reset-size6 size1"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.32711111111111113em;"></span><span class="mbin"></span><span class="mspace" style="margin-right:0.32711111111111113em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">MSE</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.02778em;margin-right:0.1em;"><span class="pstrut" style="height:2.69444em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">re</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5440799999999999em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.24533333333333335em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.02778em;margin-right:0.1em;"><span class="pstrut" style="height:2.69444em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ec</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5440799999999999em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:0em;margin-right:0.1em;"><span class="pstrut" style="height:2.65952em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5091600000000001em;"><span></span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:1.6064825em;vertical-align:-0.8564825em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">4</span></span><span class="mord">)</span></span></span></span></span></span></div><div class="math-node" id="nj8zuglwu61"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mstyle mathsize="0.5em"><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mspace width="0.24533333333333335em"/><mspace width="0.24533333333333335em"/><mi>P</mi><mo>=</mo><mi>p</mi><mspace width="0.24533333333333335em"/><mo></mo><mspace width="0.24533333333333335em"/><mo stretchy="false">(</mo><mi>J</mi><mo></mo><msub><mi>H</mi><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>e</mi><mi>d</mi></mrow></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mspace width="0.24533333333333335em"/><mspace width="0.24533333333333335em"/><mn>0</mn><mo></mo><mi>p</mi><mo></mo><mn>1</mn><mo separator="true">,</mo><mspace width="0.24533333333333335em"/><mspace width="0.24533333333333335em"/><mi>J</mi><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.1600em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em"></mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em"></mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi><mi mathvariant="normal"></mi><mpadded height="+0em" voffset="0em"><mspace mathbackground="black" width="0em" height="3em"></mspace></mpadded></mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi><mi mathvariant="normal"></mi><mpadded height="+0em" voffset="0em"><mspace mathbackground="black" width="0em" height="3em"></mspace></mpadded></mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em"></mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi><mi mathvariant="normal"></mi><mpadded height="+0em" voffset="0em"><mspace mathbackground="black" width="0em" height="3em"></mspace></mpadded></mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em"></mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow></mstyle></mtd><mtd width="50%"></mtd><mtd><mtext>(5)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\tiny where\,\, P = p  \, \cdot \, (J - H_{expected}),\,\, 0\le p \le 1

, \,\,J = \begin{pmatrix}
1 &amp; 1 &amp;  \dots &amp;1\\
1 &amp; 1 &amp;  \dots &amp;1\\
\vdots &amp; \vdots &amp; \ddots &amp;\vdots\\
1 &amp; 1 &amp;  \dots &amp;1
\end{pmatrix} \tag{5}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.34722em;vertical-align:0em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.02691em;">w</span><span class="mord mathnormal sizing reset-size6 size1">h</span><span class="mord mathnormal sizing reset-size6 size1">ere</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span><span class="mrel sizing reset-size6 size1">=</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span></span><span class="base"><span class="strut" style="height:0.319445em;vertical-align:-0.09722em;"></span><span class="mord mathnormal sizing reset-size6 size1">p</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace" style="margin-right:0.32711111111111113em;"></span><span class="mbin sizing reset-size6 size1"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace" style="margin-right:0.32711111111111113em;"></span></span><span class="base"><span class="strut" style="height:0.5em;vertical-align:-0.125em;"></span><span class="mopen sizing reset-size6 size1">(</span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.09618em;">J</span><span class="mspace" style="margin-right:0.32711111111111113em;"></span><span class="mbin sizing reset-size6 size1"></span><span class="mspace" style="margin-right:0.32711111111111113em;"></span></span><span class="base"><span class="strut" style="height:0.64704em;vertical-align:-0.27203999999999995em;"></span><span class="mord sizing reset-size6 size1"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.08125em;margin-right:0.1em;"><span class="pstrut" style="height:2.69444em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ec</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5440799999999999em;"><span></span></span></span></span></span></span><span class="mclose sizing reset-size6 size1">)</span><span class="mpunct sizing reset-size6 size1">,</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace" style="margin-right:0.24533333333333335em;"></span><span class="mord sizing reset-size6 size1">0</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span><span class="mrel sizing reset-size6 size1"></span><span class="mspace" style="margin-right:0.4088888888888889em;"></span></span><span class="base"><span class="strut" style="height:0.41520500000000005em;vertical-align:-0.09722em;"></span><span class="mord mathnormal sizing reset-size6 size1">p</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span><span class="mrel sizing reset-size6 size1"></span><span class="mspace" style="margin-right:0.4088888888888889em;"></span></span><span class="base"><span class="strut" style="height:0.43888499999999997em;vertical-align:-0.09722em;"></span><span class="mord sizing reset-size6 size1">1</span><span class="mpunct sizing reset-size6 size1">,</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace" style="margin-right:0.24533333333333335em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.09618em;">J</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span><span class="mrel sizing reset-size6 size1">=</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span></span><span class="base"><span class="strut" style="height:3.60004em;vertical-align:-1.67502em;"></span><span class="minner sizing reset-size6 size1"><span class="mopen sizing reset-size1 size6"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.92502em;"><span style="top:-2.1250000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span></span></span></span><span style="top:-3.2720000000000002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span style="height:0.016em;width:0.875em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.875em' height='0.016em' style='width:0.875em' viewBox='0 0 875 16' preserveAspectRatio='xMinYMin'><path d='M291 0 H417 V16 H291z M291 0 H417 V16 H291z'/></svg></span></span><span style="top:-3.9250200000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.67502em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.730000000000001em;"><span style="top:-7.8900000000000015em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-6.69em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.33em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="mord"><span class="mord"></span><span class="mord rule" style="border-right-width:0em;border-top-width:3em;bottom:0em;"></span></span></span></span><span style="top:-2.1299999999999994em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:3.2300000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.730000000000001em;"><span style="top:-7.8900000000000015em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-6.69em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.33em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="mord"><span class="mord"></span><span class="mord rule" style="border-right-width:0em;border-top-width:3em;bottom:0em;"></span></span></span></span><span style="top:-2.1299999999999994em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:3.2300000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.730000000000001em;"><span style="top:-7.8900000000000015em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="minner"></span></span></span><span style="top:-6.69em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="minner"></span></span></span><span style="top:-3.33em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="minner"></span></span></span><span style="top:-2.1299999999999994em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="minner"></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:3.2300000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.730000000000001em;"><span style="top:-7.8900000000000015em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-6.69em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.33em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="mord"><span class="mord"></span><span class="mord rule" style="border-right-width:0em;border-top-width:3em;bottom:0em;"></span></span></span></span><span style="top:-2.1299999999999994em;"><span class="pstrut" style="height:5em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:3.2300000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose sizing reset-size1 size6"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.92502em;"><span style="top:-2.1250000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span></span></span></span><span style="top:-3.2720000000000002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span style="height:0.016em;width:0.875em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.875em' height='0.016em' style='width:0.875em' viewBox='0 0 875 16' preserveAspectRatio='xMinYMin'><path d='M457 0 H583 V16 H457z M457 0 H583 V16 H457z'/></svg></span></span><span style="top:-3.9250200000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.67502em;"><span></span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:3.60004em;vertical-align:-1.67502em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">5</span></span><span class="mord">)</span></span></span></span></span></span></div><h2 id="training">Training</h2><p id="n7b2nspjzcy">We used Weights &amp; Biases (W&amp;B) <a href="#citation-5EI8RwiYT7-bottom" id="citation-5EI8RwiYT7-inline" data-node-type="citation" data-value="@misc{wandb,
title = {Experiment Tracking with Weights and Biases},
year = {2020},
note = {Software available from wandb.com},
url={https://www.wandb.com/},
author = {Biewald, Lukas},
}" data-unstructured-value="" data-custom-label="" class="citation">[28]</a> in the training pipeline of our experiments. The results of our training, our evaluations as well as all our training conditions are publicly available to ensure the accuracy and reproducibility of the results presented in this paper. </p><p id="nom1fflp1vd">To tune the hyper-parameters, we took advantage of the random sweep tool provided by W&amp;B. In our initial experiment, we assumed the same loss function as used in <a href="#citation-PuL1Fh1bUl-bottom" id="citation-PuL1Fh1bUl-inline" data-node-type="citation" data-value="@inproceedings{gillick2019learning,
  title={Learning to groove with inverse sequence transformations},
  author={Gillick, Jon and Roberts, Adam and Engel, Jesse and Eck, Douglas and Bamman, David},
  booktitle={International Conference on Machine Learning},
  pages={2269--2279},
  year={2019},
  organization={PMLR}
}" data-unstructured-value="" data-custom-label="" class="citation">[26]</a> (i.e. we did not apply a loss multiplier to hits - <math-inline className="math-node"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span></math-inline> in <a id="nor45c8s095" href="#noz8oy211od" class="reference missing" data-node-type="reference" data-target-id="noz8oy211od">(ref?)</a> was assumed to be a matrix of ones). This initial experiment immediately showed that while the models were somewhat able to generalize velocities and hits, they greatly struggled in generalizing offsets. (See <a id="na4x4mvqcm7" href="#nr0odcpgz9q" class="reference" data-node-type="reference" data-target-id="nr0odcpgz9q">Image 6</a>, a description of the plot can be found <strong>here</strong><a href="#fn-2-bottom" id="fn-2-inline" data-node-type="footnote" data-value="&lt;p id=&quot;nkzep4sm7l4&quot;&gt;Throughout this paper, we will be using images similar to the following Image, referred to as Velocity Heat-maps. These plots are compiled from a collection of loops (either from predictions or the ground truth). In other words, these plots are obtained by superimposing the piano-roll representations of all the sample loops available in a given subset. The orange scatter points in these images represent a drum event (a hit) at a given time (found on the x-axis relative to the 16th note grid in 4/4) with a given velocity (found on the y-axis). The underlying heat maps are calculated by applying a gaussian filter to the two-dimensional histograms of the scatter points and denote the probabilities of events happening in different regions.&lt;/p&gt;" date-structured-value="" class="footnote">3</a>)</p><figure id="nr0odcpgz9q" data-node-type="image" data-size="100" data-align="center" data-url="https://assets.pubpub.org/k87muwu6/71642708408690.png" data-caption="&lt;p id=&quot;n42rs0xzhyt&quot;&gt;Velocity heatmaps of Kick for run &lt;a href=&quot;https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/7ecgdrhn&quot;&gt;northern-sweep-26 &lt;/a&gt;for three genres, comparing ground truths (above) and predictions (below). &lt;/p&gt;&lt;p id=&quot;n79yv9aaqa5&quot;&gt;An interactive version with all voices and styles can be found &lt;a href=&quot;https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/Velocity-heatmaps-for-Run-northern-sweep-26---VmlldzoxNTAxNjMy&quot;&gt;here&lt;/a&gt;.&lt;br&gt;&lt;/p&gt;&lt;p id=&quot;nhfv9d4qluz&quot;&gt;&lt;strong&gt;x-axis: timing of hits         &lt;br&gt;y-axis: velocity of hits&lt;/strong&gt;&lt;br&gt;&lt;em&gt;&lt;strong&gt;Scatter Plot: &lt;/strong&gt;All the predicted hits compiled into a single plot&lt;strong&gt;&lt;br&gt;Underlying Heatmap Plot: the probability of hits calculated from the scatter plot&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;&lt;p id=&quot;n6wdo45irzq&quot;&gt;&lt;/p&gt;" data-alt-text=""><img srcSet="" src="https://assets.pubpub.org/k87muwu6/71642708408690.png" alt="" aria-labelledby="nr0odcpgz9q-figure-caption"/><figcaption id="nr0odcpgz9q-figure-caption"><div><strong spellcheck="false">Image 6</strong><div><p id="n42rs0xzhyt">Velocity heatmaps of Kick for run <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/7ecgdrhn">northern-sweep-26 </a>for three genres, comparing ground truths (above) and predictions (below). </p><p id="n79yv9aaqa5">An interactive version with all voices and styles can be found <a href="https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/Velocity-heatmaps-for-Run-northern-sweep-26---VmlldzoxNTAxNjMy">here</a>.<br></p><p id="nhfv9d4qluz"><strong>x-axis: timing of hits         <br>y-axis: velocity of hits</strong><br><em><strong>Scatter Plot: </strong>All the predicted hits compiled into a single plot<strong><br>Underlying Heatmap Plot: the probability of hits calculated from the scatter plot</strong></em></p><p id="n6wdo45irzq"></p></div></div></figcaption></figure><p id="neg5x4mnfof">We believe that the lack of offset variability might be related to the proportions of the offset loss in the total loss calculation (see <a id="n6a8ru8ve68" href="#nfked6lztpd" class="reference" data-node-type="reference" data-target-id="nfked6lztpd">Image 7</a>).</p><figure id="nfked6lztpd" data-node-type="image" data-size="56" data-align="center" data-url="https://assets.pubpub.org/9lc7oxyp/31642748705854.png" data-caption="&lt;p id=&quot;n59x1gwuxry&quot;&gt;Individual training losses over 100 epochs of run &lt;a href=&quot;https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/7ecgdrhn&quot;&gt;northern-sweep-26 &lt;/a&gt;&lt;/p&gt;" data-alt-text=""><img srcSet="https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6IjlsYzdveHlwLzMxNjQyNzQ4NzA1ODU0LnBuZyIsImVkaXRzIjp7InJlc2l6ZSI6eyJ3aWR0aCI6ODAwLCJmaXQiOiJpbnNpZGUiLCJ3aXRob3V0RW5sYXJnZW1lbnQiOnRydWV9fX0= 1x,https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6IjlsYzdveHlwLzMxNjQyNzQ4NzA1ODU0LnBuZyIsImVkaXRzIjp7InJlc2l6ZSI6eyJ3aWR0aCI6MTYwMCwiZml0IjoiaW5zaWRlIiwid2l0aG91dEVubGFyZ2VtZW50Ijp0cnVlfX19 2x,https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6IjlsYzdveHlwLzMxNjQyNzQ4NzA1ODU0LnBuZyIsImVkaXRzIjp7InJlc2l6ZSI6eyJ3aWR0aCI6MjQwMCwiZml0IjoiaW5zaWRlIiwid2l0aG91dEVubGFyZ2VtZW50Ijp0cnVlfX19 3x" src="https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6IjlsYzdveHlwLzMxNjQyNzQ4NzA1ODU0LnBuZyIsImVkaXRzIjp7InJlc2l6ZSI6eyJ3aWR0aCI6ODAwLCJmaXQiOiJpbnNpZGUiLCJ3aXRob3V0RW5sYXJnZW1lbnQiOnRydWV9fX0=" alt="" aria-labelledby="nfked6lztpd-figure-caption"/><figcaption id="nfked6lztpd-figure-caption"><div><strong spellcheck="false">Image 7</strong><div><p id="n59x1gwuxry">Individual training losses over 100 epochs of run <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/7ecgdrhn">northern-sweep-26 </a></p></div></div></figcaption></figure><p id="nq6wjw6i08q">Multiple experiments were run in an effort to fix this issue<a href="#fn-3-bottom" id="fn-3-inline" data-node-type="footnote" data-value="&lt;p id=&quot;nmpveg977as&quot;&gt;A summary of these experiments can be found here: https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/First-sweeps-and-lack-of-variation-in-offsets--VmlldzoxNTA1ODk2&lt;/p&gt;" date-structured-value="" class="footnote">4</a>. Of all the experiments attempted, the one we found to be most promising involved adding a penalty factor or loss multiplier (p in <a id="n97flov4102" href="#noz8oy211od" class="reference missing" data-node-type="reference" data-target-id="noz8oy211od">(ref?)</a>). This factor multiplies the hit, velocity, and offset losses where the ground truth hits are 0, giving less importance to the places where there are no expected hits. <a id="na0t3j5ehhg" href="#n8e8gmpjngo" class="reference missing" data-node-type="reference" data-target-id="n8e8gmpjngo">(ref?)</a> shows an example  of this calculation (reduced to 4 voices, 3 time-steps).</p><div class="math-node" id="nuiqs9qncu4"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mstyle mathsize="0.5em"><mi>B</mi><mi>C</mi><mi>E</mi><mo stretchy="false">(</mo><msub><mi>H</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>c</mi><mi>t</mi><mi>e</mi><mi>d</mi></mrow></msub><mo separator="true">,</mo><msub><mi>H</mi><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>e</mi><mi>d</mi></mrow></msub><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.1600em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.52</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.10</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.27</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.32</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.74</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.52</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.14</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.32</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.64</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.6</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.30</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.34</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mspace linebreak="newline"></mspace><mstyle mathsize="0.5em"><mi>f</mi><mi>o</mi><mi>r</mi><mtext></mtext><mi>p</mi><mo>=</mo><mn>0.5</mn><mtext></mtext><mi mathvariant="normal">&amp;</mi><mtext></mtext><msub><mi>H</mi><mrow><mi>E</mi><mi>x</mi><mi>p</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>e</mi><mi>d</mi></mrow></msub><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.1600em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mspace width="0.4088888888888889em"/><mo></mo><mspace width="0.4088888888888889em"/><mi>P</mi><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.1600em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.5</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.5</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.5</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mspace linebreak="newline"></mspace><mstyle mathsize="0.5em"><mi>h</mi><mi>i</mi><mi>t</mi><mspace width="0.24533333333333335em"/><mspace width="0.24533333333333335em"/><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mspace width="0.24533333333333335em"/><mspace width="0.24533333333333335em"/><mo>=</mo><munder><mo></mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></munder><mrow><mi>P</mi><mo></mo><mi>B</mi><mi>C</mi><mi>E</mi><mo stretchy="false">(</mo><msub><mi>H</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>c</mi><mi>t</mi><mi>e</mi><mi>d</mi></mrow></msub><mo separator="true">,</mo><msub><mi>H</mi><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>e</mi><mi>d</mi></mrow></msub><msub><mo stretchy="false">)</mo><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></msub></mrow><mo>=</mo><mo></mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.1600em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.52</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.05</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.27</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.16</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.37</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.26</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.07</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.16</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.32</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.6</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.30</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0.17</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mo>=</mo><mn>3.25</mn></mstyle></mstyle></mstyle></mtd><mtd width="50%"></mtd><mtd><mtext>(6)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\tiny BCE(H_{predicted}, H_{expected}) = \begin{pmatrix}
0.52 &amp; 0.10 &amp;  0.27 &amp; 0.32\\
0.74 &amp; 0.52 &amp;  0.14 &amp; 0.32\\
0.64 &amp; 0.6 &amp; 0.30 &amp; 0.34
\end{pmatrix}

\\ \tiny  for \ p = 0.5 \ \&amp; \ H_{Expected} = \begin{pmatrix}
1 &amp; 0 &amp;  1 &amp; 0\\
0 &amp; 0 &amp;  0 &amp; 0\\
0 &amp; 1 &amp; 1 &amp; 0
\end{pmatrix} \implies 
P = \begin{pmatrix}
1 &amp; 0.5 &amp;  1 &amp; 0.5\\
0.5 &amp; 0.5 &amp;  0.5 &amp; 0.5\\
0.5 &amp; 1 &amp; 1 &amp; 0.5
\end{pmatrix} 
\\
\tiny  hit\,\,loss \,\, = \sum_{i,j}{P \odot BCE(H_{predicted}, H_{expected})_{i,j}} = \sum \begin{pmatrix}
0.52 &amp; 0.05 &amp;  0.27 &amp; 0.16\\
0.37 &amp; 0.26 &amp;  0.07 &amp; 0.16\\
0.32 &amp; 0.6 &amp; 0.30 &amp; 0.17
\end{pmatrix} = 3.25 \tag{6}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64704em;vertical-align:-0.27203999999999995em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.05764em;">BCE</span><span class="mopen sizing reset-size6 size1">(</span><span class="mord sizing reset-size6 size1"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.08125em;margin-right:0.1em;"><span class="pstrut" style="height:2.69444em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">re</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5440799999999999em;"><span></span></span></span></span></span></span><span class="mpunct sizing reset-size6 size1">,</span><span class="mspace" style="margin-right:0.24533333333333335em;"></span><span class="mord sizing reset-size6 size1"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.08125em;margin-right:0.1em;"><span class="pstrut" style="height:2.69444em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ec</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5440799999999999em;"><span></span></span></span></span></span></span><span class="mclose sizing reset-size6 size1">)</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span><span class="mrel sizing reset-size6 size1">=</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span></span><span class="base"><span class="strut" style="height:1.8625000000000003em;vertical-align:-0.7750000000000004em;"></span><span class="minner sizing reset-size6 size1"><span class="mopen sizing reset-size1 size6 delimcenter" style="top:0.125em;"><span class="delimsizing size2">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.52</span></span></span><span style="top:-2.849999999999999em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.74</span></span></span><span style="top:-1.6499999999999992em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.64</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.10</span></span></span><span style="top:-2.849999999999999em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.52</span></span></span><span style="top:-1.6499999999999992em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.6</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.27</span></span></span><span style="top:-2.849999999999999em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.14</span></span></span><span style="top:-1.6499999999999992em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.30</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.32</span></span></span><span style="top:-2.849999999999999em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.32</span></span></span><span style="top:-1.6499999999999992em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.34</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span></span></span><span class="mclose sizing reset-size1 size6 delimcenter" style="top:0.125em;"><span class="delimsizing size2">)</span></span></span></span><span class="mspace newline sizing reset-size6 size1"></span><span class="base"><span class="strut" style="height:0.44443999999999995em;vertical-align:-0.09722em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.10764em;">f</span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.02778em;">or</span><span class="mspace sizing reset-size6 size1"></span><span class="mord mathnormal sizing reset-size6 size1">p</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span><span class="mrel sizing reset-size6 size1">=</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span></span><span class="base"><span class="strut" style="height:0.6192599999999999em;vertical-align:-0.27203999999999995em;"></span><span class="mord sizing reset-size6 size1">0.5</span><span class="mspace sizing reset-size6 size1"></span><span class="mord sizing reset-size6 size1">&amp;</span><span class="mspace sizing reset-size6 size1"></span><span class="mord sizing reset-size6 size1"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.08125em;margin-right:0.1em;"><span class="pstrut" style="height:2.69444em;"></span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">E</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ec</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5440799999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.4088888888888889em;"></span><span class="mrel sizing reset-size6 size1">=</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span></span><span class="base"><span class="strut" style="height:1.8625000000000003em;vertical-align:-0.7750000000000004em;"></span><span class="minner sizing reset-size6 size1"><span class="mopen sizing reset-size1 size6 delimcenter" style="top:0.125em;"><span class="delimsizing size2">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.849999999999999em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.6499999999999992em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.849999999999999em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.6499999999999992em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.849999999999999em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.6499999999999992em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.849999999999999em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.6499999999999992em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span></span></span><span class="mclose sizing reset-size1 size6 delimcenter" style="top:0.125em;"><span class="delimsizing size2">)</span></span></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.4088888888888889em;"></span><span class="mspace" style="margin-right:0.4088888888888889em;"></span><span class="mrel sizing reset-size6 size1"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.4088888888888889em;"></span><span class="mspace" style="margin-right:0.4088888888888889em;"></span></span><span class="base"><span class="strut" style="height:0.341665em;vertical-align:0em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span><span class="mrel sizing reset-size6 size1">=</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span></span><span class="base"><span class="strut" style="height:1.8625000000000003em;vertical-align:-0.7750000000000004em;"></span><span class="minner sizing reset-size6 size1"><span class="mopen sizing reset-size1 size6 delimcenter" style="top:0.125em;"><span class="delimsizing size2">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.849999999999999em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.5</span></span></span><span style="top:-1.6499999999999992em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.5</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.5</span></span></span><span style="top:-2.849999999999999em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.5</span></span></span><span style="top:-1.6499999999999992em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.849999999999999em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.5</span></span></span><span style="top:-1.6499999999999992em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.5</span></span></span><span style="top:-2.849999999999999em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.5</span></span></span><span style="top:-1.6499999999999992em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.5</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span></span></span><span class="mclose sizing reset-size1 size6 delimcenter" style="top:0.125em;"><span class="delimsizing size2">)</span></span></span></span><span class="mspace newline sizing reset-size6 size1"></span><span class="base"><span class="strut" style="height:0.34722em;vertical-align:0em;"></span><span class="mord mathnormal sizing reset-size6 size1">hi</span><span class="mord mathnormal sizing reset-size6 size1">t</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.01968em;">l</span><span class="mord mathnormal sizing reset-size6 size1">oss</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mspace" style="margin-right:0.4088888888888889em;"></span><span class="mrel sizing reset-size6 size1">=</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span></span><span class="base"><span class="strut" style="height:1.381485em;vertical-align:-0.8564825em;"></span><span class="mop op-limits sizing reset-size6 size1"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.6744749999999997em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op"></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.712965em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.24533333333333335em;"></span><span class="mord sizing reset-size6 size1"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.32711111111111113em;"></span><span class="mbin"></span><span class="mspace" style="margin-right:0.32711111111111113em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">BCE</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.08125em;margin-right:0.1em;"><span class="pstrut" style="height:2.69444em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">re</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5440799999999999em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.24533333333333335em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.08125em;margin-right:0.1em;"><span class="pstrut" style="height:2.69444em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ec</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5440799999999999em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:0em;margin-right:0.1em;"><span class="pstrut" style="height:2.65952em;"></span><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5091600000000001em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.4088888888888889em;"></span><span class="mrel sizing reset-size6 size1">=</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span></span><span class="base"><span class="strut" style="height:1.8625000000000003em;vertical-align:-0.7750000000000004em;"></span><span class="mop op-symbol large-op sizing reset-size6 size1" style="position:relative;top:-0.000004999999999977245em;"></span><span class="mspace" style="margin-right:0.24533333333333335em;"></span><span class="minner sizing reset-size6 size1"><span class="mopen sizing reset-size1 size6 delimcenter" style="top:0.125em;"><span class="delimsizing size2">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.52</span></span></span><span style="top:-2.849999999999999em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.37</span></span></span><span style="top:-1.6499999999999992em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.32</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.05</span></span></span><span style="top:-2.849999999999999em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.26</span></span></span><span style="top:-1.6499999999999992em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.6</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.27</span></span></span><span style="top:-2.849999999999999em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.07</span></span></span><span style="top:-1.6499999999999992em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.30</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.16</span></span></span><span style="top:-2.849999999999999em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.16</span></span></span><span style="top:-1.6499999999999992em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"><span class="mord">0.17</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span></span></span><span class="mclose sizing reset-size1 size6 delimcenter" style="top:0.125em;"><span class="delimsizing size2">)</span></span></span><span class="mspace" style="margin-right:0.4088888888888889em;"></span><span class="mrel sizing reset-size6 size1">=</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span></span><span class="base"><span class="strut" style="height:0.32222em;vertical-align:0em;"></span><span class="mord sizing reset-size6 size1">3.25</span></span><span class="tag"><span class="strut" style="height:1.9439825em;vertical-align:-0.8564825em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">6</span></span><span class="mord">)</span></span></span></span></span></span></div><p id="nwbdcuj0ofc">Accordingly, in the following experiments, the loss function was modified by applying a hit loss multiplication factor, <math-inline className="math-node"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span></span></span></span></math-inline> as in <a id="nhnxo6wtbhc" href="#noz8oy211od" class="reference missing" data-node-type="reference" data-target-id="noz8oy211od">(ref?)</a>, resulting in the final set of hyper-parameters detailed in <a id="n84lbeoe3r5" href="#ndf19stfo29" class="reference" data-node-type="reference" data-target-id="ndf19stfo29">Table 3</a>.</p><p id="n51d4ccyrke"><strong>List of hyper-parameters tuned using a random sweep</strong></p><table id="ndf19stfo29"><caption>Table 3</caption><tbody><tr><th data-colwidth="169"><p id="n5vf5ra5od3" data-text-align="center"><strong>Parameter Type</strong></p></th><th data-colwidth="456"><p id="nrp4ayqhf7y">Parameter</p></th></tr><tr><td rowspan="4" data-colwidth="169"><p id="natrakhl0qe" data-text-align="center"><br/><br/><strong>Architectural</strong></p></td><td data-colwidth="456"><p id="n20faei7emc">Model Embedding Dimension (d_model in <a id="nfcuhbaov55" href="#nnd4hnp3557" class="reference" data-node-type="reference" data-target-id="nnd4hnp3557">Image 5</a>)</p></td></tr><tr><td data-colwidth="456"><p id="nkjd8oo2rx8">Number of Transformer Blocks</p></td></tr><tr><td data-colwidth="456"><p id="noicvac3lxd">Number of Attention Heads</p></td></tr><tr><td data-colwidth="456"><p id="nlwrbtccehf">Feedforward Layer Dimension</p></td></tr><tr><td rowspan="4" data-colwidth="169"><p id="n120lxwrv8t" data-text-align="center"><br/><br/><strong>Training </strong></p></td><td data-colwidth="456"><p id="ny5j2pxtkmo">Dropout Value</p></td></tr><tr><td data-colwidth="456"><p id="nv4c5dbk0rz">Learning rate</p></td></tr><tr><td data-colwidth="456"><p id="nyzo8mfwcf1">Batch Size</p></td></tr><tr><td data-colwidth="456"><p id="no2zy390407">Hit Loss Multiplier (p as noted in <a id="nyt7r90megh" href="#noz8oy211od" class="reference missing" data-node-type="reference" data-target-id="noz8oy211od">(ref?)</a>)</p></td></tr></tbody></table><p id="nqo0ilakz00">While tuning the model, a criterion needs to be used so as to select more suitable candidates.<strong> </strong>At first glance, the final loss value may seem to be a good candidate. However, since each training run uses a different p or loss multiplier, loss values are not directly comparable. For example, hyper-parameters for two runs (<a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/mh8vsuty">absurd-sweep-24</a> and <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/piw4rfci">lyric-sweep-12</a>) with test losses of 0.04 and 1.18 respectively are shown in <a id="nuga7btgjy0" href="#nue8o9ia8jy" class="reference" data-node-type="reference" data-target-id="nue8o9ia8jy">Image 8</a>.</p><figure id="nue8o9ia8jy" data-node-type="image" data-size="85" data-align="center" data-url="https://assets.pubpub.org/4nz127bs/01642702083037.png" data-caption="&lt;p id=&quot;n15vhtlr0nh&quot;&gt;Sweep &lt;a href=&quot;https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/sweeps/j9r6pt0s&quot;&gt;j9r6pt0s&lt;/a&gt;, highlighting runs lyric-sweep-12 and absurd-sweep-24&lt;/p&gt;" data-alt-text=""><img srcSet="" src="https://assets.pubpub.org/4nz127bs/01642702083037.png" alt="" aria-labelledby="nue8o9ia8jy-figure-caption"/><figcaption id="nue8o9ia8jy-figure-caption"><div><strong spellcheck="false">Image 8</strong><div><p id="n15vhtlr0nh">Sweep <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/sweeps/j9r6pt0s">j9r6pt0s</a>, highlighting runs lyric-sweep-12 and absurd-sweep-24</p></div></div></figcaption></figure><p id="nxifcctj67o">A lower loss value could lead us to believe that <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/mh8vsuty">absurd-sweep-24</a> is the better model of the two.  Nonetheless, as shown in <a id="ne1p5juorca" href="#nnb9j2wag4z" class="reference" data-node-type="reference" data-target-id="nnb9j2wag4z">Image 9</a>(b), this run generates completely saturated predictions (all time-steps and voices have their hits set to 1).  On the other hand, the <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/piw4rfci">lyric-sweep-12</a> run, with a higher test loss value, generates predictions that are closer to the ground truth (see <a id="nxmgfvqhyau" href="#nnb9j2wag4z" class="reference" data-node-type="reference" data-target-id="nnb9j2wag4z">Image 9</a>(c)). </p><figure id="nnb9j2wag4z" data-node-type="image" data-size="86" data-align="center" data-url="https://assets.pubpub.org/9ngs78rp/31642702331329.png" data-caption="&lt;p id=&quot;nh17tnfubha&quot;&gt;Example ground truth and predictions, absurd-sweep-24 vs lyric-sweep-12&lt;/p&gt;" data-alt-text=""><img srcSet="" src="https://assets.pubpub.org/9ngs78rp/31642702331329.png" alt="" aria-labelledby="nnb9j2wag4z-figure-caption"/><figcaption id="nnb9j2wag4z-figure-caption"><div><strong spellcheck="false">Image 9</strong><div><p id="nh17tnfubha">Example ground truth and predictions, absurd-sweep-24 vs lyric-sweep-12</p></div></div></figcaption></figure><p id="no388li6hlz">As a result, we decided to use another criterion that would be comparable across different training runs, namely hit accuracy (defined as correctly predicted hits over the total number of predicted hits). For the two runs discussed above, <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/mh8vsuty">absurd-sweep-24</a> and <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/piw4rfci">lyric-sweep-12</a>, the test hit accuracies reported on the last epoch are 12.14% and 90.38%, attesting that this criterion is more reliable for narrowing down the scope of the selection of the candidate hyper-parameters.</p><p id="nfu3jb64szq">In order to have a baseline comparison, we calculated the hit accuracy of the <em>GrooVAE Tap2drum</em> model <a href="#citation-PuL1Fh1bUl-bottom" id="citation-PuL1Fh1bUl-inline" data-node-type="citation" data-value="@inproceedings{gillick2019learning,
  title={Learning to groove with inverse sequence transformations},
  author={Gillick, Jon and Roberts, Adam and Engel, Jesse and Eck, Douglas and Bamman, David},
  booktitle={International Conference on Machine Learning},
  pages={2269--2279},
  year={2019},
  organization={PMLR}
}" data-unstructured-value="" data-custom-label="" class="citation">[26]</a> (evaluated using the model checkpoint provided <a href="http://goo.gl/magenta/groovae-colab">here</a><a href="#fn-4-bottom" id="fn-4-inline" data-node-type="footnote" data-value="&lt;p id=&quot;n46mnufv0bv&quot;&gt;http://goo.gl/magenta/groovae-colab&lt;/p&gt;" date-structured-value="" class="footnote">5</a> by Google Magenta). This evaluation resulted in a hit accuracy of 87.42%, calculated over the test subset. In order to narrow down the scope of our model selection, we selected the runs with over 88% test hit accuracy. This resulted in 12 hyper-parameter configuration candidates. In order to further reduce our selection, 4 runs out of these 12 candidates with the lowest offset loss were chosen, in an attempt to improve offset variability. </p><p id="nnb3d8ionu6"><a id="nc6xxmejus1" href="#n1hdspr5ywi" class="reference" data-node-type="reference" data-target-id="n1hdspr5ywi">Image 10</a> shows the hyper-parameters of the selected runs, together with the offset loss and hit accuracy values over the test set. All of these models have been trained for 100 epochs (no stop condition has been implemented). Throughout the training process, we used an SGD optimizer with a constant learning rate. </p><figure id="n1hdspr5ywi" data-node-type="image" data-size="88" data-align="center" data-url="https://assets.pubpub.org/31nkvznx/11642751472343.png" data-caption="&lt;p id=&quot;nqlix82dj7h&quot;&gt;The final set of hyper-parameter candidates&lt;/p&gt;" data-alt-text=""><img srcSet="" src="https://assets.pubpub.org/31nkvznx/11642751472343.png" alt="" aria-labelledby="n1hdspr5ywi-figure-caption"/><figcaption id="n1hdspr5ywi-figure-caption"><div><strong spellcheck="false">Image 10</strong><div><p id="nqlix82dj7h">The final set of hyper-parameter candidates</p></div></div></figcaption></figure><p id="nkunvgbj28k">In order to avoid under/over-fitting, we retrained the final four models using the early stopping regularization method described in <a href="#citation-JDWrinWu9H-bottom" id="citation-JDWrinWu9H-inline" data-node-type="citation" data-value="@book{goodfellow2016deep,
  title={Deep learning},
  author={Goodfellow, Ian and Bengio, Yoshua and Courville, Aaron},
  year={2016},
  publisher={MIT press}
}" data-unstructured-value="" data-custom-label="" class="citation">[29]</a>. The progression of loss values for the re-trained models is shown in <a id="nyz5wrbgvyj" href="#ns1qe2gmp9f" class="reference" data-node-type="reference" data-target-id="ns1qe2gmp9f">Image 11</a>.</p><figure id="ns1qe2gmp9f" data-node-type="image" data-size="59" data-align="center" data-url="https://assets.pubpub.org/u5a0bmtg/51642752137197.png" data-caption="&lt;p id=&quot;nld91fyipfo&quot;&gt;Training vs. Test loss over training epoch of the four selected and re-trained models (smoothed with exponential running average)&lt;/p&gt;" data-alt-text=""><img srcSet="" src="https://assets.pubpub.org/u5a0bmtg/51642752137197.png" alt="" aria-labelledby="ns1qe2gmp9f-figure-caption"/><figcaption id="ns1qe2gmp9f-figure-caption"><div><strong spellcheck="false">Image 11</strong><div><p id="nld91fyipfo">Training vs. Test loss over training epoch of the four selected and re-trained models (smoothed with exponential running average)</p></div></div></figcaption></figure><p id="nlxr1vu0kvb">As a result, the models chosen for the final evaluation are:</p><ul id="n4d8qv0p1vd"><li><p id="nybdo27l2x2"><a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/2cgu9h6u">rosy-durian-248</a>, epoch 26</p></li><li><p id="nziwlh5jx38"><a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/35c9fysk">solar-shadow-247</a>, epoch 41</p></li><li><p id="npsjthx1qdw"><a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/vxuuth1y">misunderstood-bush-246</a>, epoch 26</p></li><li><p id="nv47kxvr500"><a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/v7p0se6e">hopeful-gorge-252</a>, epoch 90</p></li></ul><p id="n312a8tkrug">The hyper-parameters of the selected models are shown in <a id="n0g2fjwpjmc" href="#nca6ltv0pff" class="reference" data-node-type="reference" data-target-id="nca6ltv0pff">Table 4</a>.</p><p id="nhye1u827eq"><strong>Hyper-parameter Configurations for the Final Selected Models (all models trained using SGD optimizer)</strong></p><table id="nca6ltv0pff"><caption>Table 4</caption><tbody><tr><th data-colwidth="135"><p id="n9mx1uxqx1d" data-text-align="center"><strong>Model</strong></p></th><th><p id="nlmvrfgktul" data-text-align="center"><a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/2cgu9h6u" target="_blank">rosy-durian-248</a></p></th><th><p id="ni8g0kpixp8" data-text-align="center"><a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/vxuuth1y" target="_blank">misunderstood-bush-246</a></p></th><th><p id="n7703gw95pa" data-text-align="center"><a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/35c9fysk" target="_blank">solar-shadow-247</a></p></th><th><p id="nu3sk1j7dh2" data-text-align="center"><a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/v7p0se6e" target="_blank">hopeful-gorge-252</a></p></th></tr><tr><td data-colwidth="135"><p id="nvpyun1vfoo" data-text-align="center"><strong>Batch Size</strong></p></td><td><p id="nj7e1u1rfx7" data-text-align="center">16</p></td><td><p id="nyv1rxa814h" data-text-align="center">16</p></td><td><p id="nqc0pmzctjq" data-text-align="center">16</p></td><td><p id="nir662qwm1k" data-text-align="center">16</p></td></tr><tr><td data-colwidth="135"><p id="nptkhyxb0ma" data-text-align="center"><strong>d model</strong></p></td><td><p id="nrjhopvqq4z" data-text-align="center">512</p></td><td><p id="nkc340ujpah" data-text-align="center">128</p></td><td><p id="ni5o11fjz1q" data-text-align="center">128</p></td><td><p id="n5vmv2cm4fl" data-text-align="center">512</p></td></tr><tr><td data-colwidth="135"><p id="nhfd4n3zbya" data-text-align="center"><strong>dim forward</strong></p></td><td><p id="nt20cqdayoa" data-text-align="center">16</p></td><td><p id="nk2chnpq6ov" data-text-align="center">128</p></td><td><p id="nk9efiuyq02" data-text-align="center">16</p></td><td><p id="nm0zvv6qqvm" data-text-align="center">64</p></td></tr><tr><td data-colwidth="135"><p id="nqx4oriaxk2" data-text-align="center"><strong>n heads</strong></p></td><td><p id="njc0oxpai5c" data-text-align="center">4</p></td><td><p id="nhm67g8u0xy" data-text-align="center">4</p></td><td><p id="nc4c4jzpn0n" data-text-align="center">1</p></td><td><p id="nhido6vxuk6" data-text-align="center">4</p></td></tr><tr><td data-colwidth="135"><p id="n8z5aw1gk5h" data-text-align="center"><strong>n layers</strong></p></td><td><p id="nq7nsobwwev" data-text-align="center">6</p></td><td><p id="ns27vmjnzcw" data-text-align="center">11</p></td><td><p id="nvzbe86tmpf" data-text-align="center">11</p></td><td><p id="n2hz7zb2g60" data-text-align="center">8</p></td></tr><tr><td data-colwidth="135"><p id="n4neidf34gk" data-text-align="center"><strong>dropout</strong></p></td><td><p id="nm2mdiekqim" data-text-align="center">0.109</p></td><td><p id="nw2y0656897" data-text-align="center">0.104</p></td><td><p id="ntll222lip0" data-text-align="center">0.1594</p></td><td><p id="nqxn30tj4o5" data-text-align="center">0.171</p></td></tr><tr><td data-colwidth="135"><p id="nkm4j3j6lgv" data-text-align="center"><strong>learning rate </strong></p></td><td><p id="n9knkr9v0en" data-text-align="center">0.039</p></td><td><p id="nc8gix2qz21" data-text-align="center">0.037</p></td><td><p id="n504scak0fv" data-text-align="center">0.037</p></td><td><p id="nfwaxrqsbe0" data-text-align="center">0.007</p></td></tr><tr><td data-colwidth="135"><p id="nzh30w9bwb6" data-text-align="center"><math-inline className="math-node"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">p</span></span></span></span></math-inline><a href="#fn-5-bottom" id="fn-5-inline" data-node-type="footnote" data-value="&lt;p id=&quot;nadk53bkatr&quot;&gt;Hit loss multiplier in Equation 7&lt;/p&gt;" date-structured-value="" class="footnote">6</a></p></td><td><p id="nheyibwgw28" data-text-align="center">0.53</p></td><td><p id="nue7u4qlw0h" data-text-align="center">0.27</p></td><td><p id="nk01yx93itq" data-text-align="center">0.49</p></td><td><p id="npfqj8c4bzj" data-text-align="center">0.33</p></td></tr></tbody></table><p id="nuw3ht0jbbf">The source code and the trained checkpoints are available <a href="https://github.com/AnonUserGit/TransformerVelGroove2Performance">here</a><a href="#fn-6-bottom" id="fn-6-inline" data-node-type="footnote" data-value="&lt;p&gt;https://github.com/AnonUserGit/TransformerVelGroove2Performance&lt;/p&gt;" date-structured-value="" class="footnote">7</a>. Moreover, an interactive Google Colab notebook to use the trained models to generate samples from MIDI  is also available <a href="https://github.com/AnonUserGit/TransformerVelGroove2Performance/blob/main/NIME2022_Demo.ipynb">here</a><a href="#fn-7-bottom" id="fn-7-inline" data-node-type="footnote" data-value="&lt;p id=&quot;n1ezix6qctz&quot;&gt;https://github.com/AnonUserGit/TransformerVelGroove2Performance/blob/main/NIME2022_Demo.ipynb&lt;/p&gt;" date-structured-value="" class="footnote">8</a>.</p><h1 id="evaluation">Evaluation</h1><p id="neoksqt3mg3">In this section, we provide a number of objective evaluations of the final selected models. Given that the current work was a preliminary study of the effectiveness of transformer architectures in generating drum loops (using a direct representation of inputs/outputs - i.e. HVO format), our intention was not to generate the most likable loops, rather the goal was to train a number of models that are reasonably capable of generalizing the training set. To this end, we did not carry out any listening tests to evaluate the subjective likability of the generated loops. </p><p id="njz5kholvtt">It should be noted that the following evaluations are conducted on the validation set, as the training set had already been used in the hyper-parameter tuning procedures. </p><p id="nu3vzbjg69i">The first criteria we used for evaluating the different models was hit accuracy.  <a id="nel6qfxwwst" href="#np4av5uaedt" class="reference" data-node-type="reference" data-target-id="np4av5uaedt">Table 5</a> summarizes these results.</p><p id="n2cf9bsmljt"><strong>The validation set accuracy of predicting Hits</strong></p><table id="np4av5uaedt"><caption>Table 5</caption><tbody><tr><th><p id="nrybrsz9u59" data-text-align="center">Model</p></th><th data-colwidth="131"><p id="ncjmjyctguf" data-text-align="center"><a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/35c9fysk" target="_blank">solar-shadow-247</a></p></th><th><p id="n0i7sqp1gqi" data-text-align="center"><a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/2cgu9h6u" target="_blank">rosy-durian-248</a></p></th><th><p id="nsx9dp3itx1" data-text-align="center"><a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/vxuuth1y" target="_blank">misunderstood-bush-246</a></p></th><th><p id="nfs8t5jpgho" data-text-align="center"><a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/v7p0se6e" target="_blank">hopeful-gorge-252</a></p></th></tr><tr><td><p id="n1uwjx5dhcc" data-text-align="center">Batch Size</p></td><td data-colwidth="131"><p id="naarqlxlr2c" data-text-align="center">16</p></td><td><p id="nglncq56oa2" data-text-align="center">16</p></td><td><p id="niyjj8a0s4h" data-text-align="center">16</p></td><td><p id="n169kibmeqe" data-text-align="center">16</p></td></tr><tr><td><p id="nfl7tlbs6ju" data-text-align="center">d model</p></td><td data-colwidth="131"><p id="njujacp9r76" data-text-align="center">128</p></td><td><p id="nb40t5h8jc1" data-text-align="center">512</p></td><td><p id="nz21no7gkgd" data-text-align="center">128</p></td><td><p id="ngynsdy87wp" data-text-align="center">512</p></td></tr><tr><td><p id="nd7a1wyymz3" data-text-align="center">dim forward</p></td><td data-colwidth="131"><p id="nu31rvolncp" data-text-align="center">16</p></td><td><p id="nwpbwfs7ltw" data-text-align="center">16</p></td><td><p id="nq7ev57qxdd" data-text-align="center">128</p></td><td><p id="nus2fn9dvq2" data-text-align="center">64</p></td></tr><tr><td><p id="n6rcskwx5dh" data-text-align="center">n heads</p></td><td data-colwidth="131"><p id="n8aylflz5rn" data-text-align="center">1</p></td><td><p id="nim6pg5xbox" data-text-align="center">4</p></td><td><p id="n6jblb066uy" data-text-align="center">4</p></td><td><p id="nfto0zumqtr" data-text-align="center">4</p></td></tr><tr><td><p id="nt6odzzu63y" data-text-align="center">n layers</p></td><td data-colwidth="131"><p id="n2jirodyr6w" data-text-align="center">11</p></td><td><p id="nn02d9kvq43" data-text-align="center">6</p></td><td><p id="nqt8rp67wo9" data-text-align="center">11</p></td><td><p id="no9svo9jyql" data-text-align="center">8</p></td></tr><tr><td><p id="nufcsf4nxw3" data-text-align="center"><em>Average training time per epoch (min)</em><a href="#fn-8-bottom" id="fn-8-inline" data-node-type="footnote" data-value="&lt;p id=&quot;nbhks31zblh&quot;&gt;&lt;em&gt;&lt;strong&gt;Using an Nvidia &lt;/strong&gt;&lt;/em&gt;&lt;strong&gt;Tesla T4 GPU (&lt;/strong&gt;https://www.nvidia.com/en-us/data-center/tesla-t4/)&lt;/p&gt;" date-structured-value="" class="footnote">9</a><em> </em></p></td><td data-colwidth="131"><p id="nsfbnyo4bpf" data-text-align="center"><br/>2.44</p></td><td><p id="nzyl18hgzsw" data-text-align="center"><br/>2.97</p></td><td><p id="n6tnfdrloa0" data-text-align="center"><br/>2.96</p></td><td><p id="n2aug5mfhun" data-text-align="center"><br/>2.22</p></td></tr><tr><th><p id="nuhcwtdf0vz" data-text-align="center"><strong>Accuracy (%)</strong></p></th><th data-colwidth="131"><p id="nsgz9n6ufxj" data-text-align="center"><strong>88.15</strong></p></th><th><p id="nufbg9jx8dm" data-text-align="center"><strong>91.2</strong></p></th><th><p id="n4399punwk1" data-text-align="center"><strong>90.56</strong></p></th><th><p id="n85ya9jf0jc" data-text-align="center"><strong>89.07</strong></p></th></tr></tbody></table><p id="n5ap91kypjr">A few generated samples are available in <a id="nnp61tlad41" href="#n6m5p0a3n8f" class="reference" data-node-type="reference" data-target-id="n6m5p0a3n8f">Table 6</a> to <a id="nl3i2ra2ach" href="#njtgrc5iza3" class="reference" data-node-type="reference" data-target-id="njtgrc5iza3">Table 10</a> (more samples are available <a href="https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/Audios-selected-models-vs-GrooVAE--VmlldzoxNDc3ODM4">here</a><a href="#fn-9-bottom" id="fn-9-inline" data-node-type="footnote" data-value="&lt;p&gt;https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/Audios-selected-models-vs-GrooVAE--VmlldzoxNDc3ODM4&lt;/p&gt;" date-structured-value="" class="footnote">10</a>). Based on our subjective evaluation of the generations, we believe that the drum patterns predicted by <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/2cgu9h6u">rosy-durian-248</a> and <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/vxuuth1y">misunderstood-bush-246</a> are acceptably closer to the ground truth patterns.</p><p id="n9gydqvdot0"><strong> Validation Set Synthesized Samples for  rock_drummer7_session2_8</strong></p><table id="n6m5p0a3n8f"><caption>Table 6</caption><tbody><tr><th data-colwidth="322"><p id="nx8ci4fje4v">Monotonic Groove</p></th><th data-colwidth="319"><p id="nt12jcvoieu">Ground Truth</p></th></tr><tr><td data-colwidth="322"><figure id="nz7p2h0vp82" data-node-type="audio" data-size="31" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/5ubpqc4k/41643030189284.wav" alt="" aria-describedby="nz7p2h0vp82-figure-caption"></audio><figcaption id="nz7p2h0vp82-figure-caption"><div><div></div></div></figcaption></figure></td><td data-colwidth="319"><figure id="ndqy2zehy7t" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/7dyn5in7/71643030667251.wav" alt="" aria-describedby="ndqy2zehy7t-figure-caption"></audio><figcaption id="ndqy2zehy7t-figure-caption"><div><div></div></div></figcaption></figure></td></tr><tr><th data-colwidth="322"><p id="ngvcd3mci2r">rosy-durian</p></th><th data-colwidth="319"><p id="nruyumciksy">misunderstood-bush</p></th></tr><tr><td data-colwidth="322"><figure id="n2gkiqccgdm" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/lq1e35ow/21643030711383.wav" alt="" aria-describedby="n2gkiqccgdm-figure-caption"></audio><figcaption id="n2gkiqccgdm-figure-caption"><div><div></div></div></figcaption></figure></td><td data-colwidth="319"><figure id="n4ymhxdtbtg" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/wnmwpvrp/41643030753558.wav" alt="" aria-describedby="n4ymhxdtbtg-figure-caption"></audio><figcaption id="n4ymhxdtbtg-figure-caption"><div><div></div></div></figcaption></figure></td></tr></tbody></table><p id="nyvrs7lcgyh"><strong>Validation Set Synthesized Samples for  Jazz_drummer3_session1_39</strong></p><table id="nhopete0xdw"><caption>Table 7</caption><tbody><tr><th data-colwidth="322"><p id="nurpbwsvn2g">Monotonic Groove</p></th><th data-colwidth="319"><p id="nhd3ef1nyuv">Ground Truth</p></th></tr><tr><td data-colwidth="322"><figure id="njyphj3uwm3" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/vbj5kh52/51643034412922.wav" alt="" aria-describedby="njyphj3uwm3-figure-caption"></audio><figcaption id="njyphj3uwm3-figure-caption"><div><div></div></div></figcaption></figure></td><td data-colwidth="319"><figure id="ndzrg0k4ayr" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/h5kdd9h6/11643034432310.wav" alt="" aria-describedby="ndzrg0k4ayr-figure-caption"></audio><figcaption id="ndzrg0k4ayr-figure-caption"><div><div></div></div></figcaption></figure></td></tr><tr><th data-colwidth="322"><p id="nwj57jrumld">rosy-durian</p></th><th data-colwidth="319"><p id="n8irfztnbx2">misunderstood-bush</p></th></tr><tr><td data-colwidth="322"><figure id="n1cn7by0csv" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/gsv4anhe/01643034176293.wav" alt="" aria-describedby="n1cn7by0csv-figure-caption"></audio><figcaption id="n1cn7by0csv-figure-caption"><div><div></div></div></figcaption></figure></td><td data-colwidth="319"><figure id="nsvk6mbd8yu" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/mfimnpjv/31643034306254.wav" alt="" aria-describedby="nsvk6mbd8yu-figure-caption"></audio><figcaption id="nsvk6mbd8yu-figure-caption"><div><div></div></div></figcaption></figure></td></tr></tbody></table><p id="nasg2ldznij"><strong>Validation Set Synthesized Samples for funk_drummer1_session3_15</strong></p><table id="n6yc3figdbq"><caption>Table 8</caption><tbody><tr><th data-colwidth="322"><p id="nemkit2gr38">Monotonic Groove</p></th><th data-colwidth="319"><p id="nhyzzsxxn4r">Ground Truth</p></th></tr><tr><td data-colwidth="322"><figure id="n394ospx8mr" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/g05bxwja/41643549957185.wav" alt="" aria-describedby="n394ospx8mr-figure-caption"></audio><figcaption id="n394ospx8mr-figure-caption"><div><div></div></div></figcaption></figure></td><td data-colwidth="319"><figure id="ny9oksh5xlj" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/1rpo7caj/21643550042038.wav" alt="" aria-describedby="ny9oksh5xlj-figure-caption"></audio><figcaption id="ny9oksh5xlj-figure-caption"><div><div></div></div></figcaption></figure></td></tr><tr><th data-colwidth="322"><p id="ndznj0p803n">rosy-durian</p></th><th data-colwidth="319"><p id="n070a7xsi0o">misunderstood-bush</p></th></tr><tr><td data-colwidth="322"><figure id="n74vogtdf6y" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/louwfcms/71643550105925.wav" alt="" aria-describedby="n74vogtdf6y-figure-caption"></audio><figcaption id="n74vogtdf6y-figure-caption"><div><div></div></div></figcaption></figure></td><td data-colwidth="319"><figure id="nfpusrkhfuo" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/j37spb3q/71643550130629.wav" alt="" aria-describedby="nfpusrkhfuo-figure-caption"></audio><figcaption id="nfpusrkhfuo-figure-caption"><div><div></div></div></figcaption></figure></td></tr></tbody></table><p id="nglhjh6lvv1"><strong>Validation Set Synthesized Samples for hiphop_drummer3_session2_25 </strong></p><table id="nk6fjlwog2g"><caption>Table 9</caption><tbody><tr><th data-colwidth="322"><p id="n2e19dqiwcy">Monotonic Groove</p></th><th data-colwidth="319"><p id="n6ufrr9pay6">Ground Truth</p></th></tr><tr><td data-colwidth="322"><figure id="nzyv1inyf7o" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/1preey1r/51643550492423.wav" alt="" aria-describedby="nzyv1inyf7o-figure-caption"></audio><figcaption id="nzyv1inyf7o-figure-caption"><div><div></div></div></figcaption></figure></td><td data-colwidth="319"><figure id="njxpv314ogk" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/gza5gqey/11643550531691.wav" alt="" aria-describedby="njxpv314ogk-figure-caption"></audio><figcaption id="njxpv314ogk-figure-caption"><div><div></div></div></figcaption></figure></td></tr><tr><th data-colwidth="322"><p id="nchlw6gwt8t">rosy-durian</p></th><th data-colwidth="319"><p id="nga6kj8qydo">misunderstood-bush</p></th></tr><tr><td data-colwidth="322"><figure id="n7hp3s31j7h" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/hy5edljq/01643550563580.wav" alt="" aria-describedby="n7hp3s31j7h-figure-caption"></audio><figcaption id="n7hp3s31j7h-figure-caption"><div><div></div></div></figcaption></figure></td><td data-colwidth="319"><figure id="notm95hjpwq" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/i97i9jwc/21643550602418.wav" alt="" aria-describedby="notm95hjpwq-figure-caption"></audio><figcaption id="notm95hjpwq-figure-caption"><div><div></div></div></figcaption></figure></td></tr></tbody></table><p id="nmx2g096650"><strong>Validation Set Synthesized Samples for afrobeat_drummer8_session1_16</strong></p><table id="njtgrc5iza3"><caption>Table 10</caption><tbody><tr><th data-colwidth="322"><p id="n8ruuo0fo3s">Monotonic Groove</p></th><th data-colwidth="319"><p id="ntz91a22aka">Ground Truth</p></th></tr><tr><td data-colwidth="322"><figure id="nops6su9n6i" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/zec1k4nw/31643550964547.wav" alt="" aria-describedby="nops6su9n6i-figure-caption"></audio><figcaption id="nops6su9n6i-figure-caption"><div><div></div></div></figcaption></figure></td><td data-colwidth="319"><figure id="n9egzikua5h" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/q2hk2z63/71643550911772.wav" alt="" aria-describedby="n9egzikua5h-figure-caption"></audio><figcaption id="n9egzikua5h-figure-caption"><div><div></div></div></figcaption></figure></td></tr><tr><th data-colwidth="322"><p id="n4r8d0hsd29">rosy-durian</p></th><th data-colwidth="319"><p id="nbbwm3avqtz">misunderstood-bush</p></th></tr><tr><td data-colwidth="322"><figure id="nckmdan4g82" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/a5i9z2u6/51643550996599.wav" alt="" aria-describedby="nckmdan4g82-figure-caption"></audio><figcaption id="nckmdan4g82-figure-caption"><div><div></div></div></figcaption></figure></td><td data-colwidth="319"><figure id="nrqnx57jxjy" data-node-type="audio" data-size="50" data-align="full"><audio controls="" preload="metadata" src="https://assets.pubpub.org/u1wk54cf/71643551056124.wav" alt="" aria-describedby="nrqnx57jxjy-figure-caption"></audio><figcaption id="nrqnx57jxjy-figure-caption"><div><div></div></div></figcaption></figure></td></tr></tbody></table><p id="nlgbz5b0fw0">In the absence of qualitative analysis of the generated patterns using a listening test, in order to better understand the generated data, we employed the velocity heat maps introduced above. These plots were generated on a per voice basis (analyzed across genres). <a id="nz3ge99sh0q" href="#n8hegaw6k26" class="reference" data-node-type="reference" data-target-id="n8hegaw6k26">Image 12</a> visualizes the generations of kick, snare, and closed hi-hat instruments  (see the rest of the heat maps <a href="https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/Velocity-heatmaps-selected-models-vs-GrooVAE--VmlldzoxNDc3ODQ4">here</a><a href="#fn-10-bottom" id="fn-10-inline" data-node-type="footnote" data-value="&lt;p id=&quot;nsikxmzs2zt&quot;&gt;https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/Velocity-heatmaps-selected-models-vs-GrooVAE--VmlldzoxNDc3ODQ4&lt;/p&gt;" date-structured-value="" class="footnote">11</a>). </p><figure id="ng4axcvc30a" data-node-type="image" data-size="90" data-align="center" data-url="https://assets.pubpub.org/8d108vwe/61643552789834.jpeg" data-caption="" data-alt-text=""><img srcSet="https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6IjhkMTA4dndlLzYxNjQzNTUyNzg5ODM0LmpwZWciLCJlZGl0cyI6eyJyZXNpemUiOnsid2lkdGgiOjgwMCwiZml0IjoiaW5zaWRlIiwid2l0aG91dEVubGFyZ2VtZW50Ijp0cnVlfX19 1x,https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6IjhkMTA4dndlLzYxNjQzNTUyNzg5ODM0LmpwZWciLCJlZGl0cyI6eyJyZXNpemUiOnsid2lkdGgiOjE2MDAsImZpdCI6Imluc2lkZSIsIndpdGhvdXRFbmxhcmdlbWVudCI6dHJ1ZX19fQ== 2x,https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6IjhkMTA4dndlLzYxNjQzNTUyNzg5ODM0LmpwZWciLCJlZGl0cyI6eyJyZXNpemUiOnsid2lkdGgiOjI0MDAsImZpdCI6Imluc2lkZSIsIndpdGhvdXRFbmxhcmdlbWVudCI6dHJ1ZX19fQ== 3x" src="https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6IjhkMTA4dndlLzYxNjQzNTUyNzg5ODM0LmpwZWciLCJlZGl0cyI6eyJyZXNpemUiOnsid2lkdGgiOjgwMCwiZml0IjoiaW5zaWRlIiwid2l0aG91dEVubGFyZ2VtZW50Ijp0cnVlfX19" alt=""/><figcaption id="ng4axcvc30a-figure-caption"><div><div></div></div></figcaption></figure><figure id="nc4d6tqs5mg" data-node-type="image" data-size="90" data-align="center" data-url="https://assets.pubpub.org/lwss2jl4/71643552817216.jpeg" data-caption="" data-alt-text=""><img srcSet="https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6Imx3c3Myamw0LzcxNjQzNTUyODE3MjE2LmpwZWciLCJlZGl0cyI6eyJyZXNpemUiOnsid2lkdGgiOjgwMCwiZml0IjoiaW5zaWRlIiwid2l0aG91dEVubGFyZ2VtZW50Ijp0cnVlfX19 1x,https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6Imx3c3Myamw0LzcxNjQzNTUyODE3MjE2LmpwZWciLCJlZGl0cyI6eyJyZXNpemUiOnsid2lkdGgiOjE2MDAsImZpdCI6Imluc2lkZSIsIndpdGhvdXRFbmxhcmdlbWVudCI6dHJ1ZX19fQ== 2x,https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6Imx3c3Myamw0LzcxNjQzNTUyODE3MjE2LmpwZWciLCJlZGl0cyI6eyJyZXNpemUiOnsid2lkdGgiOjI0MDAsImZpdCI6Imluc2lkZSIsIndpdGhvdXRFbmxhcmdlbWVudCI6dHJ1ZX19fQ== 3x" src="https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6Imx3c3Myamw0LzcxNjQzNTUyODE3MjE2LmpwZWciLCJlZGl0cyI6eyJyZXNpemUiOnsid2lkdGgiOjgwMCwiZml0IjoiaW5zaWRlIiwid2l0aG91dEVubGFyZ2VtZW50Ijp0cnVlfX19" alt=""/><figcaption id="nc4d6tqs5mg-figure-caption"><div><div></div></div></figcaption></figure><figure id="n8hegaw6k26" data-node-type="image" data-size="90" data-align="center" data-url="https://assets.pubpub.org/5ishppi3/01643552852199.jpeg" data-caption="&lt;p id=&quot;n9p334zmlyg&quot;&gt;Velocity Heat maps across different genres for Kick, Snare, and Closed Hi-hat calculated over the validation set (interactive versions are available &lt;a href=&quot;https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/Velocity-heatmaps-selected-models-vs-GrooVAE--VmlldzoxNDc3ODQ4&quot;&gt;here&lt;/a&gt;)&lt;/p&gt;" data-alt-text=""><img srcSet="https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6IjVpc2hwcGkzLzAxNjQzNTUyODUyMTk5LmpwZWciLCJlZGl0cyI6eyJyZXNpemUiOnsid2lkdGgiOjgwMCwiZml0IjoiaW5zaWRlIiwid2l0aG91dEVubGFyZ2VtZW50Ijp0cnVlfX19 1x,https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6IjVpc2hwcGkzLzAxNjQzNTUyODUyMTk5LmpwZWciLCJlZGl0cyI6eyJyZXNpemUiOnsid2lkdGgiOjE2MDAsImZpdCI6Imluc2lkZSIsIndpdGhvdXRFbmxhcmdlbWVudCI6dHJ1ZX19fQ== 2x,https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6IjVpc2hwcGkzLzAxNjQzNTUyODUyMTk5LmpwZWciLCJlZGl0cyI6eyJyZXNpemUiOnsid2lkdGgiOjI0MDAsImZpdCI6Imluc2lkZSIsIndpdGhvdXRFbmxhcmdlbWVudCI6dHJ1ZX19fQ== 3x" src="https://resize-v3.pubpub.org/eyJidWNrZXQiOiJhc3NldHMucHVicHViLm9yZyIsImtleSI6IjVpc2hwcGkzLzAxNjQzNTUyODUyMTk5LmpwZWciLCJlZGl0cyI6eyJyZXNpemUiOnsid2lkdGgiOjgwMCwiZml0IjoiaW5zaWRlIiwid2l0aG91dEVubGFyZ2VtZW50Ijp0cnVlfX19" alt="" aria-labelledby="n8hegaw6k26-figure-caption"/><figcaption id="n8hegaw6k26-figure-caption"><div><strong spellcheck="false">Image 12</strong><div><p id="n9p334zmlyg">Velocity Heat maps across different genres for Kick, Snare, and Closed Hi-hat calculated over the validation set (interactive versions are available <a href="https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/Velocity-heatmaps-selected-models-vs-GrooVAE--VmlldzoxNDc3ODQ4">here</a>)</p></div></div></figcaption></figure><p id="nzq6wc2ntjm">We were also interested to know how the generations develop throughout different epochs. Animations provided in <a id="n2n6191f8zl" href="#nravo1d5jd8" class="reference" data-node-type="reference" data-target-id="nravo1d5jd8">Image 13</a> and <a id="nasrfzfbiyb" href="#n0dcjteih0w" class="reference" data-node-type="reference" data-target-id="n0dcjteih0w">Image 14</a> illustrate  the development of the velocity heat maps for two runs, <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/2cgu9h6u">rosy-durian-248</a> and <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/v7p0se6e">hopeful-gorge-252</a>. </p><figure id="nravo1d5jd8" data-node-type="image" data-size="100" data-align="center" data-url="https://assets.pubpub.org/f7m0r3g6/01643055794268.gif" data-caption="&lt;p id=&quot;ne12sbmbbmw&quot;&gt;Evolutions of velocity heat-maps across training epochs for run &lt;a href=&quot;https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/2cgu9h6u&quot;&gt;rosy-durian-248&lt;/a&gt; (trained for 26 epochs)&lt;/p&gt;" data-alt-text=""><img srcSet="" src="https://assets.pubpub.org/f7m0r3g6/01643055794268.gif" alt="" aria-labelledby="nravo1d5jd8-figure-caption"/><figcaption id="nravo1d5jd8-figure-caption"><div><strong spellcheck="false">Image 13</strong><div><p id="ne12sbmbbmw">Evolutions of velocity heat-maps across training epochs for run <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/2cgu9h6u">rosy-durian-248</a> (trained for 26 epochs)</p></div></div></figcaption></figure><figure id="n0dcjteih0w" data-node-type="image" data-size="100" data-align="center" data-url="https://assets.pubpub.org/qnjtgidn/21643055783780.gif" data-caption="&lt;p id=&quot;nikyqry3cpf&quot;&gt;Evolutions of velocity heat-maps across training epochs for run &lt;a href=&quot;https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/v7p0se6e&quot;&gt;hopeful-gorge-252&lt;/a&gt; (trained for 90 epochs)&lt;/p&gt;" data-alt-text=""><img srcSet="" src="https://assets.pubpub.org/qnjtgidn/21643055783780.gif" alt="" aria-labelledby="n0dcjteih0w-figure-caption"/><figcaption id="n0dcjteih0w-figure-caption"><div><strong spellcheck="false">Image 14</strong><div><p id="nikyqry3cpf">Evolutions of velocity heat-maps across training epochs for run <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/v7p0se6e">hopeful-gorge-252</a> (trained for 90 epochs)</p></div></div></figcaption></figure><p id="nych1qmv3h5">The first observation made from the above images is that initially, the models start generating constant velocity hits closer to the 16th note grid lines. However, as training advances, the hits start moving away from the gridlines and start expanding vertically (different velocity values). In other words, in the earlier epochs, the model learns mostly where the hits should be located, without learning much about the velocity or offset of the events. </p><p id="nukgh8yesh3">Moreover, these animations clearly show that the hits corresponding to the five least frequent voices (low/mid/high toms, the crash, and open hi-hat), tend to be generated in the last few epochs of the run. Conversely, the models seem to be more confident in generating  kicks, snares, closed hats, and rides; we strongly suspect that this is a consequence of the over-representation of these voices in the dataset (see <a id="nb539c38ya1" href="#nrswaqw1vtm" class="reference" data-node-type="reference" data-target-id="nrswaqw1vtm">Table 2</a>). These findings were confirmed to be true for all four final selected models (refer to <a href="https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/Evolution-of-velocity-heatmaps-during-training-validation-set---VmlldzoxNDc3ODM1">here</a><a href="#fn-11-bottom" id="fn-11-inline" data-node-type="footnote" data-value="&lt;p id=&quot;nd5ope2oa4e&quot;&gt;https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/Evolution-of-velocity-heatmaps-during-training-validation-set---VmlldzoxNDc3ODM1&lt;/p&gt;" date-structured-value="" class="footnote">12</a> to see the same plots as <a id="n9dperoxy1p" href="#nravo1d5jd8" class="reference" data-node-type="reference" data-target-id="nravo1d5jd8">Image 13</a> for all four runs). The distribution of the number of instruments in the ground truth and the predictions are shown in <a id="n5jcg8ddljx" href="#ndwmvddlq4j" class="reference" data-node-type="reference" data-target-id="ndwmvddlq4j">Image 15</a>.</p><figure id="ndwmvddlq4j" data-node-type="image" data-size="76" data-align="center" data-url="https://assets.pubpub.org/8h0u4aiz/71643057169885.png" data-caption="&lt;p id=&quot;nzsdodqxgpg&quot;&gt;Distribution of the number of instruments across genres for the validation set ground truth data, &lt;a href=&quot;https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/2cgu9h6u&quot;&gt;rosy-durian-248&lt;/a&gt; run, and &lt;a href=&quot;https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/zc69p7e3&quot;&gt;GrooVAE&lt;/a&gt;&lt;/p&gt;&lt;p id=&quot;neua7bz2cyq&quot;&gt;&lt;/p&gt;" data-alt-text=""><img srcSet="" src="https://assets.pubpub.org/8h0u4aiz/71643057169885.png" alt="" aria-labelledby="ndwmvddlq4j-figure-caption"/><figcaption id="ndwmvddlq4j-figure-caption"><div><strong spellcheck="false">Image 15</strong><div><p id="nzsdodqxgpg">Distribution of the number of instruments across genres for the validation set ground truth data, <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/2cgu9h6u">rosy-durian-248</a> run, and <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/zc69p7e3">GrooVAE</a></p><p id="neua7bz2cyq"></p></div></div></figcaption></figure><p id="nlrnve2clc8">While the ground truth data seems to contain a noticeable amount of examples with less than three or more than four instruments, both <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/2cgu9h6u">rosy-durian-248</a> and <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/zc69p7e3">GrooVAE</a> models seem to mostly generate samples with only three or four voices. However, the <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/zc69p7e3">GrooVAE</a> model seems to be more capable of generating samples that have more than four voices. The velocity heat maps for hi- and mid- toms further illustrate the better performance of <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/zc69p7e3">GrooVAE</a> in generating more voices. </p><figure id="nzju36p9gsy" data-node-type="image" data-size="100" data-align="center" data-url="https://assets.pubpub.org/26a4nauo/31643060129483.jpeg" data-caption="&lt;p id=&quot;nnw4e5r00f8&quot;&gt;A comparison of the mid- (right plots) and hi- (left plots) tom generations between &lt;a href=&quot;https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/2cgu9h6u&quot;&gt;rosy-durian-248&lt;/a&gt; (bottom plots) and &lt;a href=&quot;https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/zc69p7e3&quot;&gt;GrooVAE&lt;/a&gt; (top plots).&lt;/p&gt;" data-alt-text=""><img srcSet="" src="https://assets.pubpub.org/26a4nauo/31643060129483.jpeg" alt="" aria-labelledby="nzju36p9gsy-figure-caption"/><figcaption id="nzju36p9gsy-figure-caption"><div><strong spellcheck="false">Image 16</strong><div><p id="nnw4e5r00f8">A comparison of the mid- (right plots) and hi- (left plots) tom generations between <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/2cgu9h6u">rosy-durian-248</a> (bottom plots) and <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/zc69p7e3">GrooVAE</a> (top plots).</p></div></div></figcaption></figure><p id="n218sl3il2s">To analyze the amount of variation between the first and second bars of the generated loops, we calculated a velocity similarity score defined in <a id="nfa6857pf13" href="#nhrb1sp8ueg" class="reference missing" data-node-type="reference" data-target-id="nhrb1sp8ueg">(ref?)</a>. </p><div class="math-node" id="ncjv0jcr6zs"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mstyle mathsize="0.5em"><mi>V</mi><mi>e</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>i</mi><mi>t</mi><mi>y</mi><mspace width="0.24533333333333335em"/><mi>S</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>l</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>y</mi><mspace width="0.24533333333333335em"/><mi>S</mi><mi>c</mi><mi>o</mi><mi>r</mi><mi>e</mi><mo>=</mo><mn>1</mn><mo></mo><munder><mo></mo><mrow><mspace width="0.24533333333333335em"/><mi>i</mi><mo separator="true">,</mo><mspace width="0.24533333333333335em"/><mi>j</mi></mrow></munder><mi mathvariant="normal"></mi><mi>V</mi><mi>e</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>i</mi><mi>t</mi><msub><mi>y</mi><mrow><mspace width="0.24533333333333335em"/><mi>i</mi><mo>+</mo><mn>16</mn><mo separator="true">,</mo><mi>j</mi></mrow></msub><mo></mo><mi>V</mi><mi>e</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>i</mi><mi>t</mi><msub><mi>y</mi><mrow><mspace width="0.24533333333333335em"/><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></msub><mi mathvariant="normal"></mi><mspace linebreak="newline"></mspace><mstyle mathsize="0.5em"><mtext>whereidenotestimestep0to15andjdenotesthevoiceindex</mtext></mstyle></mstyle></mtd><mtd width="50%"></mtd><mtd><mtext>(7)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\tiny Velocity \,Similarity\, Score =  1 - \sum_{\, i,\, j}  |Velocity_{\, i+16, j} - Velocity_{\, i, j}|
\\
\tiny \text{where i denotes time step 0 to 15 and j denotes the voice index} \tag{7}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.44443999999999995em;vertical-align:-0.09722em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.22222em;">V</span><span class="mord mathnormal sizing reset-size6 size1">e</span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.01968em;">l</span><span class="mord mathnormal sizing reset-size6 size1">oc</span><span class="mord mathnormal sizing reset-size6 size1">i</span><span class="mord mathnormal sizing reset-size6 size1">t</span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.03588em;">y</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.05764em;">S</span><span class="mord mathnormal sizing reset-size6 size1">imi</span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.01968em;">l</span><span class="mord mathnormal sizing reset-size6 size1">a</span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.02778em;">r</span><span class="mord mathnormal sizing reset-size6 size1">i</span><span class="mord mathnormal sizing reset-size6 size1">t</span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.03588em;">y</span><span class="mspace sizing reset-size6 size1" style="margin-right:0.24533333333333335em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.05764em;">S</span><span class="mord mathnormal sizing reset-size6 size1">core</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span><span class="mrel sizing reset-size6 size1">=</span><span class="mspace" style="margin-right:0.4088888888888889em;"></span></span><span class="base"><span class="strut" style="height:0.363885em;vertical-align:-0.041665em;"></span><span class="mord sizing reset-size6 size1">1</span><span class="mspace" style="margin-right:0.32711111111111113em;"></span><span class="mbin sizing reset-size6 size1"></span><span class="mspace" style="margin-right:0.32711111111111113em;"></span></span><span class="base"><span class="strut" style="height:1.381485em;vertical-align:-0.8564825em;"></span><span class="mop op-limits sizing reset-size6 size1"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.6744749999999997em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="mord mtight"><span class="mspace mtight" style="margin-right:0.24533333333333335em;"></span><span class="mord mathnormal mtight">i</span><span class="mpunct mtight">,</span><span class="mspace mtight" style="margin-right:0.24533333333333335em;"></span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op"></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:1.712965em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.24533333333333335em;"></span><span class="mord sizing reset-size6 size1"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.22222em;">V</span><span class="mord mathnormal sizing reset-size6 size1">e</span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.01968em;">l</span><span class="mord mathnormal sizing reset-size6 size1">oc</span><span class="mord mathnormal sizing reset-size6 size1">i</span><span class="mord mathnormal sizing reset-size6 size1">t</span><span class="mord sizing reset-size6 size1"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.03588em;margin-right:0.1em;"><span class="pstrut" style="height:2.65952em;"></span><span class="mord mtight"><span class="mspace mtight" style="margin-right:0.24533333333333335em;"></span><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">16</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5091600000000001em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.32711111111111113em;"></span><span class="mbin sizing reset-size6 size1"></span><span class="mspace" style="margin-right:0.32711111111111113em;"></span></span><span class="base"><span class="strut" style="height:0.62958em;vertical-align:-0.25458000000000003em;"></span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.22222em;">V</span><span class="mord mathnormal sizing reset-size6 size1">e</span><span class="mord mathnormal sizing reset-size6 size1" style="margin-right:0.01968em;">l</span><span class="mord mathnormal sizing reset-size6 size1">oc</span><span class="mord mathnormal sizing reset-size6 size1">i</span><span class="mord mathnormal sizing reset-size6 size1">t</span><span class="mord sizing reset-size6 size1"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.03588em;margin-right:0.1em;"><span class="pstrut" style="height:2.65952em;"></span><span class="mord mtight"><span class="mspace mtight" style="margin-right:0.24533333333333335em;"></span><span class="mord mathnormal mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5091600000000001em;"><span></span></span></span></span></span></span><span class="mord sizing reset-size6 size1"></span></span><span class="mspace newline sizing reset-size6 size1"></span><span class="base"><span class="strut" style="height:0.44443999999999995em;vertical-align:-0.09722em;"></span><span class="mord text sizing reset-size6 size1"><span class="mord">whereidenotestimestep0to15andjdenotesthevoiceindex</span></span></span><span class="tag"><span class="strut" style="height:1.6064825em;vertical-align:-0.8564825em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">7</span></span><span class="mord">)</span></span></span></span></span></span></div><p id="nk20b2bbfvr"><a id="ntf90vdtpic" href="#nejayvk3ygr" class="reference" data-node-type="reference" data-target-id="nejayvk3ygr">Image 17</a> summarizes the distributions of velocity similarity scores.  </p><figure id="nejayvk3ygr" data-node-type="image" data-size="76" data-align="center" data-url="https://assets.pubpub.org/l8dqqq4l/21643060329141.png" data-caption="&lt;p id=&quot;nzsdodqxgpg&quot;&gt;Distribution of velocity similarity scores across genres for the validation set ground truth data, &lt;a href=&quot;https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/2cgu9h6u&quot;&gt;rosy-durian-248&lt;/a&gt; run, and &lt;a href=&quot;https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/zc69p7e3&quot;&gt;GrooVAE&lt;/a&gt;&lt;/p&gt;" data-alt-text=""><img srcSet="" src="https://assets.pubpub.org/l8dqqq4l/21643060329141.png" alt="" aria-labelledby="nejayvk3ygr-figure-caption"/><figcaption id="nejayvk3ygr-figure-caption"><div><strong spellcheck="false">Image 17</strong><div><p id="nzsdodqxgpg">Distribution of velocity similarity scores across genres for the validation set ground truth data, <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/2cgu9h6u">rosy-durian-248</a> run, and <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/zc69p7e3">GrooVAE</a></p></div></div></figcaption></figure><p id="nydcfky438w">The above image demonstrates that, just like the validation set, both <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/2cgu9h6u">rosy-durian-248</a> and <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/zc69p7e3">GrooVAE</a> generate highly symmetrical velocity patterns. This can be further confirmed by looking at the generated velocity heat maps (similar to <a id="nd9r3n880be" href="#n8hegaw6k26" class="reference" data-node-type="reference" data-target-id="n8hegaw6k26">Image 12</a>).</p><p id="nzmt5fgd38i">Finally, to evaluate the generated offsets we calculated the Timing Accuracy of the generations and the ground truth dataset. As in <a href="#citation-7YRDMY5hTk-bottom" id="citation-7YRDMY5hTk-inline" data-node-type="citation" data-value="@article{bruford2020multidimensional,
  title={Multidimensional similarity modelling of complex drum loops using the GrooveToolbox},
  author={Bruford, Fred and Lartillot, Olivier and McDonald, SKoT and Sandler, Mark},
  year={2020},
  publisher={McGill-Queen&#x27;s University Press}
}" data-unstructured-value="" data-custom-label="" class="citation">[30]</a>, Timing Accuracy is defined as the absolute sum of micro-timing deviations on 8th note positions. <a id="nejmxm4fomz" href="#nlmnu8bj3ed" class="reference" data-node-type="reference" data-target-id="nlmnu8bj3ed">Image 18</a> summarizes these results. </p><figure id="nlmnu8bj3ed" data-node-type="image" data-size="76" data-align="center" data-url="https://assets.pubpub.org/mp67wddo/41643063253187.png" data-caption="&lt;p id=&quot;n9679bpbnp1&quot;&gt;Distribution of Timing Accuracy scores across genres for the validation set ground truth data, &lt;a href=&quot;https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/2cgu9h6u&quot;&gt;rosy-durian-248&lt;/a&gt; run, and &lt;a href=&quot;https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/zc69p7e3&quot;&gt;GrooVAE&lt;/a&gt;&lt;/p&gt;" data-alt-text=""><img srcSet="" src="https://assets.pubpub.org/mp67wddo/41643063253187.png" alt="" aria-labelledby="nlmnu8bj3ed-figure-caption"/><figcaption id="nlmnu8bj3ed-figure-caption"><div><strong spellcheck="false">Image 18</strong><div><p id="n9679bpbnp1">Distribution of Timing Accuracy scores across genres for the validation set ground truth data, <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/2cgu9h6u">rosy-durian-248</a> run, and <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/zc69p7e3">GrooVAE</a></p></div></div></figcaption></figure><p id="nr1vk5p80sq"><a id="nz54rszt2s1" href="#nlmnu8bj3ed" class="reference" data-node-type="reference" data-target-id="nlmnu8bj3ed">Image 18</a> clearly shows that the timing of generations using both <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/2cgu9h6u">rosy-durian-248</a> and <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/zc69p7e3">GrooVAE</a> models are considerably lower than the ground truth data. In other words, these two models struggle to accurately generalize the timing of events. The scatter data shown in <a id="n7fwhkblkvn" href="#n8hegaw6k26" class="reference" data-node-type="reference" data-target-id="n8hegaw6k26">Image 12</a> further confirm this shortcoming in both models.</p><h1 id="discussion">Discussion </h1><p id="nikgs82z6sv">In this section, we start by providing a discussion on the drum generation system presented above. Moreover, we provide a number of suggestions on how to improve this system. Lastly, we provide a discussion on how this system can or can not be used in real-time.</p><h2 id="monotonic-groove-performance-to-drum-loop-generator">Monotonic Groove Performance to Drum Loop Generator</h2><p id="ncg0gyk5edd">The evaluations presented above show that the transformer architecture can be used for generating drum loops given a performed monotonic groove. Moreover, we were able to confirm that this task can be executed while avoiding tokenization of events. </p><p id="nvzkzpvblks">While the results show that the model does successfully generalize some aspects of the dataset (such as hit distributions and symmetrical velocities), the model certainly struggles to generalize offsets (timing deviations from the 16th note grid lines). Finally, compared to <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/zc69p7e3">GrooVAE</a>, the model showed to be more persistent in generating  patterns that mostly employ kick, snare, closed hat, and ride instruments. We strongly speculate that one reason for these shortcomings is the imbalance in the dataset. This imbalance exists in two different aspects of the dataset:</p><ol id="nbl5bp2okdw"><li><p id="no480uez1lw">The samples in the dataset are unequally distributed across genres as shown in <a id="n2v0lfeomi2" href="#n76aepxaiwq" class="reference" data-node-type="reference" data-target-id="n76aepxaiwq">Image 2</a>. </p></li><li><p id="nmd9zo46tw5">Kick, snare, closed hat and ride instruments correspond to 88% of the hits available in the dataset (see <a id="nms69tg1kih" href="#nrswaqw1vtm" class="reference" data-node-type="reference" data-target-id="nrswaqw1vtm">Table 2</a>,). </p></li></ol><p id="ng788fkfqpo">These imbalances are even more pronounced in the generated data. Different strategies should be employed to account for the imbalances in the dataset. </p><p id="ngv68uft6ni">Moreover, we speculate that the design of the loss function (<a id="nhrjz1cawl1" href="#nfucm39r33l" class="reference missing" data-node-type="reference" data-target-id="nfucm39r33l">(ref?)</a> to <a id="ney0xjlzlon" href="#noz8oy211od" class="reference missing" data-node-type="reference" data-target-id="noz8oy211od">(ref?)</a>) corresponds to the inability of the model in generating expressive timings. One reason can be the imbalanced contribution of individual losses (hits, velocities, and offsets) to the overall loss. We were unable to improve this issue at this point, hence, further investigation is required. </p><p id="nc3dg6ort3n">We believe there are a few improvements that can be investigated in the future:</p><ol id="nrkwho7fjxg"><li><p id="nh7dfkgxwkc">Investigate the effectiveness of an alternative grid consisting of a mixture of triplet and duplet grid lines</p></li><li><p id="n8xh6bcphyz">Investigate the effects of pre-training on larger datasets </p></li><li><p id="nuzxpmoh7iw">Investigate retraining the model in a multi-task learning setting to improve offset variability</p></li><li><p id="ndaj39hqq3m">Improve the controllability of the generations by utilizing additional control parameters such as style, tempo, event density, and instrument density.</p></li></ol><h2 id="real-time-application">Real-Time Application</h2><p id="nowv9s74o1y">Using the Google Colab notebook provided <a href="https://github.com/AnonUserGit/TransformerVelGroove2Performance/blob/main/NIME2022_Demo.ipynb">here</a><a href="#fn-12-bottom" id="fn-12-inline" data-node-type="footnote" data-value="&lt;p id=&quot;n1ezix6qctz&quot;&gt;https://github.com/AnonUserGit/TransformerVelGroove2Performance/blob/main/NIME2022_Demo.ipynb&lt;/p&gt;" date-structured-value="" class="footnote">13</a>, we crudely tested the inference time for the <a href="https://wandb.ai/mmil_tap2drum/transformer_groove_tap2drum/runs/vxuuth1y">misunderstood-bush-246</a> model. Inference times without using a GPU were typically on the order of tens of milliseconds. Hence, we believe that the system is not computationally costly depending on the target application. For instance, in an offline setting, this system can be affordably deployed to generate drum patterns given a monotonic groove. </p><p id="n6jb9ox0q5u">The relatively short inference time allows for the model to be deployed in certain real-time settings as well. For instance, the system can be used as an accompanying drummer that responds to (or rather accompanies) an instrumentalist with a fixed measure-long delay. In this context, recurring at the beginning of every measure, the system generates content to be played back at the end of the measure at the beginning of which the generation was triggered (see <a id="n0xs4pf4lwt" href="#n8saig9lklt" class="reference" data-node-type="reference" data-target-id="n8saig9lklt">Image 19</a>). Note that in context a reference click track should be used to metrically synchronize the performer with the system. </p><figure id="n8saig9lklt" data-node-type="image" data-size="96" data-align="center" data-url="https://assets.pubpub.org/o5tobavq/61643651212190.jpeg" data-caption="&lt;p id=&quot;nkpenqjddny&quot;&gt;An example of a real-time system using the existing generative model&lt;/p&gt;" data-alt-text=""><img srcSet="" src="https://assets.pubpub.org/o5tobavq/61643651212190.jpeg" alt="" aria-labelledby="n8saig9lklt-figure-caption"/><figcaption id="n8saig9lklt-figure-caption"><div><strong spellcheck="false">Image 19</strong><div><p id="nkpenqjddny">An example of a real-time system using the existing generative model</p></div></div></figcaption></figure><p id="n2ksvrwhqgu">A rather more interesting alternative real-time application for a groove to drum generator is to use the model as a performable instrument (similar to Piano Genie <a href="#citation-HUD1V3B0Bx-bottom" id="citation-HUD1V3B0Bx-inline" data-node-type="citation" data-value="@inproceedings{donahue2019piano,
  title={Piano genie},
  author={Donahue, Chris and Simon, Ian and Dieleman, Sander},
  booktitle={Proceedings of the 24th International Conference on Intelligent User Interfaces},
  pages={160--164},
  year={2019}
}" data-unstructured-value="" data-custom-label="" class="citation">[31]</a>, a real-time system that maps a limited set of 8 keys into a full-size piano performance). In this context, the instrumentalist (performer), rather than accompanying the generator, plays the generator as an instrument. </p><p id="nmftfhh6p54">Unfortunately, the generative system developed for this work is not usable in this context. The main reason for this incompatibility is that we based our design only on the encoder section of the Vanilla transformer <a href="#citation-qLZoDdBbWb-bottom" id="citation-qLZoDdBbWb-inline" data-node-type="citation" data-value="@inproceedings{vaswani2017attention,
  title={Attention is all you need},
  author={Vaswani, Ashish and Shazeer, Noam and Parmar, Niki and Uszkoreit, Jakob and Jones, Llion and Gomez, Aidan N and Kaiser, {\L}ukasz and Polosukhin, Illia},
  booktitle={Advances in neural information processing systems},
  pages={5998--6008},
  year={2017}
}" data-unstructured-value="" data-custom-label="" class="citation">[1]</a>. As a result, the attention mechanism at any time step requires attending to not only the current and the past time steps but also the upcoming ones. Hence, the existing drum generator is not a causal system and can not be employed in a real-time scenario as is. In order to be able to use the generator as a real-time playable (performable) instrument, the model needs to be modified into a causal system. To do so, we will need to take advantage of a causally masked attention mechanism such that the prediction at any time step is only dependent on current and past events. </p><h1 id="conclusions">Conclusions </h1><p id="ni2n8vhk6e7">In this paper, we presented a transformer architecture capable of generating drum loops given a performed monotonic groove. Moreover, our initial investigations demonstrate that this task can be reasonably executed without the discretization (tokenization) of the input/output sequences. Finally, we provided a discussion on the real-time applications of the proposed system. </p><h1 id="ethics-statement">Ethics Statement</h1><p id="nvhh3x36kre">We acknowledge that there are many ethical concerns with regard to generative systems in general, to name a few, automation, data ownership, generation ownership, fair (or rather biased) representation, as well as the accessibility of development tools. While we did not have ethical conflicts throughout this work, we are certainly concerned about future direct/in-direct applications of our research, specifically in a commercial context. </p><p id="npd7wajllq2">During this work, we only used publicly available data as well as publicly available tools. For researching/developing the methods involved, we had access to a high-performance computing cluster; we acknowledge that these tools are not publicly available, specifically, for independent researchers. As a result, we have done our utmost best to publicly share not only the source code of our work but also any trained versions of our models, as well as, scripts to easily load, use, and study the trained models without requiring any specific high-performance hardware. </p><div class="pub-notes"><h1>Footnotes</h1><ol><li id="fn-0-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body"></div></span><span><p id="nj1pd0dq85p"><a href="https://colinraffel.com/projects/lmd/">https://colinraffel.com/projects/lmd/</a></p></span></span> <a href="#fn-0-inline" class="return-link"></a></li><li id="fn-1-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body"></div></span><span><p id="n1w5nro6zl5">The authors of GrooVAE collected and released hours of drum performances (Groove MIDI Dataset) from improvisations in different styles.</p></span></span> <a href="#fn-1-inline" class="return-link"></a></li><li id="fn-2-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body"></div></span><span><p id="nkzep4sm7l4">Throughout this paper, we will be using images similar to the following Image, referred to as Velocity Heat-maps. These plots are compiled from a collection of loops (either from predictions or the ground truth). In other words, these plots are obtained by superimposing the piano-roll representations of all the sample loops available in a given subset. The orange scatter points in these images represent a drum event (a hit) at a given time (found on the x-axis relative to the 16th note grid in 4/4) with a given velocity (found on the y-axis). The underlying heat maps are calculated by applying a gaussian filter to the two-dimensional histograms of the scatter points and denote the probabilities of events happening in different regions.</p></span></span> <a href="#fn-2-inline" class="return-link"></a></li><li id="fn-3-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body"></div></span><span><p id="nmpveg977as">A summary of these experiments can be found here: <a href="https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/First-sweeps-and-lack-of-variation-in-offsets--VmlldzoxNTA1ODk2">https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/First-sweeps-and-lack-of-variation-in-offsets--VmlldzoxNTA1ODk2</a></p></span></span> <a href="#fn-3-inline" class="return-link"></a></li><li id="fn-4-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body"></div></span><span><p id="n46mnufv0bv"><a href="http://goo.gl/magenta/groovae-colab">http://goo.gl/magenta/groovae-colab</a></p></span></span> <a href="#fn-4-inline" class="return-link"></a></li><li id="fn-5-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body"></div></span><span><p id="nadk53bkatr">Hit loss multiplier in Equation 7</p></span></span> <a href="#fn-5-inline" class="return-link"></a></li><li id="fn-6-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body"></div></span><span><p><a href="https://github.com/AnonUserGit/TransformerVelGroove2Performance">https://github.com/AnonUserGit/TransformerVelGroove2Performance</a></p></span></span> <a href="#fn-6-inline" class="return-link"></a></li><li id="fn-7-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body"></div></span><span><p id="n1ezix6qctz"><a href="https://github.com/AnonUserGit/TransformerVelGroove2Performance/blob/main/NIME2022_Demo.ipynb">https://github.com/AnonUserGit/TransformerVelGroove2Performance/blob/main/NIME2022_Demo.ipynb</a></p></span></span> <a href="#fn-7-inline" class="return-link"></a></li><li id="fn-8-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body"></div></span><span><p id="nbhks31zblh"><em><strong>Using an Nvidia </strong></em><strong>Tesla T4 GPU (</strong><a href="https://www.nvidia.com/en-us/data-center/tesla-t4/">https://www.nvidia.com/en-us/data-center/tesla-t4/</a>)</p></span></span> <a href="#fn-8-inline" class="return-link"></a></li><li id="fn-9-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body"></div></span><span><p><a href="https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/Audios-selected-models-vs-GrooVAE--VmlldzoxNDc3ODM4">https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/Audios-selected-models-vs-GrooVAE--VmlldzoxNDc3ODM4</a></p></span></span> <a href="#fn-9-inline" class="return-link"></a></li><li id="fn-10-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body"></div></span><span><p id="nsikxmzs2zt"><a href="https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/Velocity-heatmaps-selected-models-vs-GrooVAE--VmlldzoxNDc3ODQ4">https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/Velocity-heatmaps-selected-models-vs-GrooVAE--VmlldzoxNDc3ODQ4</a></p></span></span> <a href="#fn-10-inline" class="return-link"></a></li><li id="fn-11-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body"></div></span><span><p id="nd5ope2oa4e"><a href="https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/Evolution-of-velocity-heatmaps-during-training-validation-set---VmlldzoxNDc3ODM1">https://wandb.ai/anonmmi/NIME2022_anon_rytm/reports/Evolution-of-velocity-heatmaps-during-training-validation-set---VmlldzoxNDc3ODM1</a></p></span></span> <a href="#fn-11-inline" class="return-link"></a></li></ol><h1>References</h1><ol><li id="citation-qLZoDdBbWb-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="vaswani2017attention" class="csl-entry">Vaswani, A., Shazeer, N., Parmar, N., Uszkoreit, J., Jones, L., Gomez, A. N.,  Polosukhin, I. (2017). Attention is all you need. <i>Advances in Neural Information Processing Systems</i>, 59986008.</div></div></span><span></span></span> <a href="#citation-qLZoDdBbWb-inline" class="return-link"></a></li><li id="citation-n/QdEvcmJY-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="devlin2018bert" class="csl-entry">Devlin, J., Chang, M.-W., Lee, K., &#38; Toutanova, K. (2018). Bert: Pre-training of deep bidirectional transformers for language understanding. <i>arXiv Preprint arXiv:1810.04805</i>.</div></div></span><span></span></span> <a href="#citation-n/QdEvcmJY-inline" class="return-link"></a></li><li id="citation-0tWEuZccYj-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="radford2019language" class="csl-entry">Radford, A., Wu, J., Child, R., Luan, D., Amodei, D., Sutskever, I., &#38; others. (2019). Language models are unsupervised multitask learners. <i>OpenAI Blog</i>, <i>1</i>(8), 9.</div></div></span><span></span></span> <a href="#citation-0tWEuZccYj-inline" class="return-link"></a></li><li id="citation-4GsXDOkdqV-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="brown2020language" class="csl-entry">Brown, T. B., Mann, B., Ryder, N., Subbiah, M., Kaplan, J., Dhariwal, P.,  others. (2020). Language models are few-shot learners. <i>arXiv Preprint arXiv:2005.14165</i>.</div></div></span><span></span></span> <a href="#citation-4GsXDOkdqV-inline" class="return-link"></a></li><li id="citation-lQHnw1IhQx-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="huang2018music" class="csl-entry">Huang, C.-Z. A., Vaswani, A., Uszkoreit, J., Shazeer, N., Simon, I., Hawthorne, C.,  Eck, D. (2018). Music transformer. <i>arXiv Preprint arXiv:1809.04281</i>.</div></div></span><span></span></span> <a href="#citation-lQHnw1IhQx-inline" class="return-link"></a></li><li id="citation-2WV7LUqKci-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="payne2019musenet" class="csl-entry">Payne, C. (2019). MuseNet. <i>OpenAI Blog</i>, <i>3</i>.</div></div></span><span></span></span> <a href="#citation-2WV7LUqKci-inline" class="return-link"></a></li><li id="citation-bV9UuLrN/H-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="donahue2019lakhnes" class="csl-entry">Donahue, C., Mao, H. H., Li, Y. E., Cottrell, G. W., &#38; McAuley, J. (2019). LakhNES: Improving multi-instrumental music generation with cross-domain pre-training. <i>arXiv Preprint arXiv:1907.04868</i>.</div></div></span><span></span></span> <a href="#citation-bV9UuLrN/H-inline" class="return-link"></a></li><li id="citation-ehRRkO1lwP-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="choi2020encoding" class="csl-entry">Choi, K., Hawthorne, C., Simon, I., Dinculescu, M., &#38; Engel, J. (2020). Encoding musical style with transformer autoencoders. <i>International Conference on Machine Learning</i>, 18991908. PMLR.</div></div></span><span></span></span> <a href="#citation-ehRRkO1lwP-inline" class="return-link"></a></li><li id="citation-Iq5u6VfNaW-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="huang2020pop" class="csl-entry">Huang, Y.-S., &#38; Yang, Y.-H. (2020). Pop Music Transformer: Beat-based modeling and generation of expressive Pop piano compositions. <i>Proceedings of the 28th ACM International Conference on Multimedia</i>, 11801188.</div></div></span><span></span></span> <a href="#citation-Iq5u6VfNaW-inline" class="return-link"></a></li><li id="citation-m0Ed9yGsw2-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="hsiao2021compound" class="csl-entry">Hsiao, W.-Y., Liu, J.-Y., Yeh, Y.-C., &#38; Yang, Y.-H. (2021). Compound Word Transformer: Learning to Compose Full-Song Music over Dynamic Directed Hypergraphs. <i>arXiv Preprint arXiv:2101.02402</i>.</div></div></span><span></span></span> <a href="#citation-m0Ed9yGsw2-inline" class="return-link"></a></li><li id="citation-4JApWPgObn-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="jiang2020transformer" class="csl-entry">Jiang, J., Xia, G. G., Carlton, D. B., Anderson, C. N., &#38; Miyakawa, R. H. (2020). Transformer vae: A hierarchical model for structure-aware and interpretable music representation learning. <i>ICASSP 2020-2020 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP)</i>, 516520. IEEE.</div></div></span><span></span></span> <a href="#citation-4JApWPgObn-inline" class="return-link"></a></li><li id="citation-YH6T5TLTUw-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="gomez2020drum" class="csl-entry">Gmez-Marn, D., Jord, S., &#38; Herrera, P. (2020). Drum rhythm spaces: From polyphonic similarity to generative maps. <i>Journal of New Music Research</i>, <i>49</i>(5), 438456.</div></div></span><span></span></span> <a href="#citation-YH6T5TLTUw-inline" class="return-link"></a></li><li id="citation-2nh/QZbdnD-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="vogl2019automatic" class="csl-entry">Vogl, R., Eghbal-Zadeh, H., &#38; Knees, P. (2019). An automatic drum machine with touch UI based on a generative neural network. <i>Proceedings of the 24th International Conference on Intelligent User Interfaces: Companion</i>, 9192.</div></div></span><span></span></span> <a href="#citation-2nh/QZbdnD-inline" class="return-link"></a></li><li id="citation-2RWoO7KUmJ-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="lea2017temporal" class="csl-entry">Lea, C., Flynn, M. D., Vidal, R., Reiter, A., &#38; Hager, G. D. (2017). Temporal convolutional networks for action segmentation and detection. <i>Proceedings of the IEEE Conference on Computer Vision and Pattern Recognition</i>, 156165.</div></div></span><span></span></span> <a href="#citation-2RWoO7KUmJ-inline" class="return-link"></a></li><li id="citation-h3eMEAMTE/-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="mccormack2019silent" class="csl-entry">McCormack, J., Gifford, T., Hutchings, P., Llano Rodriguez, M. T., Yee-King, M., &#38; dInverno, M. (2019). In a silent way: Communication between ai and improvising musicians beyond sound. <i>Proceedings of the 2019 CHI Conference on Human Factors in Computing Systems</i>, 111.</div></div></span><span></span></span> <a href="#citation-h3eMEAMTE/-inline" class="return-link"></a></li><li id="citation-73iHrUlarI-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="chen2020automatic" class="csl-entry">Chen, Y.-H., Huang, Y.-H., Hsiao, W.-Y., &#38; Yang, Y.-H. (2020). Automatic composition of guitar tabs by transformers and groove modeling. <i>arXiv Preprint arXiv:2008.01431</i>.</div></div></span><span></span></span> <a href="#citation-73iHrUlarI-inline" class="return-link"></a></li><li id="citation-Ntp8vFXDi2-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="wu2020jazz" class="csl-entry">Wu, S.-L., &#38; Yang, Y.-H. (2020). The jazz transformer on the front line: Exploring the shortcomings of ai-composed music through quantitative measures. <i>arXiv Preprint arXiv:2008.01307</i>.</div></div></span><span></span></span> <a href="#citation-Ntp8vFXDi2-inline" class="return-link"></a></li><li id="citation-NWrRe8BNn4-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="wu2020transformer" class="csl-entry">Wu, X., Wang, C., &#38; Lei, Q. (2020). Transformer-XL Based Music Generation with Multiple Sequences of Time-valued Notes. <i>arXiv Preprint arXiv:2007.07244</i>.</div></div></span><span></span></span> <a href="#citation-NWrRe8BNn4-inline" class="return-link"></a></li><li id="citation-HBgbtECiSg-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="devlin2018bert" class="csl-entry">Devlin, J., Chang, M.-W., Lee, K., &#38; Toutanova, K. (2018). Bert: Pre-training of deep bidirectional transformers for language understanding. <i>arXiv Preprint arXiv:1810.04805</i>.</div></div></span><span></span></span> <a href="#citation-HBgbtECiSg-inline" class="return-link"></a></li><li id="citation-Qx+yGuomFZ-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="dai2019transformer" class="csl-entry">Dai, Z., Yang, Z., Yang, Y., Carbonell, J., Le, Q. V., &#38; Salakhutdinov, R. (2019). Transformer-xl: Attentive language models beyond a fixed-length context. <i>arXiv Preprint arXiv:1901.02860</i>.</div></div></span><span></span></span> <a href="#citation-Qx+yGuomFZ-inline" class="return-link"></a></li><li id="citation-ZPo7iX+Cgy-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body"></div></span><span><p id="nlw1sqd07iy">Payne, Christine. "MuseNet." OpenAI, 25 Apr. 2019, <a href="http://openai.com/blog/musenet">openai.com/blog/musenet</a></p></span></span> <a href="#citation-ZPo7iX+Cgy-inline" class="return-link"></a></li><li id="citation-ptDFlFnSTF-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body"></div></span><span><p id="nfk4pkv4xoy">Colin Raffel. "Learning-Based Methods for Comparing Sequences, with Applications to Audio-to-MIDI Alignment and Matching". PhD Thesis, 2016.</p></span></span> <a href="#citation-ptDFlFnSTF-inline" class="return-link"></a></li><li id="citation-aBgoLm/UU7-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="donahue2018nesmdb" class="csl-entry">Donahue, C., Mao, H. H., &#38; McAuley, J. (2018). The NES Music Database: A multi-instrumental dataset with expressive performance attributes. <i>ISMIR</i>.</div></div></span><span></span></span> <a href="#citation-aBgoLm/UU7-inline" class="return-link"></a></li><li id="citation-BqTTWMd/J6-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="ens2020mmm" class="csl-entry">Ens, J., &#38; Pasquier, P. (2020). Mmm: Exploring conditional multi-track music generation with the transformer. <i>arXiv Preprint arXiv:2008.06048</i>.</div></div></span><span></span></span> <a href="#citation-BqTTWMd/J6-inline" class="return-link"></a></li><li id="citation-LeqNzKQwe0-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="nuttall2021transformer" class="csl-entry">Nuttall, T., Haki, B., &#38; Jorda, S. (2021). <i>Transformer Neural Networks for Automated Rhythm Generation</i>.</div></div></span><span></span></span> <a href="#citation-LeqNzKQwe0-inline" class="return-link"></a></li><li id="citation-PuL1Fh1bUl-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="gillick2019learning" class="csl-entry">Gillick, J., Roberts, A., Engel, J., Eck, D., &#38; Bamman, D. (2019). Learning to groove with inverse sequence transformations. <i>International Conference on Machine Learning</i>, 22692279. PMLR.</div></div></span><span></span></span> <a href="#citation-PuL1Fh1bUl-inline" class="return-link"></a></li><li id="citation-BAnhZEb5uM-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="cartwright2018increasing" class="csl-entry">Cartwright, M., &#38; Bello, J. P. (2018). Increasing drum transcription vocabulary using data synthesis. <i>Proc. International Conference on Digital Audio Effects (DAFx)</i>, 7279.</div></div></span><span></span></span> <a href="#citation-BAnhZEb5uM-inline" class="return-link"></a></li><li id="citation-5EI8RwiYT7-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="wandb" class="csl-entry">Biewald, L. (2020). <i>Experiment Tracking with Weights and Biases</i>. Retrieved from <a href="https://www.wandb.com/">https://www.wandb.com/</a></div></div></span><span></span></span> <a href="#citation-5EI8RwiYT7-inline" class="return-link"></a></li><li id="citation-JDWrinWu9H-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="goodfellow2016deep" class="csl-entry">Goodfellow, I., Bengio, Y., &#38; Courville, A. (2016). <i>Deep learning</i>. MIT press.</div></div></span><span></span></span> <a href="#citation-JDWrinWu9H-inline" class="return-link"></a></li><li id="citation-7YRDMY5hTk-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="bruford2020multidimensional" class="csl-entry">Bruford, F., Lartillot, O., McDonald, Sk., &#38; Sandler, M. (2020). <i>Multidimensional similarity modelling of complex drum loops using the GrooveToolbox</i>.</div></div></span><span></span></span> <a href="#citation-7YRDMY5hTk-inline" class="return-link"></a></li><li id="citation-HUD1V3B0Bx-bottom"><span class="pub-note-content-component"><span><div class="csl-bib-body">  <div data-csl-entry-id="donahue2019piano" class="csl-entry">Donahue, C., Simon, I., &#38; Dieleman, S. (2019). Piano genie. <i>Proceedings of the 24th International Conference on Intelligent User Interfaces</i>, 160164.</div></div></span><span></span></span> <a href="#citation-HUD1V3B0Bx-inline" class="return-link"></a></li></ol></div></div></div></body></html>